<!DOCTYPE html>
<html lang="vi">
<head>
<script src="/rw-event-id.js" defer></script>


<!-- ================= META CLIENT PARAM BUILDER ================= -->
<script>
window.addEventListener('load', function () {
  var s = document.createElement('script');
  s.src = 'https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js';
  s.onload = function () {
    try {
      if (!window.RW_EVENT_ID && window.crypto && crypto.randomUUID) {
        window.RW_EVENT_ID = crypto.randomUUID();
      }

      if (window.clientParamBuilder) {
        clientParamBuilder.processAndCollectAllParams(
          window.location.href,
          function () { return ''; }
        );
      }
    } catch (e) {
      console.warn('CAPI init failed', e);
    }
  };
  document.body.appendChild(s);
});
</script>

<!-- ================= CONVERSION EVENT ID STORE ================= -->
<script>
window.RW_FINAL_CONV_EVENTS = {};

function getFinalConvEventId(action) {
  const key = 'rw_final_' + action;

  let eid = sessionStorage.getItem(key);
  if (eid) return eid;

  if (window.RW_FINAL_CONV_EVENTS[action]) {
    return window.RW_FINAL_CONV_EVENTS[action];
  }

  eid =
    (window.crypto && crypto.randomUUID)
      ? crypto.randomUUID()
      : 'rw_' + Date.now() + '_' + Math.random().toString(36).slice(2);

  window.RW_FINAL_CONV_EVENTS[action] = eid;
  sessionStorage.setItem(key, eid);

  return eid;
}
</script>

<!-- ================= FETCH HEADER (PAGEVIEW ONLY ‚Äì SAFE) ================= -->
<script>
(function () {
  if (!window.fetch || !window.RW_EVENT_ID) return;

  var originalFetch = window.fetch;

  window.fetch = function (url, options) {
    options = options || {};
    options.headers = options.headers || {};

    // üîí CH·ªà g·∫Øn header cho SAME-ORIGIN (tr√°nh CORS preflight)
    if (typeof url === 'string' && url.startsWith('/')) {
      options.headers['X-RW-EVENT-ID'] = window.RW_EVENT_ID;
    }

    return originalFetch(url, options);
  };
})();
</script>


<!-- ================= GOOGLE TAG MANAGER ================= -->
<script>
(function(w,d,s,l,i){
  w[l]=w[l]||[];
  w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
  var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),
      dl=l!='dataLayer'?'&l='+l:'';
  j.async=true;
  j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
  f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KNFLM3CR');
</script>

<!-- ================= META PIXEL ================= -->
<script>
!function(f,b,e,v,n,t,s){
if(f.fbq)return;
n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];
t=b.createElement(e);t.async=!0;t.src=v;
s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)
}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');

fbq('init','862531473384426',{}, {autoConfig:false});
if (window.RW_EVENT_ID) {
  fbq('track','PageView');
}
</script>

<!-- ================= PIXEL CONVERSIONS ================= -->
<script>
(function () {
  if (!window.fbq) return;

  /* CALL */
  document.addEventListener('click', function (e) {
    var btn = e.target.closest && e.target.closest('#ruby-call-regular');
    if (!btn) return;
    fbq('trackCustom','CallButtonClick',{},{
      eventID: getFinalConvEventId('call')
    });
  });

  /* FORM ‚Äì LEAD (SUBMIT TH·∫¨T) */
  document.addEventListener('submit', function (e) {
    if (!e.target || e.target.tagName !== 'FORM') return;
    var eid = getFinalConvEventId('lead');
    fbq('track','Lead',{}, { eventID: eid });
  });

  fbq('consent','revoke');
  fbq('consent','grant');
})();
</script>

<!-- ================= CONTACT / CHAT CAPI ================= -->
<script>
(function () {
  function sendContact(source, phone, eventId) {
    console.log('[ZALO DEBUG] Sending CAPI request:', { source, phone, eventId });
    
    fetch('https://ruby-wings-chatbot-v4.onrender.com/api/track-contact', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        event_id: eventId,
        phone: phone || '',
        source: source
      })
    })
    .then(response => {
      console.log('[ZALO DEBUG] Response status:', response.status);
      return response.json();
    })
    .then(data => {
      console.log('[ZALO DEBUG] Response data:', data);
    })
    .catch(error => {
      console.error('[ZALO DEBUG] Fetch error:', error);
    });
  }

  /* ZALO ‚Äì CAPI (1 L·∫¶N / PHI√äN) */
  document.addEventListener('click', function (e) {
    var zalo = e.target.closest && e.target.closest('#rw-zalo-round-btn');
    if (!zalo) return;
    
    console.log('[ZALO DEBUG] Zalo button clicked');
    
    if (sessionStorage.getItem('rw_zalo_capi_sent')) {
    console.log('[ZALO DEBUG] Already sent in this session ‚Äì reset for retry');
    sessionStorage.removeItem('rw_zalo_capi_sent');
    }

    
    sessionStorage.setItem('rw_zalo_capi_sent', '1');
    var eventId = getFinalConvEventId('zalo');
    console.log('[ZALO DEBUG] Generated eventId:', eventId);

    sendContact(
      'Zalo Contact',
      '84332510486',
      eventId
    );
  });

  /* CHATBOT ‚Äì CAPI (1 L·∫¶N / PHI√äN) */
  document.addEventListener('click', function (e) {
    var chat = e.target.closest && e.target.closest('.rw-chat-btn, .rw-chat-btn-isolated');
    if (!chat) return;

    if (sessionStorage.getItem('rw_chat_capi_sent')) return;
    sessionStorage.setItem('rw_chat_capi_sent', '1');

    sendContact(
      'Chatbot Contact',
      '',
      getFinalConvEventId('chat')
    );
  });
})();</script>

 
<!-- === H·∫æT CODE TRACKING === -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, user-scalable=yes">

<title>Con ƒê∆∞·ªùng Tho√°t Kh·ªèi T·ªïn Th∆∞∆°ng - Ruby Wings Travel | Ch·ªØa L√†nh T·ª´ B√™n Trong</title>
<meta name="description" content="Kh√°m ph√° con ƒë∆∞·ªùng ch·ªØa l√†nh t·ªïn th∆∞∆°ng c√πng Ruby Wings Travel - ph∆∞∆°ng ph√°p k·∫øt h·ª£p thi·ªÅn ch√°nh ni·ªám, kh√≠ c√¥ng v√† thi√™n nhi√™n gi√∫p gi·∫£i t·ªèa stress, √°p l·ª±c tinh th·∫ßn v√† t√¨m l·∫°i s·ª± b√¨nh an n·ªôi t√¢m.">
<meta name="keywords" content=" nguy√™n nh√¢n t·ªïn th∆∞∆°ng, stress, √°p l·ª±c tinh th·∫ßn, m·ªát m·ªèi, ƒëau kh·ªï, b·∫ø t·∫Øc, tr·ªã li·ªáu t√¢m l√Ω, ch·ªØa l√†nh t·ªïn th∆∞∆°ng">
<meta name="author" content="Ruby Wings Travel">

<!-- Canonical -->
<link rel="canonical" href="https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html">

<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="Con ƒê∆∞·ªùng Tho√°t Kh·ªèi T·ªïn Th∆∞∆°ng - Ruby Wings Travel | Ch·ªØa L√†nh T·ª´ B√™n Trong">
<meta property="og:description" content="Ph∆∞∆°ng ph√°p ch·ªØa l√†nh t·ªïn th∆∞∆°ng k·∫øt h·ª£p thi·ªÅn ch√°nh ni·ªám, kh√≠ c√¥ng v√† thi√™n nhi√™n - gi·∫£i t·ªèa stress, t√¨m l·∫°i b√¨nh an n·ªôi t√¢m">
<meta property="og:url" content="https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html">
<meta property="og:image" content="https://rubywings.vn/images/Con-duong-thoat-khoi-ton-thuong.jpg">
<meta property="og:site_name" content="Ruby Wings Travel">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Con ƒê∆∞·ªùng Tho√°t Kh·ªèi T·ªïn Th∆∞∆°ng - Ruby Wings Travel | Ch·ªØa L√†nh T·ª´ B√™n Trong">
<meta name="twitter:description" content="Ph∆∞∆°ng ph√°p ch·ªØa l√†nh t·ªïn th∆∞∆°ng k·∫øt h·ª£p thi·ªÅn ch√°nh ni·ªám, kh√≠ c√¥ng v√† thi√™n nhi√™n">
<meta name="twitter:image" content="https://rubywings.vn/images/Con-duong-thoat-khoi-ton-thuong.jpg">
<meta name="twitter:creator" content="@TienSy379">
<script src="facebook-pixel-complete.js"></script>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&family=Open+Sans:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Favicon -->
<link rel="icon" href="https://rubywings.vn/favicon.ico" type="image/x-icon">

<!-- Schema JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://rubywings.vn/#organization",
      "name": "Ruby Wings Travel",
      "url": "https://rubywings.vn/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://rubywings.vn/images/logo.png"
      },
      "description": "Ruby Wings Travel t·ªï ch·ª©c c√°c ch∆∞∆°ng tr√¨nh tr·∫£i nghi·ªám v√† ch·ªØa l√†nh t·∫°i Vi·ªát Nam, t·∫≠p trung v√†o thi·ªÅn ch√°nh ni·ªám, kh√≠ c√¥ng, k·∫øt n·ªëi thi√™n nhi√™n v√† c√°c ph∆∞∆°ng ph√°p ph·ª•c h·ªìi tinh th·∫ßn mang t√≠nh gi√°o d·ª•c ‚Äì c·ªông ƒë·ªìng. Ho·∫°t ƒë·ªông c·ªßa Ruby Wings h∆∞·ªõng ƒë·∫øn vi·ªác h·ªó tr·ª£ c√° nh√¢n v√† nh√≥m x√¢y d·ª±ng s·ª± c√¢n b·∫±ng tinh th·∫ßn, tƒÉng c∆∞·ªùng nh·∫≠n th·ª©c v√† kh·∫£ nƒÉng t·ª± chƒÉm s√≥c s·ª©c kh·ªèe tinh th·∫ßn.",
      "telephone": "+84-33-251-0486",
      "email": "rubywingslsa@gmail.com",
      "sameAs": [
        "https://www.facebook.com/profile.php?id=61563772112138",
        "https://www.facebook.com/tien.sy.5011/",
        "https://x.com/TienSy379",
        "https://www.instagram.com/tiensyrubywings",
        "https://www.tiktok.com/@syluong379",
        "https://www.linkedin.com/in/ti%E1%BA%BFn-s%E1%BB%B9-l%C6%B0%C6%A1ng-9a0292387"
      ],
      "founder": {
        "@type": "Person",
        "name": "L∆∞∆°ng Ti·∫øn S·ªπ",
        "jobTitle": "Founder & CEO",
        "url": "https://www.facebook.com/tien.sy.5011/"
      },
      "areaServed": {
        "@type": "Country",
        "name": "Vi·ªát Nam"
      }
    },
    {
      "@type": "AboutPage",
      "@id": "https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html#aboutpage",
      "url": "https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html",
      "name": "Con ƒê∆∞·ªùng Tho√°t Kh·ªèi T·ªïn Th∆∞∆°ng - Ruby Wings",
      "description": "Trang gi·ªõi thi·ªáu n·ªôi dung v√† ƒë·ªãnh h∆∞·ªõng ph∆∞∆°ng ph√°p h·ªó tr·ª£ ph·ª•c h·ªìi tinh th·∫ßn th√¥ng qua thi·ªÅn ch√°nh ni·ªám, kh√≠ c√¥ng v√† k·∫øt n·ªëi v·ªõi thi√™n nhi√™n do Ruby Wings Travel x√¢y d·ª±ng.",
      "isPartOf": {
        "@id": "https://rubywings.vn/#website"
      },
      "about": {
        "@id": "https://rubywings.vn/#organization"
      },
      "datePublished": "2024-01-01",
      "dateModified": "2024-01-01",
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://rubywings.vn/images/Con-duong-thoat-khoi-ton-thuong.jpg"
      },
      "breadcrumb": {
        "@id": "https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html#breadcrumb"
      },
      "publisher": {
        "@id": "https://rubywings.vn/#organization"
      }
    },
    {
      "@type": "BreadcrumbList",
      "@id": "https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Trang ch·ªß",
          "item": "https://rubywings.vn/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Ch·ªØa l√†nh",
          "item": "https://rubywings.vn/chua-lanh.html"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Con ƒë∆∞·ªùng tho√°t kh·ªèi t·ªïn th∆∞∆°ng",
          "item": "https://rubywings.vn/Con-duong-thoat-khoi-ton-thuong.html"
        }
      ]
    },
    {
      "@type": "WebSite",
      "@id": "https://rubywings.vn/#website",
      "url": "https://rubywings.vn/",
      "name": "Ruby Wings Travel",
      "description": "Du l·ªãch tr·∫£i nghi·ªám - H√†nh tr√¨nh c·ªßa chi·ªÅu s√¢u",
      "publisher": {
        "@id": "https://rubywings.vn/#organization"
      }
    }
  ]
}
</script>

    
    <style>
        /* === Bi·∫øn CSS === */
        :root {
            --color-primary: #FF4081;    /* M√†u ƒë·ªè t∆∞∆°i pha h·ªìng */
            --color-secondary: #2E7D32;  /* M√†u xanh l√° c√¢y ƒë·∫≠m */
            --color-secondary-light: #4CAF50; /* M√†u xanh l√° nh·∫°t */
            --color-accent: #e9c46a;     /* M√†u v√†ng √°nh kim */
            --color-dark: #264653;       /* M√†u xanh ƒë·∫≠m */
            --color-light: #f8f9fa;      /* M√†u n·ªÅn nh·∫π */
            --color-nature: #2a9d8f;     /* M√†u xanh thi√™n nhi√™n */
            
            --font-heading: 'Noto Serif', serif;
            --font-body: 'Open Sans', sans-serif;
            --font-special: 'Roboto', sans-serif;
            
            --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
       
        /* === Reset CSS === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: var(--font-body);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            background-color: #fff;
            text-align: justify;
        }
       
        h1, h2, h3, h4 {
            font-family: var(--font-heading);
            margin-bottom: 15px;
            line-height: 1.2;
        }
       
        img {
            max-width: 100%;
            height: auto;
        }
       
        ul {
            list-style: none;
        }
       
        a {
            text-decoration: none;
            color: inherit;
        }
       
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
       
        .btn {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            padding: 10px 25px;
            border-radius: 30px;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
       
        .btn:hover {
            background: var(--color-secondary);
            transform: translateY(-3px);
            box-shadow: var(--box-shadow);
        }
       
        /* === Header === */
        header {
            background-color: rgba(255, 255, 255, 0.98);
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: var(--transition);
            position: sticky;
            top: 0;
        }
       
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
       
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
       
        .logo img {
            height: 70px;
            width: auto;
            transition: var(--transition);
        }
       
        .logo-text {
            display: flex;
            flex-direction: column;
        }
       
        .logo-main {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--color-primary);
            font-family: var(--font-heading);
        }
       
        .logo-sub {
            font-size: 1rem;
            color: var(--color-secondary);
            font-weight: 600;
            white-space: nowrap;
        }
       
        .nav-links {
            display: flex;
            gap: 25px;
        }
       
        .nav-links a {
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            font-size: 1.12rem;
        }
       
        .nav-links a:hover {
            color: var(--color-primary);
        }
       
        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            background: var(--color-primary);
            bottom: -5px;
            left: 0;
            transition: var(--transition);
        }
       
        .nav-links a:hover::after {
            width: 100%;
        }

        /* === Search Section === */
        .search-section {
            background: linear-gradient(135deg, rgba(255,64,129,0.05), rgba(46,125,50,0.05));
            padding: 20px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .search-form {
            display: flex;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-radius: 30px;
            overflow: hidden;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: none;
            font-size: 1rem;
            outline: none;
        }

        .search-button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 0 25px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .search-button:hover {
            background: var(--color-secondary);
        }

        /* === Voice Controls === */
        .voice-controls {
            margin: 20px 0;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255,64,129,0.05), rgba(46,125,50,0.05));
            border-radius: 10px;
            border-left: 4px solid var(--color-primary);
        }

        .voice-controls h3 {
            margin-bottom: 15px;
            color: var(--color-primary);
            font-size: 1.2rem;
        }

        .voice-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }

        .voice-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .voice-btn:hover {
            background: var(--color-secondary);
            transform: translateY(-2px);
        }

        .voice-btn.active {
            background: var(--color-secondary);
            box-shadow: 0 0 0 2px white, 0 0 0 4px var(--color-secondary);
        }

        .voice-options {
            display: flex;
            gap: 15px;
            margin-left: 15px;
        }

        .voice-option {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .voice-option input {
            margin: 0;
        }

        /* === Main Content === */
        main {
            padding-top: 30px; /* Gi·∫£m kho·∫£ng c√°ch v·ªõi header */
            padding-bottom: 60px;
            min-height: calc(100vh - 200px); /* ƒê·∫£m b·∫£o footer lu√¥n ·ªü d∆∞·ªõi c√πng */
        }

        /* === Content Styles === */
        .content-section {
            margin: 30px 0;
            padding: 25px;
            background: #fff;
            border-radius: 10px;
            box-shadow: var(--box-shadow);
            text-align: justify;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .content-section p {
            margin-bottom: 15px;
            text-align: justify;
            line-height: 1.7;
        }

        .highlight-box {
            background-color: #f4f8f1; 
            border-left: 5px solid #ffc107;
            color: #856404;
            padding: 20px;
            margin: 30px auto;
            max-width: 100%;
            border-radius: 4px;
            text-align: center;
            font-family: Arial, sans-serif;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: justify;
        }

        .highlight-box p {
            text-align: justify;
            margin-bottom: 15px;
        }

        .author-info {
            background: linear-gradient(135deg, rgba(255,64,129,0.05), rgba(46,125,50,0.05));
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 4px solid var(--color-primary);
            text-align: justify;
        }

        /* === Footer === */
        footer {
            background: var(--color-dark);
            color: white;
            padding: 60px 0 20px;
            background: linear-gradient(135deg, var(--color-dark) 0%, var(--color-secondary) 100%);
        }
       
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 35px;
        }
       
        .footer-column h3 {
            color: var(--color-accent);
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            font-size: 1.4rem;
        }
       
        .footer-column h3::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 3px;
            background: var(--color-accent);
            bottom: 0;
            left: 0;
        }
       
        .footer-column p {
            margin-bottom: 15px;
            font-size: 1rem;
            text-align: left;
        }
       
        .contact-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
       
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
       
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 42px;
            height: 42px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transition: var(--transition);
            font-size: 1.1rem;
        }
       
        .social-links a:hover {
            background: var(--color-accent);
            color: var(--color-dark);
            transform: translateY(-3px);
        }
       
        .copyright {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 0.95rem;
        }

        /* === Experience Journey Button === */
        .experience-btn {
            display: inline-block;
            margin: 30px auto;
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--color-primary) 0%, #ff1493 100%);
            color: white;
            border-radius: 50px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 20px rgba(255, 20, 147, 0.3);
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1rem;
        }

        .experience-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 20, 147, 0.4);
            background: linear-gradient(135deg, #ff1493 0%, var(--color-primary) 100%);
        }

        /* === Mobile Navigation === */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--color-primary);
            cursor: pointer;
            padding: 10px;
            z-index: 1001;
            position: relative;
        }

        /* === Responsive === */
        @media (max-width: 992px) {
            .nav-links {
                gap: 15px;
            }
        }
       
        @media (max-width: 768px) {
            .header-container {
                flex-direction: row;
                align-items: center;
                padding: 10px 0;
                position: relative;
            }
           
            .logo img {
                height: 60px;
            }
           
            .logo-main {
                font-size: 1.6rem;
            }
           
            .logo-sub {
                font-size: 0.9rem;
            }

            /* Mobile menu styles - FIXED */
            .mobile-menu-btn {
                display: block;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 80%;
                max-width: 300px;
                height: 100vh;
                background: white;
                flex-direction: column;
                align-items: flex-start;
                padding: 80px 30px 30px;
                box-shadow: -5px 0 15px rgba(0,0,0,0.1);
                transition: right 0.3s ease;
                z-index: 1000;
                gap: 20px;
            }

            .nav-links.active {
                right: 0;
            }

            .nav-links a {
                font-size: 1.1rem;
                padding: 10px 0;
                width: 100%;
                border-bottom: 1px solid rgba(0,0,0,0.05);
            }

            .nav-links a::after {
                display: none;
            }

            main {
                padding-top: 20px;
            }

            .experience-btn {
                padding: 12px 25px;
                font-size: 0.9rem;
            }

            .content-section {
                padding: 20px;
                margin: 20px 0;
            }

            .highlight-box {
                padding: 15px;
                margin: 20px 0;
            }

            .voice-buttons {
                flex-direction: column;
                align-items: flex-start;
            }

            .voice-options {
                margin-left: 0;
                margin-top: 10px;
            }

            .search-form {
                flex-direction: column;
                border-radius: 10px;
            }

            .search-input {
                border-radius: 10px 10px 0 0;
            }

            .search-button {
                border-radius: 0 0 10px 10px;
                padding: 12px;
            }
        }
       
        @media (max-width: 480px) {
            .logo {
                flex-direction: row;
                align-items: center;
                gap: 8px;
            }

            .logo img {
                height: 50px;
            }
           
            .logo-main {
                font-size: 1.4rem;
            }

            .logo-sub {
                font-size: 0.8rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .experience-btn {
                padding: 10px 20px;
                font-size: 0.85rem;
                margin: 20px auto;
            }

            .content-section {
                padding: 15px;
            }
        }

        /* Overlay for mobile menu - FIXED */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Social Media Icons in One Row */
        .social-links-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
            justify-content: flex-start;
        }

        .social-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            color: white !important;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 16px;
            flex-shrink: 0;
        }

        .social-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Brand colors for each platform */
        .social-icon.facebook {
            background-color: #3b5998;
        }

        .social-icon.facebook-personal {
            background-color: #1877f2;
        }

        .social-icon.twitter {
            background-color: #1da1f2;
        }

        .social-icon.instagram {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        }

        .social-icon.tiktok {
            background-color: #000000;
        }

        .social-icon.linkedin {
            background-color: #0077b5;
        }

        .social-icon.whatsapp {
            background-color: #25D366;
        }

        .social-icon.zalo {
            background-color: #0068FF;
            padding: 5px;
        }

        .social-icon.youtube {
            background-color: #FF0000;
        }

        .social-icon.messenger {
            background: linear-gradient(135deg, #0084FF 0%, #00C6FF 100%);
        }

        .zalo-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            object-fit: cover;
        }

        .footer-title-link {
            color: inherit;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-title-link:hover {
            color: #e91e63;
        }

        .community-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #e91e63;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .community-btn:hover {
            background-color: #90EE90;
            color: #333;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Adjustments for very small screens */
        @media (max-width: 360px) {
            .social-links-grid {
                gap: 5px;
            }
            
            .social-icon {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .zalo-icon {
                width: 16px;
                height: 16px;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>    
        <div class="container header-container">
            <div class="logo">
                <img src="assets/images/ruby-wings-logo.png" alt="Ruby Wings Logo" height="70">
                <div class="logo-text">
                    <div class="logo-main">RUBY WINGS</div>
                    <div class="logo-sub">Travel - H√†nh tr√¨nh tr·∫£i nghi·ªám</div>
                </div>
            </div>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <nav class="nav-links" id="navLinks">
                <a href="index.html">Trang ch·ªß</a>
                <a href="tuyen-ngon-sang-lap-ruby-wings.html">V·ªÅ Ruby Wings ch√∫ng t√¥i</a>
                <a href="ve-dep-quang-tri.html">Mi·ªÅn Trung ru·ªôt th·ªãt</a>
                <a href="nhung-hanh-trinh-tieu-bieu.html">H√†nh tr√¨nh ti√™u bi·ªÉu</a>
                <a href="ve-dep-thien-nhien-viet-nam.html">Non n∆∞·ªõc- Vi·ªát Nam</a>
                <a href="thien-va-suc-khoe.html">Retreat- Ch·ªØa l√†nh</a>
            </nav>
        </div>
    </header>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <form action="https://www.google.com/search" method="GET" class="search-form" target="_blank">
                <input type="hidden" name="sitesearch" value="rubywings.vn">
                <input type="text" name="q" placeholder="T√¨m ki·∫øm th√¥ng tin tr√™n Ruby Wings..." class="search-input" required>
                <button type="submit" class="search-button">
                    <i class="fas fa-search"></i> T√¨m ki·∫øm
                </button>
            </form>
        </div>
    </section>

    <div class="overlay" id="overlay"></div>

    <!-- Main Content -->
    <main class="container">
        <!-- N√∫t d·∫´n ƒë·∫øn trang H√†nh tr√¨nh tr·∫£i nghi·ªám c·∫£m x√∫c -->
        <div style="text-align: center; margin: 30px 0;">
            <a href="Hanh-trinh-trai-nghiem-cam-xuc-2.html" class="experience-btn">
                <i class="fas fa-heart"></i> KH√ÅM PH√Å H√ÄNH TR√åNH TR·∫¢I NGHI·ªÜM  
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        
        <!-- Voice Controls -->
        <div class="voice-controls">
            <h3><i class="fas fa-volume-up"></i> Nghe b√†i vi·∫øt</h3>
            <div class="voice-buttons">
                <button id="playBtn" class="voice-btn">
                    <i class="fas fa-play"></i> B·∫Øt ƒë·∫ßu ƒë·ªçc
                </button>
                <button id="pauseBtn" class="voice-btn">
                    <i class="fas fa-pause"></i> T·∫°m d·ª´ng
                </button>
                <button id="stopBtn" class="voice-btn">
                    <i class="fas fa-stop"></i> D·ª´ng ƒë·ªçc
                </button>
                <div class="voice-options">
                    <label class="voice-option">
                        <input type="radio" name="voice" value="male" checked>
                        <i class="fas fa-male"></i> Gi·ªçng nam
                    </label>
                    <label class="voice-option">
                        <input type="radio" name="voice" value="female">
                        <i class="fas fa-female"></i> Gi·ªçng n·ªØ
                    </label>
                </div>
            </div>
        </div>
    
        <div class="highlight-box">
            <p style="font-size: 24px; font-weight: bold; margin-bottom: 10px; text-align: center;">
                 Con ƒë∆∞·ªùng tho√°t kh·ªèi t·ªïn th∆∞∆°ng: H√†nh tr√¨nh t√¨m v·ªÅ b√™n trong
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                Trong cu·ªôc s·ªëng hi·ªán ƒë·∫°i b·∫≠n r·ªôn, ch√∫ng ta th∆∞·ªùng th·∫•y m√¨nh b·ªã cu·ªën v√†o cu·ªôc truy c·∫ßu h·∫°nh ph√∫c v√† b√¨nh y√™n kh√¥ng ng·ª´ng ngh·ªâ, th∆∞·ªùng t√¨m ki·∫øm ch√∫ng trong nh·ªØng th√†nh t·ª±u b√™n ngo√†i, c√°c m·ªëi quan h·ªá, ho·∫∑c c·ªßa c·∫£i v·∫≠t ch·∫•t. Tuy nhi√™n, nh∆∞ l·ªùi d·∫°y c·ªßa c√°c truy·ªÅn th·ªëng tr√≠ tu·ªá c·ªï x∆∞a, v√† nh∆∞ nhi·ªÅu chuy√™n gia s·ª©c kh·ªèe t√¢m th·∫ßn kh·∫≥ng ƒë·ªãnh, g·ªëc r·ªÖ c·ªßa ƒëau kh·ªï th∆∞·ªùng kh√¥ng n·∫±m ·ªü th·∫ø gi·ªõi b√™n ngo√†i, m√† n·∫±m s√¢u b√™n trong m·ªói ch√∫ng ta.. Khi c∆°n ƒëau ·∫≠p ƒë·∫øn, n√≥ c√≥ th·ªÉ khi·∫øn ch√∫ng ta c·∫£m th·∫•y cho√°ng ng·ª£p, ƒë√® b·∫πp tinh th·∫ßn v√† khi·∫øn ch√∫ng ta kh√≥ tin r·∫±ng s·ª± gi·∫£i tho√°t l√† c√≥ th·ªÉ (c∆°n ƒëau tinh th·∫ßn s·∫Ω d·∫´n ƒë·∫øn c∆°n ƒëau th·ªÉ x√°c ‚Äì khoa h·ªçc ƒë√£ ch·ª©ng minh r√µ ƒëi·ªÅu n√†y). Tuy nhi√™n, gi·ªëng nh∆∞ m·ªôt nh√† tr·ªã li·ªáu l√†nh ngh·ªÅ h∆∞·ªõng d·∫´n b·ªánh nh√¢n c·ªßa h·ªç, ch√∫ng ta c≈©ng c√≥ th·ªÉ nu√¥i d∆∞·ª°ng ni·ªÅm tin s√¢u s·∫Øc r·∫±ng m·ªçi ƒëau kh·ªï ƒë·ªÅu c√≥ th·ªÉ v∆∞·ª£t qua..
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                ·∫¢o t∆∞·ªüng v·ªÅ c√°c gi·∫£i ph√°p b√™n ngo√†i: C√¢u chuy·ªán c·ªßa Rabia
                M·ªôt c√¢u chuy·ªán ƒë·∫ßy s·ª©c m·∫°nh, th∆∞·ªùng ƒë∆∞·ª£c k·ªÉ l·∫°i, minh h·ªça ho√†n h·∫£o cho ƒëi·ªÉm n√†y. Ng√†y x∆∞a, c√≥ m·ªôt ng∆∞·ªùi ph·ª• n·ªØ t√™n Rabia ƒëang t√¨m c√¢y kim b·ªã m·∫•t c·ªßa m√¨nh tr√™n m·ªôt con ph·ªë t·ªëi. Khi ƒë∆∞·ª£c h·ªèi t·∫°i sao c√¥ l·∫°i t√¨m ki·∫øm ·ªü ƒë√≥ khi m√† c√¢y kim r∆°i trong l·ªÅu c·ªßa c√¥, c√¥ tr·∫£ l·ªùi, "V√¨ c√≥ ch√∫t √°nh s√°ng ·ªü ngo√†i n√†y, c√≤n b√™n trong l·ªÅu th√¨ t·ªëi om‚Äô‚Äô. M·ªçi ng∆∞·ªùi nghƒ© c√¥ ·∫•y b·ªã ƒëi√™n. Rabia sau ƒë√≥ gi·∫£i th√≠ch √Ω ƒë·ªãnh th·ª±c s·ª± c·ªßa m√¨nh: "Kim r∆°i v√†o l·ªÅu. T√¥i ra ngo√†i t√¨m ki·∫øm v√¨ t√¥i want to h·ªèi anh: Anh ƒë√£ ƒë√°nh m·∫•t s·ª± b√¨nh y√™n c·ªßa m√¨nh ·ªü ƒë√¢u m√† c·ª© m√£i t√¨m ki·∫øm n√≥ ·ªü b√™n ngo√†i? ".
                C√¢u chuy·ªán n√†y c√≥ s·ª©c ·∫£nh h∆∞·ªüng s√¢u s·∫Øc b·ªüi v√¨, gi·ªëng nh∆∞ cu·ªôc t√¨m ki·∫øm sai l·∫ßm c·ªßa Rabia, ch√∫ng ta th∆∞·ªùng tuy·ªát v·ªçng t√¨m ki·∫øm gi·∫£i ph√°p cho s·ª± h·ªón lo·∫°n b√™n trong c·ªßa m√¨nh b·∫±ng c√°ch ƒë·ªï l·ªói cho ng∆∞·ªùi kh√°c ho·∫∑c hy v·ªçng v√†o nh·ªØng thay ƒë·ªïi b√™n ngo√†i.. Ch√∫ng ta tr√¥ng c·∫≠y v√†o cha m·∫π, con c√°i, b·∫°n ƒë·ªùi, ƒë·ªìng nghi·ªáp ho·∫∑c x√£ h·ªôi ƒë·ªÉ gi·∫£i quy·∫øt n·ªói b·∫•t h·∫°nh c·ªßa m√¨nh, hi·∫øm khi k·∫øt n·ªëi v·ªõi b·∫£n th√¢n b√™n trong.. Tuy nhi√™n, n·∫øu "kim ch·ªâ nam" c·ªßa ƒëau kh·ªï n·∫±m ·ªü b√™n trong, l√†m sao ch√∫ng ta c√≥ th·ªÉ hy v·ªçng t√¨m th·∫•y n√≥ b·∫±ng c√°ch t√¨m ki·∫øm ·ªü n∆°i kh√°c?
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                Ngu·ªìn g·ªëc c·ªßa ƒëau kh·ªï: "B·∫£n ng√£ gi·∫£ t·∫°o"
                M·ªôt hi·ªÉu bi·∫øt s√¢u s·∫Øc t·ª´ gi√°o l√Ω Ph·∫≠t gi√°o l√† ph·∫ßn l·ªõn ch·∫•n th∆∞∆°ng t√¢m l√Ω v√† ƒëau kh·ªï c·ªßa ch√∫ng ta x·∫£y ra tr√™n c√°i m√† ng∆∞·ªùi ta g·ªçi l√† "b·∫£n ng√£ m√¥ ph·ªèng".. "C√°i t√¥i gi·∫£ t·∫°o" n√†y ƒë∆∞·ª£c x√¢y d·ª±ng t·ªâ m·ªâ t·ª´ th·ªùi th∆° ·∫•u, ƒë∆∞·ª£c h√¨nh th√†nh b·ªüi quan ƒëi·ªÉm x√£ h·ªôi, k·ª≥ v·ªçng c·ªßa gia ƒë√¨nh, kinh nghi·ªám gi√°o d·ª•c v√† t·∫•t c·∫£ c√°c t∆∞∆°ng t√°c m√† ch√∫ng ta c√≥ trong cu·ªôc s·ªëng.. ƒê√≥ l√† b·∫£n s·∫Øc m√† ch√∫ng ta g·∫Øn li·ªÅn v·ªõi tr√≠ th√¥ng minh, th√†nh c√¥ng, th·∫•t b·∫°i v√† v·ªã tr√≠ c·ªßa m√¨nh trong x√£ h·ªôi..
                Tuy nhi√™n, ƒê·ª©c Ph·∫≠t, m·ªôt b·∫≠c gi√°c ng·ªô, ƒë√£ th·∫•y r√µ r·∫±ng "ƒë√≥ kh√¥ng ph·∫£i l√† b·∫°n". "B·∫£n ng√£ m√¥ ph·ªèng" n√†y th∆∞·ªùng kh√° kh√°c bi·ªát so v·ªõi b·∫£n ch·∫•t th·ª±c s·ª±, thu·∫ßn khi·∫øt c·ªßa ch√∫ng ta xu·∫•t hi·ªán khi ch√∫ng ta tr·ªü v·ªÅ "v·ªã tr√≠ trung t√¢m" b√™n trong. Khi ch√∫ng ta ho·∫°t ƒë·ªông t·ª´ b·∫£n ng√£ gi·∫£ t·∫°o n√†y, ch√∫ng ta li√™n t·ª•c "bi·ªÉu di·ªÖn, ƒë·ªëi ph√≥, ch·ªù ƒë·ª£i, hy v·ªçng, b√¨nh lu·∫≠n, ph√°n x√©t" - nh·ªØng ho·∫°t ƒë·ªông v√¥ t√¨nh nu√¥i d∆∞·ª°ng v√† c·ªßng c·ªë n√≥. ƒêau kh·ªï th·ª±c s·ª± ch·ªâ c√≥ ch·ªó ƒë·ª©ng khi ch√∫ng ta ƒë·ªìng nh·∫•t v·ªõi b·∫£n ng√£ gi·∫£ t·∫°o n√†y.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                Con ƒë∆∞·ªùng h∆∞·ªõng n·ªôi: Tr·ªü v·ªÅ v·ªõi b·∫£n ng√£ ƒë√≠ch th·ª±c c·ªßa b·∫°n th√¥ng qua thi·ªÅn ƒë·ªãnh
                "L·ªëi ra n·∫±m trong". ƒê·ªÉ v∆∞·ª£t qua ƒëau kh·ªï, ch√∫ng ta ph·∫£i "tr·ªü v·ªÅ v·ªõi ch√≠nh m√¨nh". ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† t√¨m th·∫•y "v·ªã tr√≠ trung t√¢m" c·ªßa ch√∫ng ta - tr·∫°ng th√°i t√°ch bi·ªát kh·ªèi t√≠nh hai m·∫∑t c·ªßa cu·ªôc s·ªëng: th√†nh c√¥ng v√† th·∫•t b·∫°i, khen ng·ª£i v√† khi·ªÉn tr√°ch, y√™u v√† gh√©t. ·ªû v·ªã tr√≠ trung t√¢m n√†y, m·ªçi th·ª© ƒë·ªÅu ƒë∆°n gi·∫£n l√† "b√¨nh th∆∞·ªùng", ƒë∆∞·ª£c xem x√©t m√† kh√¥ng c√≥ s·ª± thi√™n v·ªã hay ƒë·ªãnh ki·∫øn.
                H√†nh tr√¨nh h∆∞·ªõng n·ªôi n√†y kh√¥ng h·ªÅ d·ªÖ d√†ng; x√£ h·ªôi hi·∫øm khi d·∫°y ch√∫ng ta hi·ªÉu th·∫ø gi·ªõi n·ªôi t√¢m ho·∫∑c c·∫£m x√∫c c·ªßa m√¨nh. Tuy nhi√™n, vi·ªác tr·ªü v·ªÅ v·ªõi ch√≠nh m√¨nh l√† m·ªôt b·∫£n nƒÉng m·∫°nh m·∫Ω, t·ª± nhi√™n. Khi nh·ªØng c·∫£m x√∫c ti√™u c·ª±c ho·∫∑c ƒëau kh·ªï xu·∫•t hi·ªán, b∆∞·ªõc quan tr·ªçng nh·∫•t l√† ngay l·∫≠p t·ª©c quay tr·ªü l·∫°i v·ªõi b·∫£n th√¢n b√™n trong c·ªßa b·∫°n. Ngay c·∫£ v·ªõi nh·ªØng ng∆∞·ªùi th·ª±c h√†nh c√≥ kinh nghi·ªám, ƒë√¥i khi ƒëau kh·ªï c≈©ng xu·∫•t hi·ªán, nh·∫Øc nh·ªü ch√∫ng ta v·ªÅ s·ª± m·∫•t c√¢n b·∫±ng c·ªßa m√¨nh. Th·ª±c t·∫ø, ƒë√¥i khi ƒëau kh·ªï l√† m·ªôt "c√∫ ƒë√° t·ª´ tr√™n tr·ªùi" bu·ªôc ch√∫ng ta ph·∫£i ƒë·ªëi m·∫∑t v·ªõi th·∫ø gi·ªõi n·ªôi t√¢m c·ªßa m√¨nh v√† kh√°m ph√° ra m·ªôt s·ª± th·∫≠t s√¢u s·∫Øc h∆°n.
                Thi·ªÅn l√† c√¥ng c·ª• m·∫°nh m·∫Ω cho cu·ªôc h√†nh tr√¨nh n·ªôi t√¢m n√†y. ƒê√≥ l√† con ƒë∆∞·ªùng nu√¥i d∆∞·ª°ng nh·∫≠n th·ª©c v√† ph√°t tri·ªÉn tr√≠ tu·ªá. Th√¥ng qua thi·ªÅn ƒë·ªãnh, ch√∫ng ta h·ªçc c√°ch:
                - An Tr√∫: ƒê√¢y l√† n·ªÅn t·∫£ng ‚Äì h·ªçc c√°ch b√°m r·ªÖ v√†o kho·∫£nh kh·∫Øc hi·ªán t·∫°i, ch·∫•p nh·∫≠n n√≥ ho√†n to√†n, tho√°t kh·ªèi s·ª± l√¥i k√©o c·ªßa nh·ªØng h·ªëi ti·∫øc trong qu√° kh·ª© hay lo l·∫Øng trong t∆∞∆°ng lai.
                - Quan s√°t t·ª± nhi√™n: T·∫≠p trung v√†o b·∫•t k·ª≥ ƒë·ªëi t∆∞·ª£ng n√†o ·ªü hi·ªán t·∫°i, ƒë·∫∑c bi·ªát l√† b√™n trong b·∫°n, nh∆∞ h∆°i th·ªü ho·∫∑c c·∫£m gi√°c c∆° th·ªÉ. "Th√°i ƒë·ªô quan s√°t" l√† ch√¨a kh√≥a.
                - Ch√°nh ni·ªám: ƒê√¢y l√† c·ªët l√µi c·ªßa s·ª± th·ª±c h√†nh. Ch√°nh ni·ªám l√† "s·ª± quan s√°t thu·∫ßn t√∫y" ‚Äì nh√¨n b·∫±ng "con m·∫Øt n·ªôi t√¢m", t√°ch r·ªùi kh·ªèi nh·ªØng th√†nh ki·∫øn v√† ƒë·ªãnh ki·∫øn c·ªßa "c√°i t√¥i gi·∫£ t·∫°o"..  ƒê√≥ ch·ªâ ƒë∆°n gi·∫£n l√† bi·∫øt nh·ªØng g√¨ ƒëang x·∫£y ra, kh√¥ng ph√°n x√©t hay v∆∞·ªõng m·∫Øc. Nh·∫≠n th·ª©c thu·∫ßn khi·∫øt n√†y ph√°t tri·ªÉn s·ª©c m·∫°nh b√™n trong v√† d·∫´n ƒë·∫øn tr√≠ tu·ªá.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                B·∫£n ch·∫•t kh√¥ng th·ª±c c·ªßa ƒëau kh·ªï
                M·ªôt s·ª± th·∫≠t s√¢u s·∫Øc ƒë∆∞·ª£c nh·∫≠n ra th√¥ng qua th·ª±c h√†nh thi·ªÅn ƒë·ªãnh s√¢u s·∫Øc l√† ƒëau kh·ªï v·ªÅ c∆° b·∫£n l√† "kh√¥ng c√≥ th·∫≠t".. Theo quan ƒëi·ªÉm c·ªßa nh·∫≠n th·ª©c gi√°c ng·ªô, ngay c·∫£ nh·ªØng nguy√™n nh√¢n g·ªëc r·ªÖ c·ªßa ƒëau kh·ªï nh∆∞ v√¥ minh, tham lam, h·∫≠n th√π v√† ·∫£o t∆∞·ªüng c≈©ng ƒë∆∞·ª£c coi l√† "tr·ªëng r·ªóng" ho·∫∑c kh√¥ng c√≥ s·ª± t·ªìn t·∫°i c·ªë h·ªØu.. Ch√∫ng ch·ªâ c√≥ s·ª©c m·∫°nh khi ch√∫ng ta b·ªã ph√¢n t√¢m, m·∫•t k·∫øt n·ªëi v·ªõi b·∫£n ng√£ ƒë√≠ch th·ª±c c·ªßa m√¨nh v√† b·ªã v∆∞·ªõng v√†o "b·∫£n ng√£ gi·∫£ t·∫°o"‚Ä¶ Khi ch√∫ng ta ƒë√°nh th·ª©c ch√°nh ni·ªám v√† nh·∫≠n th·ª©c b√™n trong, nh·ªØng ·∫£o t∆∞·ªüng n√†y b·∫Øt ƒë·∫ßu tan bi·∫øn.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                C√°c b∆∞·ªõc th·ª±c t·∫ø cho s·ª± chuy·ªÉn ƒë·ªïi b√™n trong
                B·∫°n kh√¥ng c·∫ßn ph·∫£i l√† m·ªôt ng∆∞·ªùi th·ª±c h√†nh chuy√™n s√¢u ƒë·ªÉ b·∫Øt ƒë·∫ßu. H√£y b·∫Øt ƒë·∫ßu b·∫±ng c√°ch hi·ªÉu r·∫±ng m·ª•c ti√™u kh√¥ng ph·∫£i l√† ki·ªÉm soat th·∫ø gi·ªõi n·ªôi t√¢m c·ªßa b·∫°n, m√† l√† quan s√°t n√≥ m·ªôt c√°ch t·ª± nhi√™n.
                - ƒê·ª´ng "luy·ªán t·∫≠p" khi cƒÉng th·∫≥ng: Khi thi·ªÅn, h√£y ti·∫øp c·∫≠n n√≥ nh∆∞ th·ªÉ b·∫°n ch·ªâ ƒëang "ch∆°i ƒë√πa" v·ªõi ch√≠nh m√¨nh, kh√¥ng c·ªë g·∫Øng ƒë·∫°t ƒë∆∞·ª£c ƒëi·ªÅu g√¨ ƒë√≥ ho·∫∑c ki·ªÉm so√°t h∆°i th·ªü c·ªßa b·∫°n m·ªôt c√°ch c·ª©ng nh·∫Øc. C·ªë g·∫Øng √©p h∆°i th·ªü th∆∞·ªùng d·∫´n ƒë·∫øn cƒÉng th·∫≥ng h∆°n. Thay v√†o ƒë√≥, h√£y ch·ªâ quan s√°t h∆°i th·ªü, ƒë·ªÉ n√≥ di·ªÖn ra t·ª± nhi√™n..
                - Quan s√°t m√† kh√¥ng ph√°n x√©t: N·∫øu t√¢m tr√≠ b·∫°n lang thang ho·∫∑c bu·ªìn ng·ªß, ch·ªâ c·∫ßn th·ª´a nh·∫≠n ƒëi·ªÅu ƒë√≥ b·∫±ng m·ªôt n·ª• c∆∞·ªùi nh·∫π nh√†ng v√† quay tr·ªü l·∫°i v·ªõi tr·ªçng t√¢m ƒë√£ ch·ªçn (v√≠ d·ª•: h∆°i th·ªü, √¢m thanh xung quanh b·∫°n). H√†nh ƒë·ªông bi·∫øt r·∫±ng b·∫°n ƒë√£ lang thang ƒë√£ l√† m·ªôt s·ª± tr·ªü v·ªÅ hi·ªán t·∫°i.
                - T√¨m ki·∫øm s·ª± thay ƒë·ªïi b√™n trong: "K·∫øt qu·∫£" th·ª±c s·ª± c·ªßa thi·ªÅn ƒë·ªãnh kh√¥ng ph·∫£i l√† th·ªùi gian b·∫°n ng·ªìi, m√† l√† s·ª± chuy·ªÉn ƒë·ªïi b√™n trong v√† nh·ªØng thay ƒë·ªïi t√≠ch c·ª±c. ƒêi·ªÅu n√†y c√≥ th·ªÉ chuy·ªÉn t·ª´ v·ªôi v√£ sang b√¨nh tƒ©nh, t·ª´ cƒÉng th·∫≥ng sang th∆∞ gi√£n, ho·∫∑c t·ª´ vi·ªác ho√†n to√†n ch√¨m ƒë·∫Øm trong suy nghƒ© sang vi·ªác tho√°ng th·∫•y h∆°i th·ªü ho·∫∑c tr·∫°ng th√°i b√™n trong c·ªßa b·∫°n v√†i l·∫ßn m·ªôt ng√†y.. M·ªói s·ª± thay ƒë·ªïi nh·ªè t·ª´ tr·∫°ng th√°i ti√™u c·ª±c tr·ªü l·∫°i tr·∫°ng th√°i t√≠ch c·ª±c, trong s√°ng ho·∫∑c y√™n b√¨nh h∆°n ƒë·ªÅu l√† m·ªôt k·∫øt qu·∫£ m·∫°nh m·∫Ω..
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                B·∫±ng c√°ch li√™n t·ª•c h∆∞·ªõng n·ªôi, ch√∫ng ta ng·ª´ng ƒë·ªìng nh·∫•t v·ªõi "c√°i t√¥i gi·∫£ t·∫°o" v√† k·∫øt n·ªëi v·ªõi s·ª± trong s√°ng, tr√≠ tu·ªá, l√≤ng tr·∫Øc ·∫©n v√† s·ª± b√¨nh y√™n v·ªën c√≥ b√™n trong ch√∫ng ta.. ƒê√¢y kh√¥ng ph·∫£i l√† m·ªôt l·ªëi tho√°t kh·ªèi cu·ªôc s·ªëng, m√† l√† m·ªôt h√†nh tr√¨nh s·ªëng ch√¢n th·ª±c h∆°n, s√¢u s·∫Øc h∆°n v√† c√≥ gi√° tr·ªã l√¢u d√†i h∆°n, nh·∫≠n ra r·∫±ng vi·ªác x√¢y d·ª±ng th·∫ø gi·ªõi n·ªôi t√¢m l√† n·ªÅn t·∫£ng v·ªØng ch·∫Øc nh·∫•t cho b·∫£n th√¢n ch√∫ng ta v√† ƒë·ªÉ truy·ªÅn c·∫£m h·ª©ng k·∫øt n·ªëi th·ª±c s·ª± v·ªõi ng∆∞·ªùi kh√°c.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                Cu·ªôc h√†nh tr√¨nh vƒ© ƒë·∫°i nh·∫•t c·ªßa ƒë·ªùi ng∆∞·ªùi kh√¥ng ph·∫£i l√† kh√°m ph√° m·ªôt v√πng ƒë·∫•t xa x√¥i, chinh ph·ª•c m·ªôt ƒë·ªânh n√∫i cao, hay ƒë·∫°t ƒë∆∞·ª£c m·ªôt th√†nh t·ª±u ngo·∫°i h·∫°ng, m√† l√† d≈©ng c·∫£m quay v·ªÅ kh√°m ph√° th·∫ø gi·ªõi n·ªôi t√¢m c·ªßa ch√≠nh m√¨nh. Sau khi nh√¨n nh·∫≠n s√¢u s·∫Øc v·ªÅ ngu·ªìn g·ªëc c·ªßa ƒëau kh·ªï v√† s·ª©c m·∫°nh ch·ªØa l√†nh c·ªßa ch√°nh ni·ªám, thi·ªÅn ƒë·ªãnh, ch√∫ng ta c√≥ th·ªÉ th·∫•y r√µ con ƒë∆∞·ªùng ph√≠a tr∆∞·ªõc. N√≥ kh√¥ng ph·∫£i l√† m·ªôt l·ªëi tho√°t kh·ªèi cu·ªôc s·ªëng hay s·ª± ch·ªëi b·ªè th·∫ø gi·ªõi b√™n ngo√†i, m√† l√† m·ªôt h√†nh tr√¨nh t√°i k·∫øt n·ªëi s√¢u s·∫Øc v·ªõi b·∫£n ng√£ ƒë√≠ch th·ª±c c·ªßa ch√∫ng ta - m·ªôt b·∫£n ng√£ v·ªën ƒë√£ trong s√°ng, m·∫°nh m·∫Ω v√† tr√†n ƒë·∫ßy b√¨nh y√™n.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                C√≥ l·∫Ω b·∫°n ƒëang t·ª± h·ªèi, "Li·ªáu m√¨nh c√≥ th·ªÉ l√†m ƒë∆∞·ª£c kh√¥ng?". Tin t√¥i ƒëi, c√¢u tr·∫£ l·ªùi l√† c√≥. B·∫°n kh√¥ng c·∫ßn ph·∫£i ng·ªìi thi·ªÅn h√†ng gi·ªù m·ªói ng√†y ƒë·ªÉ b·∫Øt ƒë·∫ßu. Con ƒë∆∞·ªùng n√†y n·∫±m ·ªü nh·ªØng kho·∫£nh kh·∫Øc nh·ªè nh·∫•t trong cu·ªôc s·ªëng h√†ng ng√†y c·ªßa b·∫°n. ƒê√≥ l√† gi√¢y ph√∫t b·∫°n nh·∫≠n ra m√¨nh ƒëang cƒÉng th·∫≥ng v√† quy·∫øt ƒë·ªãnh h√≠t m·ªôt h∆°i th·∫≠t s√¢u. ƒê√≥ l√† l√∫c b·∫°n nh·∫≠n bi·∫øt d√≤ng suy nghƒ© mi√™n man trong ƒë·∫ßu nh∆∞ng kh√¥ng ph√°n x√©t, m√† ch·ªâ quan s√°t n√≥ m·ªôt c√°ch nh·∫π nh√†ng... M·ªói kho·∫£nh kh·∫Øc nh∆∞ th·∫ø l√† m·ªôt b∆∞·ªõc ƒëi m·∫°nh m·∫Ω tr√™n h√†nh tr√¨nh quay v·ªÅ v·ªõi ch√≠nh m√¨nh.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                Th·ª±c h√†nh ch√°nh ni·ªám kh√¥ng ph·∫£i l√† c·ªë g·∫Øng ki·ªÉm so√°t t√¢m tr√≠ b·∫°n, m√† l√† h·ªçc c√°ch tr·ªü th√†nh m·ªôt ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh v·ªõi n√≥. H√£y xem thi·ªÅn ƒë·ªãnh nh∆∞ m·ªôt cu·ªôc ch∆°i ƒë·∫ßy kh√°m ph√°, n∆°i b·∫°n ch·ªâ ƒë∆°n gi·∫£n l√† quan s√°t h∆°i th·ªü, c·∫£m nh·∫≠n c∆° th·ªÉ, ho·∫∑c l·∫Øng nghe √¢m thanh xung quanh. Khi t√¢m tr√≠ b·∫°n lang thang, ƒë√≥ kh√¥ng ph·∫£i l√† m·ªôt th·∫•t b·∫°i. H√†nh ƒë·ªông nh·∫π nh√†ng nh·∫≠n bi·∫øt r·∫±ng n√≥ ƒë√£ ƒëi l·∫°c v√† ƒë∆∞a n√≥ quay tr·ªü l·∫°i ch√≠nh l√† kho·∫£nh kh·∫Øc b·∫°n x√¢y d·ª±ng s·ª©c m·∫°nh n·ªôi t√¢m. C·ª© nh∆∞ th·∫ø, t·ª´ng ch√∫t m·ªôt, b·∫°n s·∫Ω c·∫£m nh·∫≠n ƒë∆∞·ª£c s·ª± chuy·ªÉn h√≥a k·ª≥ di·ªáu. T·ª´ v·ªôi v√£, b·∫°n s·∫Ω t√¨m th·∫•y s·ª± ch·∫≠m r√£i. T·ª´ cƒÉng th·∫≥ng, b·∫°n s·∫Ω tr·ªü n√™n th∆∞ th√°i h∆°n. V√† t·ª´ s·ª± ch√¨m ƒë·∫Øm trong nh·ªØng lo √¢u, b·∫°n s·∫Ω b·∫Øt ƒë·∫ßu nh√¨n th·∫•y nh·ªØng kho·∫£ng l·∫∑ng trong tr·∫ªo c·ªßa hi·ªán t·∫°i.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                V∆∞·ª£t qua ƒëau kh·ªï kh√¥ng c√≥ nghƒ©a l√† lo·∫°i b·ªè ho√†n to√†n c·∫£m gi√°c kh√≥ ch·ªãu. N√≥ c√≥ nghƒ©a l√† b·∫°n kh√¥ng c√≤n ƒë·ªìng nh·∫•t b·∫£n th√¢n v·ªõi ch√∫ng n·ªØa. Gi·ªëng nh∆∞ nh√¨n th·∫•y m·ªôt ƒë√°m m√¢y ƒëen ƒëi qua tr√™n b·∫ßu tr·ªùi xanh, b·∫°n bi·∫øt r·∫±ng nh·ªØng c·∫£m x√∫c ti√™u c·ª±c ch·ªâ l√† kh√°ch gh√© thƒÉm, ch√∫ng ƒë·∫øn r·ªìi s·∫Ω ƒëi. B·∫±ng c√°ch th·ª±c h√†nh ch√°nh ni·ªám, b·∫°n s·∫Ω d·∫ßn tho√°t kh·ªèi s·ª± k√¨m k·∫πp c·ªßa "c√°i t√¥i gi·∫£ t·∫°o" v√† nh·ªØng ·∫£o t∆∞·ªüng do n√≥ t·∫°o ra. B·∫°n s·∫Ω kh√°m ph√° ra r·∫±ng b·∫£n ch·∫•t th·ª±c s·ª± c·ªßa m√¨nh l√† m·ªôt kh√¥ng gian c·ªßa l√≤ng tr·∫Øc ·∫©n, tr√≠ tu·ªá v√† s·ª± b√¨nh y√™n v√¥ t·∫≠n, kh√¥ng b·ªã lay chuy·ªÉn b·ªüi b·∫•t k·ª≥ ƒëi·ªÅu g√¨ b√™n ngo√†i.
            </p>
            <p style="font-size: 18px; margin: 10px 0; line-height: 1.6;">
                V·∫≠y b·∫°n ƒë√£ s·∫µn s√†ng gieo h·∫°t m·∫ßm chuy·ªÉn h√≥a cho ch√≠nh m√¨nh ch∆∞a? H√£y tin t∆∞·ªüng v√†o s·ª©c m·∫°nh c·ªßa h√†nh tr√¨nh n·ªôi t√¢m n√†y. Tin r·∫±ng b·∫°n c√≥ th·ªÉ t√¨m th·∫•y con ƒë∆∞·ªùng tho√°t kh·ªèi nh·ªØng t·ªïn th∆∞∆°ng v√† s·ªëng m·ªôt cu·ªôc ƒë·ªùi ch√¢n th·ª±c, √Ω nghƒ©a h∆°n. Cu·ªôc h√†nh tr√¨nh n√†y kh√¥ng ch·ªâ mang l·∫°i l·ª£i √≠ch cho ri√™ng b·∫°n, m√† c√≤n t·∫°o ra m·ªôt n·ªÅn t·∫£ng v·ªØng ch·∫Øc ƒë·ªÉ b·∫°n k·∫øt n·ªëi ch√¢n th·∫≠t h∆°n v·ªõi nh·ªØng ng∆∞·ªùi xung quanh v√† lan t·ªèa s·ª± b√¨nh y√™n ƒë√≥ ra th·∫ø gi·ªõi. H√£y b·∫Øt ƒë·∫ßu ngay h√¥m nay, ch·ªâ v·ªõi m·ªôt h∆°i th·ªü‚Ä¶/.
            </p>
            <p style="font-size: 16px; margin: 20px 0 0; text-align: right; font-style: italic;">
                (LTS)
            </p>
        </div>

        <div class="author-info">
            <h3>V·ªÅ t√°c gi·∫£</h3>
            <p><strong>Ng∆∞·ªùi th√†nh l·∫≠p</strong>, - t·ª´ng tr·∫£i qua n·ªói ƒëau th·ªÉ x√°c v√† s·ª± b·∫ø t·∫Øc tinh th·∫ßn. H∆°n 10 nƒÉm tr∆∞·ªõc, b·ªã vi√™m kh·ªõp to√†n th√¢n - m·ªôt cƒÉn b·ªánh m√† ngay c·∫£ c√°c b·ªánh vi·ªán h√†ng ƒë·∫ßu mi·ªÅn Trung v√† H√† N·ªôi c≈©ng kh√¥ng th·ªÉ t√¨m ra nguy√™n nh√¢n v√† ph∆∞∆°ng ph√°p ch·ªØa tr·ªã d·ª©t ƒëi·ªÉm. V·ªõi k·∫øt qu·∫£ x√©t nghi·ªám "vi√™m kh√¥ng ƒë·∫∑c hi·ªáu" (kh√¥ng t√¨m ra nguy√™n nh√¢n), t√¥i bu·ªôc ph·∫£i s·ªëng chung v·ªõi thu·ªëc kh√°ng vi√™m tri·ªÅn mi√™n c·∫£ nƒÉm tr·ªùi...</p>
            <p>Nh∆∞ng t√¥i kh√¥ng ch·∫•p nh·∫≠n s·ªë ph·∫≠n. Thay v√¨ ti·∫øp t·ª•c t√¨m ki·∫øm gi·∫£i ph√°p b√™n ngo√†i, t√¥i quy·∫øt ƒë·ªãnh b·∫Øt ƒë·∫ßu m·ªôt h√†nh tr√¨nh kh√°c. T√¥i t√¨m ƒë·∫øn ƒê·∫°i v√µ s∆∞ ‚Äì V√µ y Tr·∫ßn ƒê√¨nh Nghƒ© ‚Äì m·ªôt ng∆∞·ªùi th·∫ßy ƒë√£ khai m·ªü cho t√¥i con ƒë∆∞·ªùng c·ªßa kh√≠ c√¥ng (v√† n√¢ng cao v·ªÅ v√µ thu·∫≠t). T·ª´ ƒë√≥, t√¥i b·∫Øt ƒë·∫ßu d·∫•n th√¢n s√¢u h∆°n v√†o vi·ªác ch·ªØa l√†nh t·ª´ b√™n trong, t·ª´ g·ªëc r·ªÖ...</p>
            <p>V·ªõi h∆°n 10 nƒÉm th·ª±c h√†nh v√† nghi·ªÅn ng·∫´m r·∫•t nhi·ªÅu t√†i li·ªáu v·ªÅ thi·ªÅn ƒë·ªãnh, nh·∫•t l√† v·ªÅ ch√°nh ni·ªám, t√¥i ƒë√£ t√¨m th·∫•y m·ªôt con ƒë∆∞·ªùng c·ªßa ri√™ng m√¨nh. Ch·ªâ trong ch∆∞a ƒë·∫ßy m·ªôt nƒÉm sau, kh√¥ng nh·ªØng b·ªánh vi√™m kh·ªõp bi·∫øn m·∫•t ho√†n to√†n, m√† c·∫£ t√¨nh tr·∫°ng tho√°i h√≥a kh·ªõp m√£n t√≠nh ƒë√£ ƒëeo b√°m t√¥i t·ª´ s·ªõm c≈©ng c∆° b·∫£n ƒë∆∞·ª£c ch·ªØa l√†nh...</p>
            <p>C√¢u chuy·ªán c·ªßa t√¥i kh√¥ng ph·∫£i l√† m·ªôt ph√©p m√†u, m√† l√† minh ch·ª©ng ch√¢n th·ª±c cho s·ª©c m·∫°nh ti·ªÅm ·∫©n c·ªßa ch√≠nh b·∫°n. T√¥i ·ªü ƒë√¢y ƒë·ªÉ chia s·∫ª con ƒë∆∞·ªùng ƒë√≥, gi√∫p b·∫°n c≈©ng c√≥ th·ªÉ t·ª± ch·ªØa l√†nh v√† s·ªëng m·ªôt cu·ªôc ƒë·ªùi tr·ªçn v·∫πn h∆°n‚Ä¶</p>
        </div>
    </main>
<style>
/* === RUBY WINGS CONSULTATION BUTTON - MOBILE GREEN VERSION === */
.rw-consult-btn-container {
    display: block !important;
    margin: 25px 0 !important;
    text-align: center !important;
    width: 100% !important;
}

.rw-consult-btn-main {
    /* Reset m·ªçi style m·∫∑c ƒë·ªãnh */
    all: unset !important;
    
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    text-decoration: none !important;
    
    /* K√≠ch th∆∞·ªõc v√† kho·∫£ng c√°ch */
    padding: 18px 35px !important;
    margin: 10px auto !important;
    
    /* Ki·ªÉu d√°ng */
    border-radius: 50px !important;
    border: 3px solid #2cec2c !important;
    font-weight: 800 !important;
    font-size: 18px !important;
    line-height: 1.3 !important;
    text-align: center !important;
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
    
    /* M√†u s·∫Øc - XANH L√Å C√ÇY + CH·ªÆ V√ÄNG */
    background: linear-gradient(135deg, #2cec2c 0%, #22cc22 100%) !important;
    color: #ffd700 !important;
    cursor: pointer !important;
    
    /* Hi·ªáu ·ª©ng */
    transition: all 0.4s ease !important;
    position: relative !important;
    overflow: hidden !important;
    box-shadow: 0 6px 20px rgba(44, 236, 44, 0.3) !important;
    
    /* Font ch·ªØ r√µ r√†ng */
    font-family: 'Arial', 'Helvetica', sans-serif !important;
}

/* TEXT - CH·ªÆ M√ÄU V√ÄNG N·ªîI B·∫¨T */
.rw-consult-btn-main .rw-btn-text {
    color: #f3f5f8 !important;
    font-weight: 800 !important;
    font-size: 18px !important;
    text-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
    z-index: 2 !important;
    position: relative !important;
}

/* === HI·ªÜU ·ª®NG HOVER - CHUY·ªÇN M√ÄU ƒê·∫¨M D·∫¶N === */
.rw-consult-btn-main:hover {
    transform: translateY(-4px) scale(1.05) !important;
    box-shadow: 0 12px 30px rgba(44, 236, 44, 0.5) !important;
    background: linear-gradient(135deg, #32ff32 0%, #1a991a 100%) !important;
    border-color: #32ff32 !important;
    color: #ffd700 !important;
}

.rw-consult-btn-main:hover .rw-btn-text {
    color: #ffd700 !important;
}

/* Hi·ªáu ·ª©ng √°nh s√°ng tr∆∞·ª£t */
.rw-consult-btn-main::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: -100% !important;
    width: 100% !important;
    height: 100% !important;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent) !important;
    transition: left 0.7s ease !important;
    z-index: 1 !important;
}

.rw-consult-btn-main:hover::before {
    left: 100% !important;
}

/* === MOBILE RESPONSIVE - 1 D√íNG & T·ªêI ∆ØU === */
@media (max-width: 768px) {
    .rw-consult-btn-main {
        padding: 16px 25px !important;
        font-size: 16px !important;
        width: 95% !important;
        max-width: 320px !important;
        display: flex !important; /* ƒê·∫£m b·∫£o 1 d√≤ng */
        flex-wrap: nowrap !important;
        white-space: nowrap !important;
    }
    
    .rw-consult-btn-main .rw-btn-text {
        font-size: 16px !important;
        white-space: nowrap !important;
        /* B·ªé M≈®I T√äN - ch·ªâ hi·ªÉn th·ªã text */
    }
    
    /* ·∫®n ho√†n to√†n m≈©i t√™n tr√™n mobile */
    .rw-consult-btn-main .rw-btn-arrow {
        display: none !important;
    }
    
    /* M√†u mobile - xanh l√° nh·∫°t */
    .rw-consult-btn-main {
        background: linear-gradient(135deg, #2bdc2b 0%, #1a9f1a 100%) !important;
        border-color: #2cec2c !important;
    }
}

@media (max-width: 480px) {
    .rw-consult-btn-main {
        padding: 14px 20px !important;
        font-size: 15px !important;
        margin: 8px auto !important;
    }
    
    .rw-consult-btn-main .rw-btn-text {
        font-size: 15px !important;
        letter-spacing: 0.5px !important;
    }
}

/* Desktop - v·∫´n gi·ªØ m≈©i t√™n */
@media (min-width: 769px) {
    .rw-consult-btn-main .rw-btn-arrow {
        margin-left: 12px !important;
        transition: transform 0.3s ease !important;
        font-weight: bold !important;
        font-size: 18px !important;
        color: #fff3af !important;
        z-index: 2 !important;
        position: relative !important;
    }
    
    .rw-consult-btn-main:hover .rw-btn-arrow {
        transform: translateX(4px) !important;
    }
}

/* ƒê·∫£m b·∫£o kh√¥ng b·ªã ·∫£nh h∆∞·ªüng b·ªüi CSS kh√°c */
.rw-consult-btn-container * {
    box-sizing: border-box !important;
}
</style>

<!-- === HTML CH√àN V√ÄO TRANG === -->
<div class="rw-consult-btn-container">
    <a href="https://forms.gle/XCWf6zgFRp4Vhbw39" 
       class="rw-consult-btn-main" 
       target="_blank"
       rel="noopener noreferrer"
       onclick="trackConsultationClick()">
        <span class="rw-btn-text">ƒêƒÇNG K√ù TH√îNG TIN T∆Ø V·∫§N</span>
        <span class="rw-btn-arrow">‚Üí</span>
    </a>
</div>

<script>
// === JAVASCRIPT HO√ÄN CH·ªàNH V·ªöI FACEBOOK PIXEL ===
function trackConsultationClick() {
    // === FACEBOOK PIXEL TRACKING - QUAN TR·ªåNG ===
    if (typeof fbq !== 'undefined') {
        fbq('track', 'Lead', {
            content_name: 'ƒêƒÉng k√Ω t∆∞ v·∫•n chung - ' + document.title,
            content_category: 'General Consultation',
            page_url: window.location.href,
            button_type: 'General CTA'
        });
        console.log('Facebook Pixel: Tracked consultation click');
    } else {
        console.warn('Facebook Pixel not loaded yet');
    }
    
    // === GOOGLE ANALYTICS TRACKING (GI·ªÆ NGUY√äN) ===
    if (typeof gtag !== 'undefined') {
        gtag('event', 'consultation_click', {
            'event_category': 'engagement',
            'event_label': 'Google Forms Consultation Button'
        });
    }
    
    console.log('Consultation button clicked - Opening: https://forms.gle/XCWf6zgFRp4Vhbw39');
    
    // === ƒê·∫¢M B·∫¢O M·ªû FORM SAU KHI TRACKING ===
    setTimeout(function() {
        window.open('https://forms.gle/XCWf6zgFRp4Vhbw39', '_blank');
    }, 100);
}

// === HI·ªÜU ·ª®NG V√Ä X·ª¨ L√ù BUTTON ===
document.addEventListener('DOMContentLoaded', function() {
    const btn = document.querySelector('.rw-consult-btn-main');
    if (btn) {
        console.log('Ruby Wings Consultation Button loaded successfully');
        
        // Th√™m hi·ªáu ·ª©ng click
        btn.addEventListener('mousedown', function() {
            this.style.transform = 'translateY(-2px) scale(1.02)';
        });
        
        btn.addEventListener('mouseup', function() {
            this.style.transform = 'translateY(-4px) scale(1.05)';
        });
        
        // X·ª≠ l√Ω s·ª± ki·ªán click ƒë·ªÉ ƒë·∫£m b·∫£o tracking
        btn.addEventListener('click', function(e) {
            // NgƒÉn m·ªü link ngay l·∫≠p t·ª©c
            e.preventDefault();
            // G·ªçi h√†m tracking
            trackConsultationClick();
        });
        
        // Ki·ªÉm tra mobile
        if (window.innerWidth <= 768) {
            console.log('Mobile mode: Green background, no arrow, single line');
        }
    }
});

// === BACKUP TRACKING - N·∫æU PIXEL CH∆ØA LOAD ===
function ensurePixelTracking() {
    if (typeof fbq === 'undefined') {
        console.log('Waiting for Facebook Pixel to load...');
        setTimeout(ensurePixelTracking, 500);
    }
}

// Kh·ªüi ƒë·ªông backup tracking
ensurePixelTracking();
</script>
   <!-- Footer -->
<footer id="contact">
    <div class="container">
        <div class="footer-content">
            <div class="footer-column">
                <h3><a href="tuyen-ngon-sang-lap-ruby-wings.html" class="footer-title-link">V·ªÅ ch√∫ng t√¥i</a></h3>
                <p>Ruby Wings Travel - "H√†nh tr√¨nh c·ªßa chi·ªÅu s√¢u, n∆°i b·∫°n kh√¥ng ch·ªâ ƒë·∫øn m·ªôt n∆°i, m√† c√≤n c√≥ th·ªÉ ƒë∆∞·ª£c tr·ªü v·ªÅ v·ªõi ch√≠nh m√¨nh".</p>
                <p> MST: 3301743759</p>
                <div class="social-links-grid">
                    <a href="https://www.facebook.com/profile.php?id=61563772112138" target="_blank" class="social-icon facebook" title="Facebook Fanpage">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.facebook.com/tien.sy.5011/" target="_blank" class="social-icon facebook-personal" title="Facebook C√° nh√¢n">
                        <i class="fas fa-user"></i>
                    </a>
                    <a href="https://x.com/TienSy379/status/1971778015232421915?t=UsXdMD8FrwjF3OO3ZnoUGg&s=19" target="_blank" class="social-icon twitter" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://www.instagram.com/tiensyrubywings?igsh=MWV3czBwMmYwYnIydA==" target="_blank" class="social-icon instagram" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://www.tiktok.com/@syluong379?_t=ZS-904eIdTTG12&_r=1" target="_blank" class="social-icon tiktok" title="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="https://www.linkedin.com/in/ti%E1%BA%BFn-s%E1%BB%B9-l%C6%B0%C6%A1ng-9a0292387?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank" class="social-icon linkedin" title="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="https://wa.me/84332510486" target="_blank" class="social-icon whatsapp" title="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://zalo.me/84332510486" target="_blank" class="social-icon zalo" title="Zalo Nh·∫Øn tin">
                        <img src="images/zalo.jpg" alt="Zalo" class="zalo-icon">
                    </a>
                    <a href="https://www.youtube.com/@rubywing-slsa" target="_blank" class="social-icon youtube" title="YouTube">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="https://m.me/tien.sy.5011?hash=AbY3ty4r4j7255Yb&source=qr_link_share" target="_blank" class="social-icon messenger" title="Messenger">
                        <i class="fab fa-facebook-messenger"></i>
                    </a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Li√™n H·ªá</h3>
                <div class="contact-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>148 Tr∆∞∆°ng Gia M√¥, V·ªπ D·∫° TP. Hu·∫ø</span>
                </div>
                <div class="contact-info">
                    <i class="fas fa-phone"></i>
                    <span>0332510486 </span>
                </div>
                <div class="contact-info">
                    <i class="fab fa-whatsapp"></i>
                    <span>0332510486 (WhatsApp/Zalo)</span>
                </div>
                <div class="contact-info">
                    <i class="fas fa-envelope"></i>
                    <span><a href="mailto:rubywingslsa@gmail.com">rubywingslsa@gmail.com</a></span>
                </div>
            </div>
            <div class="footer-column">
                <h3>Tham gia c·ªông ƒë·ªìng</h3>
                <p>Tham gia nh√≥m c·ªông ƒë·ªìng Ruby Wings Travel ƒë·ªÉ nh·∫≠n nh·ªØng th√¥ng tin m·ªõi nh·∫•t, chia s·∫ª tr·∫£i nghi·ªám v√† lan t·ªèa gi√° tr·ªã du l·ªãch c√≥ tr√°ch nhi·ªám.</p>
                <a href="https://www.facebook.com/groups/4107197836205156/" target="_blank" class="community-btn">
                    Tham gia nh√≥m <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
        <div class="copyright">
        
        </div>
    </div>
</footer>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Mobile menu functionality - FIXED
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navLinks = document.getElementById('navLinks');
        const overlay = document.getElementById('overlay');

        function toggleMobileMenu() {
            navLinks.classList.toggle('active');
            overlay.classList.toggle('active');
            document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
        }

        // Event listeners for mobile menu
        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleMobileMenu();
            });
        }

        // Close menu when clicking overlay
        if (overlay) {
            overlay.addEventListener('click', function() {
                toggleMobileMenu();
            });
        }

        // Close menu when clicking on a link
        const navAnchors = navLinks.querySelectorAll('a');
        navAnchors.forEach(anchor => {
            anchor.addEventListener('click', function() {
                toggleMobileMenu();
            });
        });

        // Close menu when pressing Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && navLinks.classList.contains('active')) {
                toggleMobileMenu();
            }
        });

        // Header scroll behavior
        let lastScrollTop = 0;
        const header = document.querySelector('header');
        const scrollThreshold = 100;

        window.addEventListener('scroll', function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > lastScrollTop && scrollTop > scrollThreshold) {
                header.classList.add('hidden');
            } else {
                header.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop;
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
       
        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
            } else {
                header.style.boxShadow = 'none';
            }
        });

        // Voice Reading Functionality
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const stopBtn = document.getElementById('stopBtn');
        const voiceOptions = document.querySelectorAll('input[name="voice"]');
        
        let speech = null;
        let isPlaying = false;
        let currentVoice = 'male';
        
        // Get all text content from the article
        function getArticleText() {
            const highlightBox = document.querySelector('.highlight-box');
            let text = '';
            
            // Get all paragraphs from the highlight box
            const paragraphs = highlightBox.querySelectorAll('p');
            paragraphs.forEach(p => {
                text += p.textContent + ' ';
            });
            
            return text;
        }
        
        // Initialize speech synthesis
        function initSpeech() {
            if ('speechSynthesis' in window) {
                speech = new SpeechSynthesisUtterance();
                speech.text = getArticleText();
                speech.lang = 'vi-VN';
                speech.rate = 1.0;
                speech.pitch = 1.0;
                speech.volume = 1.0;
                
                // Set voice based on selection
                updateVoice();
                
                // Event listeners for speech synthesis
                speech.onend = function() {
                    isPlaying = false;
                    updateButtonStates();
                };
                
                speech.onerror = function() {
                    isPlaying = false;
                    updateButtonStates();
                    alert('C√≥ l·ªói x·∫£y ra khi ƒë·ªçc vƒÉn b·∫£n. Vui l√≤ng th·ª≠ l·∫°i.');
                };
                
                return true;
            } else {
                alert('Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ t√≠nh nƒÉng ƒë·ªçc vƒÉn b·∫£n. Vui l√≤ng s·ª≠ d·ª•ng Chrome, Edge ho·∫∑c Safari.');
                return false;
            }
        }
        
        // Update voice based on selection
        function updateVoice() {
            if (!speech) return;
            
            // Get available voices
            const voices = speechSynthesis.getVoices();
            
            // Try to find Vietnamese voices
            const vietnameseVoices = voices.filter(voice => voice.lang.includes('vi'));
            
            if (vietnameseVoices.length > 0) {
                // For male voice, try to find a deeper voice
                if (currentVoice === 'male') {
                    // Set a lower pitch for male voice
                    speech.pitch = 0.8;
                    speech.rate = 0.9;
                    speech.voice = vietnameseVoices[0];
                } else {
                    // Set a higher pitch for female voice
                    speech.pitch = 1.2;
                    speech.rate = 1.0;
                    // Try to find a different voice for female if available
                    speech.voice = vietnameseVoices.length > 1 ? vietnameseVoices[1] : vietnameseVoices[0];
                }
            } else {
                // Fallback to default voice if no Vietnamese voices available
                speech.voice = voices[0];
                // Adjust pitch based on gender selection
                speech.pitch = currentVoice === 'male' ? 0.8 : 1.2;
            }
        }
        
        // Update button states
        function updateButtonStates() {
            if (isPlaying) {
                playBtn.disabled = true;
                pauseBtn.disabled = false;
                stopBtn.disabled = false;
            } else {
                playBtn.disabled = false;
                pauseBtn.disabled = true;
                stopBtn.disabled = true;
            }
        }
        
        // Play speech
        function playSpeech() {
            if (!speech && !initSpeech()) return;
            
            if (!isPlaying) {
                speechSynthesis.speak(speech);
                isPlaying = true;
                updateButtonStates();
            }
        }
        
        // Pause speech
        function pauseSpeech() {
            if (isPlaying) {
                speechSynthesis.pause();
                isPlaying = false;
                updateButtonStates();
            }
        }
        
        // Stop speech
        function stopSpeech() {
            speechSynthesis.cancel();
            isPlaying = false;
            updateButtonStates();
        }
        
        // Initialize voice functionality
        if (initSpeech()) {
            // Event listeners for voice buttons
            playBtn.addEventListener('click', playSpeech);
            pauseBtn.addEventListener('click', pauseSpeech);
            stopBtn.addEventListener('click', stopSpeech);
            
            // Event listeners for voice options
            voiceOptions.forEach(option => {
                option.addEventListener('change', function() {
                    currentVoice = this.value;
                    updateVoice();
                    
                    // If speech is playing, restart with new voice
                    if (isPlaying) {
                        speechSynthesis.cancel();
                        setTimeout(() => {
                            playSpeech();
                        }, 100);
                    }
                });
            });
            
            // Update voices when they become available
            speechSynthesis.onvoiceschanged = function() {
                updateVoice();
            };
            
            // Initialize button states
            updateButtonStates();
        } else {
            // Disable voice buttons if not supported
            playBtn.disabled = true;
            pauseBtn.disabled = true;
            stopBtn.disabled = true;
        }
    });
</script>

<!-- RUBY WINGS ‚Äì META PIXEL LOGIC + CONSULT BUTTON (FINAL, FIX MAP, FIX DEEPSCROLL, NO FALLBACK) -->
<script>
(function(){
'use strict';

// ================= ENHANCED FBQ SAFETY =================
// Kh·ªüi t·∫°o fbq object n·∫øu ch∆∞a c√≥ (an to√†n, kh√¥ng ghi ƒë√®)
if (typeof window.fbq !== 'function') {
  window.fbq = window.fbq || function() {
    (window.fbq.callMethod ? window.fbq.callMethod.apply(window.fbq, arguments) : 
     window.fbq.queue.push(arguments));
  };
  if (!window._fbq) window._fbq = window.fbq;
  window.fbq.push = window.fbq;
  window.fbq.loaded = true;
  window.fbq.version = '2.0';
  window.fbq.queue = [];
}

// ================= IMPROVED SESSION STORAGE =================
function getSessionFlag(key, ttlHours = 4) {
  try {
    const storageKey = 'rw_px_' + key;
    const item = sessionStorage.getItem(storageKey);
    if (!item) return false;
    
    const data = JSON.parse(item);
    const now = Date.now();
    
    // Reset n·∫øu qu√° TTL
    if (data.expiry && now > data.expiry) {
      sessionStorage.removeItem(storageKey);
      return false;
    }
    
    return true;
  } catch {
    return false;
  }
}

function setSessionFlag(key, ttlHours = 4) {
  try {
    const storageKey = 'rw_px_' + key;
    const expiry = Date.now() + (ttlHours * 60 * 60 * 1000);
    sessionStorage.setItem(storageKey, JSON.stringify({
      expiry: expiry,
      url: window.location.href,
      timestamp: new Date().toISOString()
    }));
    return true;
  } catch {
    return false;
  }
}

// ================= FIX: PIXEL QUEUE SYSTEM =================
const rwPixelQueue = [];
let rwPixelProcessor = null;

function initPixelQueue() {
  if (rwPixelProcessor) return;
  
  rwPixelProcessor = setInterval(() => {
    if (window.fbq && typeof window.fbq === 'function' && window.fbq.loaded) {
      clearInterval(rwPixelProcessor);
      rwPixelProcessor = null;
      
      // Process queued events
      while (rwPixelQueue.length) {
        const item = rwPixelQueue.shift();
        try {
          if (item.eventType === 'track') {
            window.fbq('track', item.eventName, item.params, item.options || {});
          } else {
            window.fbq('trackCustom', item.eventName, item.params);
          }
          console.log('[RW Pixel] ‚úÖ Processed queued:', item.eventName);
        } catch (e) {
          console.warn('[RW Pixel] Queue processing error:', e);
        }
      }
    }
  }, 300);
}

// ================= FIX: IMPROVED SAFE FBQ SENDER =================
function safeFbqSend(eventType, eventName, params, options) {
  try {
    // N·∫øu fbq ready, g·ª≠i ngay
    if (window.fbq && typeof window.fbq === 'function' && window.fbq.loaded) {
      if (eventType === 'track') {
        window.fbq('track', eventName, params, options || {});
      } else {
        window.fbq('trackCustom', eventName, params);
      }
      console.log('[RW Pixel] ‚úÖ Sent immediately:', eventName);
      return true;
    }
    
    // N·∫øu ch∆∞a ready, th√™m v√†o queue
    console.log('[RW Pixel] Queueing event:', eventName);
    rwPixelQueue.push({eventType, eventName, params, options});
    
    // Kh·ªüi ƒë·ªông processor n·∫øu ch∆∞a c√≥
    if (!rwPixelProcessor) {
      initPixelQueue();
    }
    
    return false;
  } catch (error) {
    console.warn('[RW Pixel] Error in safeFbqSend:', error);
    return false;
  }
}

// ================= FIX: BETTER SESSION KEY =================
function getPageKey(baseKey) {
  // T·∫°o key duy nh·∫•t cho m·ªói page + session
  return `rw_${baseKey}_${CONTENT_ID}_${window.location.pathname.replace(/\//g, '_')}`;
}

/* =========================================================
   CONFIG (GI·ªÆ NGUY√äN T·ª™ CODE C≈®)
========================================================= */
const SCROLL_DEPTH = 80;
const ENGAGED_TIME = 30000;

/* =========================================================
   CONTENT ID MAP (GI·ªÆ NGUY√äN 100%)
========================================================= */
const CONTENT_ID_MAP = {
  '': 'RW_HOME',
  'nhung-hanh-trinh-tieu-bieu': 'RW_LANDING_FEATURED',
  'nhung-hanh-trinh-tham-quan-trai-nghiem-linh-hoat': 'RW_LANDING_FLEX',
  'ngon-lua-truong-son-2n1d': 'RW_TOUR_NLTSON_2N1D',
  'mua-do-va-tay-truong-son-2n1d': 'RW_TOUR_MUADO_TSON_2N1D',
  'hanh-trinh-lanh-dao-3n2d': 'RW_TOUR_LANHDAO_3N2D',
  'di-san-quoc-gia-2n1d': 'RW_TOUR_DISANQG_2N1D',
  'huyen-thoai-nguoi-phu-nu-viet-nam-3n2d': 'RW_TOUR_PHUNUVN_3N2D',
  'dmz-hoa-giai-ban-sac-4n3d': 'RW_TOUR_DMZ_4N3D',
  'hanh-trinh-trai-nghiem-linh-hoat': 'RW_FLEX_GENERAL',
  'hanh-trinh-giao-duc-ky-nang-song': 'RW_FLEX_EDU_SKILL',
  'hanh-trinh-trai-nghiem-thien-nhien': 'RW_FLEX_NATURE',
  'hanh-trinh-van-hoa-di-san': 'RW_FLEX_HERITAGE',
  'tom_tat_ho_so_hanh_trinh_mau_cho_nha_truong': 'RW_PROFILE_SCHOOL',
  '01-mo-dau-ruby-wings-la-ai': 'RW_ABOUT_01',
  '02-cau-chuyen-khoi-nguon': 'RW_ABOUT_02',
  '03-triet-ly-gia-tri': 'RW_ABOUT_03',
  '04-logo-y-nghia': 'RW_ABOUT_04',
  '05-he-sinh-thai-ruby-wings': 'RW_ABOUT_05',
  'dich-vu-du-lich-trai-nghiem': 'RW_SERVICE_EXPERIENCE',
  'dich-vu-retreat-chua-lanh': 'RW_SERVICE_RETREAT',
  'dich-vu-team-building': 'RW_SERVICE_TEAMBUILDING',
  'dich-vu-giao-duc-ky-nang': 'RW_SERVICE_EDUCATION',
  'lien-he': 'RW_CONTACT',
  'gioi-thieu': 'RW_ABOUT',
  'theo_dong_di_san_mien_trung_tu_pho_co_den_co_do': 'RW_TOUR_DISANMIENTRUNG_3N2D',
  'ky_uc_va_dai_ngan_tinh_lang_gv': 'RW_TOUR_KYUC_DAINGAN_2N1D',
  'mien_trung_di_san_kham_pha_quy_nhon_phu_yen': 'RW_TOUR_QUYNHON_PHUYEN_4N3D',
  'kham_pha_dat_viet_van_hoa_ky_quan_thien_nhien_khe_sanh_tam_dao_moc_chau': 'RW_TOUR_TAMDAO_MOCCHAU_4N3D',
  'mien_bac_di_san_tam_linh_thien_nhien': 'RW_TOUR_HALONG_NINHBINH_TAMCHUC_3N2D',
  'trai_nghiem_tinh_hoa_bac_bo_ha_noi_sa_pa_phu_tho': 'RW_TOUR_HANOI_SAPA_PHUTHO_5N4D',
  'di_san_kham_pha_ninh_binh_tam_dao_ha_long': 'RW_TOUR_NINHBINH_TAMDAO_HALONG_6N5D',
  'kham_pha_da_nang_hoi_an': 'RW_TOUR_DANANG_HOIAN_2N1D',
  'gioi_thieu_tai_lieu_bat_mach_noi_dau': 'RW_BOOK_BAT_MACH_NOI_DAU',
  'cong_dong_ban_sac_trong_nuoc': 'CONG_DONG_BAN_SAC_TRONG_NUOC',
  'ket_noi_trong_nuoc': 'KET_NOI_TRONG_NUOC',
  'lan_toa_trong_nuoc': 'LAN_TOA_TRONG_NUOC',
  'giao_duc_ky_nang_trong_nuoc': 'GIAO_DUC_KY_NANG_TRONG_NUOC',
  'trai-nghiem-linh-hoat-phu-nu': 'RW_TOUR_DONGCHAYYEUTHUONG_2N1D',
  'mua_do_va_tay_truong_son': 'RW_TOUR_MUADO_TSON_2N1D',
  'dai_ngan_truong_son_sac_xuan_mien_bien_vien': 'RW_TOUR_TRUONGSON_BIENVIEN_2N1D',
  'non-nuoc-bach-ma': 'RW_TOUR_BACHMA_1DAY',
  'sac_xuan_mien_bien_vien': 'RW_TOUR_SACXUAN_BIENVIEN_2N1D'
};

/* =========================================================
   LEAD KEYWORDS (GI·ªÆ NGUY√äN)
========================================================= */
const LEAD_KEYWORDS = [
  'ƒëƒÉng k√Ω',
  'ƒëƒÉng k√Ω th√¥ng tin t∆∞ v·∫•n',
  'g·ªçi ƒë·ªÉ ch√∫ng t√¥i t∆∞ v·∫•n',
  'li√™n h·ªá ƒë·∫∑t h√†nh tr√¨nh',
  'n∆°i nh·∫≠n t∆∞ v·∫•n',
  'n∆°i nh·∫≠n t∆∞ v·∫•n ‚Üí',
  'li√™n h·ªá',
  't∆∞ v·∫•n',
  '033.251.0486'
];

/* =========================================================
   PATH KEY ‚Äì FIX QUAN TR·ªåNG: ƒê·∫¢M B·∫¢O KH√îNG NULL
========================================================= */
let pathKey = location.pathname
  .replace(/^\/|\/$/g,'')
  .replace('index.html','')
  .replace('.html','');

if(pathKey === '') pathKey = '';

// FIX CRITICAL: ƒê·∫¢M B·∫¢O CONTENT_ID LU√îN C√ì GI√Å TR·ªä
const CONTENT_ID = CONTENT_ID_MAP[pathKey] || 'RW_UNKNOWN';
const PAGE_TYPE = pathKey === '' ? 'home' : (CONTENT_ID_MAP[pathKey] ? 'page' : 'unknown');

console.log('[RW Pixel] Page Info:', { 
  pathKey: pathKey, 
  CONTENT_ID: CONTENT_ID, 
  PAGE_TYPE: PAGE_TYPE,
  mapped: !!CONTENT_ID_MAP[pathKey]
});

/* =========================================================
   VIEW CONTENT (FIXED - WITH RETRY)
========================================================= */
function sendViewContent() {
  if (!window.RW_EVENT_ID) {
    console.log('[RW Pixel] RW_EVENT_ID not ready, retrying...');
    setTimeout(sendViewContent, 500);
    return;
  }
  
  if (!CONTENT_ID || CONTENT_ID === 'RW_UNKNOWN') {
    console.warn('[RW Pixel] Invalid CONTENT_ID for ViewContent');
    return;
  }
  
  const params = {
    content_name: document.title || 'Ruby Wings',
    content_category: PAGE_TYPE,
    content_ids: [CONTENT_ID],
    content_type: 'website',
    currency: 'VND',
    value: PAGE_TYPE === 'home' ? 0 : 10000,
    predicted_ltv: PAGE_TYPE === 'home' ? 0 : 1000000
  };
  
  console.log('[RW Pixel] Sending ViewContent:', params);
  
  safeFbqSend('track', 'ViewContent', params, {
    eventID: window.RW_EVENT_ID
  });
}

// G·ª≠i ViewContent sau 1.5s
setTimeout(sendViewContent, 1500);

/* =========================================================
   LANDING PAGE VIEW (FIXED)
========================================================= */
setTimeout(function() {
  if (!getSessionFlag('landing_viewed')) {
    setSessionFlag('landing_viewed');
    
    console.log('[RW Pixel] Sending LandingPageView');
    
    safeFbqSend('trackCustom', 'LandingPageView', {
      page_type: PAGE_TYPE,
      content_id: CONTENT_ID,
      url: location.href,
      referrer: document.referrer || 'direct'
    });
  }
}, 1800);

/* =========================================================
   PAGE SCROLL (25% / 50% / 75%) - FIXED
========================================================= */
const scrollMarks = [25, 50, 75];
const scrollSent = {};

window.addEventListener('scroll', function () {
  const docHeight = document.documentElement.scrollHeight;
  const winHeight = window.innerHeight;
  const scrollTop = window.scrollY || document.documentElement.scrollTop;
  
  if (docHeight <= winHeight) return;
  
  const percent = Math.round(((scrollTop + winHeight) / docHeight) * 100);
  
  scrollMarks.forEach(function (mark) {
    if (percent >= mark && !scrollSent[mark]) {
      scrollSent[mark] = true;
      
      const scrollKey = 'scroll_' + mark + '_' + CONTENT_ID;
      if (!getSessionFlag(scrollKey)) {
        setSessionFlag(scrollKey);
        
        console.log('[RW Pixel] Sending PageScroll:', mark + '%');
        
        safeFbqSend('trackCustom', 'PageScroll', {
          scroll_percent: mark,
          page_type: PAGE_TYPE,
          content_id: CONTENT_ID,
          url: location.href,
          total_percent: percent
        });
      }
    }
  });
}, { passive: true });

/* =========================================================
   CONTENT VIEW (FOR NON-HOME PAGES)
========================================================= */
if (PAGE_TYPE === 'page' && CONTENT_ID !== 'RW_HOME') {
  setTimeout(function() {
    const contentKey = 'content_view_' + CONTENT_ID;
    if (!getSessionFlag(contentKey)) {
      setSessionFlag(contentKey);
      
      console.log('[RW Pixel] Sending ContentView');
      
      safeFbqSend('trackCustom', 'ContentView', {
        content_id: CONTENT_ID,
        page_type: PAGE_TYPE,
        title: document.title || '',
        url: location.href
      });
    }
  }, 2000);
}

/* =========================================================
   DEEP SCROLL (80%) - FIXED
========================================================= */
let deepScrollTriggered = false;

window.addEventListener('scroll', function () {
  if (deepScrollTriggered) return;
  
  const docHeight = document.documentElement.scrollHeight;
  const winHeight = window.innerHeight;
  const scrollTop = window.scrollY || document.documentElement.scrollTop;
  
  if (docHeight <= winHeight) return;
  
  const percent = Math.round(((scrollTop + winHeight) / docHeight) * 100);
  
  if (percent >= SCROLL_DEPTH) {
    deepScrollTriggered = true;
    
    const deepScrollKey = 'deep_scroll_' + CONTENT_ID;
    if (!getSessionFlag(deepScrollKey)) {
      setSessionFlag(deepScrollKey);
      
      console.log('[RW Pixel] Sending DeepScroll:', percent + '%');
      
      safeFbqSend('trackCustom', 'DeepScroll', {
        content_id: CONTENT_ID,
        page_type: PAGE_TYPE,
        scroll_depth: SCROLL_DEPTH,
        achieved_percent: percent,
        url: location.href
      });
    }
  }
}, { passive: true });

/* =========================================================
   ENGAGED VIEW (30 SECONDS) - FIXED
========================================================= */
setTimeout(function () {
  const engagedKey = 'engaged_view_' + CONTENT_ID;
  if (!getSessionFlag(engagedKey)) {
    setSessionFlag(engagedKey);
    
    console.log('[RW Pixel] Sending EngagedView');
    
    safeFbqSend('trackCustom', 'EngagedView', {
      content_id: CONTENT_ID,
      page_type: PAGE_TYPE,
      time_on_page: ENGAGED_TIME / 1000,
      url: location.href
    });
  }
}, ENGAGED_TIME);

/* =========================================================
   CONSULT CLICK - FIXED (TR√ÅNH C√ÅC N√öT ƒê·∫∂C BI·ªÜT)
========================================================= */
document.addEventListener('click', function (e) {
  // T√¨m ph·∫ßn t·ª≠ ƒë∆∞·ª£c click
  let target = e.target;
  while (target && target !== document) {
    if (target.tagName === 'A' || target.tagName === 'BUTTON') {
      break;
    }
    target = target.parentElement;
  }
  
  if (!target || target === document) return;
  
  // KI·ªÇM TRA QUAN TR·ªåNG: KH√îNG x·ª≠ l√Ω c√°c n√∫t ƒë·∫∑c bi·ªát
  const specialButtons = [
    '#rw-zalo-round-btn',
    '#rw-consult-btn', 
    '#ruby-call-button',
    '.rw-chat-btn-isolated',
    '#ruby-call-regular',
    '#ruby-call-zalo',
    '.rw-chat-send-isolated',
    '.rw-chat-close-isolated'
  ];
  
  // Ki·ªÉm tra xem c√≥ ph·∫£i n√∫t ƒë·∫∑c bi·ªát kh√¥ng
  let isSpecialButton = false;
  for (const selector of specialButtons) {
    if (target.matches(selector) || target.closest(selector)) {
      isSpecialButton = true;
      break;
    }
  }
  
  if (isSpecialButton) return;
  
  // Ki·ªÉm tra n·ªôi dung text
  const text = (target.textContent || target.innerText || '').toLowerCase().trim();
  if (!text) return;
  
  // T√¨m keyword trong LEAD_KEYWORDS
  const isLead = LEAD_KEYWORDS.some(function (keyword) {
    return text.includes(keyword.toLowerCase());
  });
  
  if (!isLead) return;
  
  // G·ª≠i ConsultClick
  const consultKey = 'consult_click_' + Date.now();
  if (!getSessionFlag(consultKey, 0.5)) { // 30 ph√∫t TTL
    setSessionFlag(consultKey, 0.5);
    
    console.log('[RW Pixel] Sending ConsultClick:', text.substring(0, 50));
    
    safeFbqSend('trackCustom', 'ConsultClick', {
      content_name: text.substring(0, 80),
      content_category: 'consultation',
      content_ids: [CONTENT_ID],
      page_type: PAGE_TYPE,
      element_text: text.substring(0, 100),
      url: location.href
    });
  }
}, true); // S·ª≠ d·ª•ng capture phase

// ================= DEBUG MODE =================
if (window.location.search.includes('debug_pixel=1')) {
  console.log('[RW Pixel Debug Mode]');
  console.log('Path:', pathKey);
  console.log('Content ID:', CONTENT_ID);
  console.log('Page Type:', PAGE_TYPE);
  console.log('RW Event ID:', window.RW_EVENT_ID);
  console.log('FBQ Available:', !!window.fbq);
  
  // Test g·ª≠i event
  setTimeout(() => {
    console.log('[RW Pixel] Testing events...');
    
    // Test ViewContent
    safeFbqSend('track', 'ViewContent', {
      content_name: 'TEST - ' + document.title,
      content_category: PAGE_TYPE,
      content_ids: [CONTENT_ID],
      content_type: 'website',
      currency: 'VND',
      value: 0
    }, { eventID: 'test_' + Date.now() });
    
    // Test c√°c custom events
    ['LandingPageView', 'PageScroll', 'ContentView', 'DeepScroll', 'EngagedView', 'ConsultClick'].forEach((event, i) => {
      setTimeout(() => {
        console.log('[RW Pixel] Test sending:', event);
        safeFbqSend('trackCustom', event, {
          content_id: CONTENT_ID,
          page_type: PAGE_TYPE,
          test_mode: true,
          timestamp: new Date().toISOString()
        });
      }, i * 1000);
    });
  }, 3000);
}

// ==================== PH·∫¶N N√ÄY GI·ªÆ NGUY√äN 100% ====================
// KH√îNG THAY ƒê·ªîI G√å T·ª™ ƒê√ÇY XU·ªêNG

/* =========================================================
   ZALO BUTTON (G√ìC PH·∫¢I, TR√äN N√öT FORM T∆Ø V·∫§N) - N√öT TR√íN
========================================================= */
const zaloRoundBtn = document.createElement('div');
zaloRoundBtn.innerHTML = `
 <a href="https://zalo.me/84332510486"
   target="_blank"
   rel="noopener noreferrer"
   id="rw-zalo-round-btn"
   aria-label="Li√™n h·ªá Zalo Ruby Wings"
   style="
     position:fixed;
     right:20px;
     bottom:80px;
     z-index:9999;
     width:60px;
     height:60px;
     border-radius:50%;
     background:linear-gradient(135deg,#0068FF,#0052CC);
     color:#ffffff;
     display:flex;
     align-items:center;
     justify-content:center;
     text-decoration:none;
     box-shadow:0 6px 16px rgba(0,0,0,.25);
     border:2px solid white;
   ">
   <img 
     src="images/zalo.jpg"
     alt=""
     style="width:30px;height:30px;border-radius:50%;object-fit:cover;"
   >
</a>
`;
document.body.appendChild(zaloRoundBtn);

/* =========================================================
   CONSULT BUTTON (G√ìC PH·∫¢I) ‚Äì PIXEL + CAPI LEAD (DEDUP SAFE)
========================================================= */
const btn = document.createElement('div');
btn.innerHTML = `
 <a href="https://forms.gle/XCWf6zgFRp4Vhbw39"
   target="_blank"
   id="rw-consult-btn"
   style="
     position:fixed;
     right:20px;
     bottom:20px;
     z-index:9999;
     padding:12px 18px;
     background:linear-gradient(135deg,#16a34a,#22c55e);
     color:#ffffff;
     font-weight:700;
     font-size:14px;
     border-radius:30px;
     text-decoration:none;
     box-shadow:0 6px 16px rgba(0,0,0,.25);
   ">
   Form t∆∞ v·∫•n
 </a>
`;
document.body.appendChild(btn);

/* =========================================================
   FORM T∆Ø V·∫§N BUTTON - TH√äM CAPI (KH√îNG ·∫¢NH H∆Ø·ªûNG C√ÅI C≈®)
========================================================= */
// Th√™m s·ª± ki·ªán click cho n√∫t Form t∆∞ v·∫•n
document.addEventListener('click', function(e) {
    var consultBtn = e.target.closest && e.target.closest('#rw-consult-btn');
    if (!consultBtn) return;
    
    // L·∫•y event_id t·ª´ sessionStorage ho·∫∑c t·∫°o m·ªõi
    var eventId = getFinalConvEventId('consult_form');
    
    // G·ª≠i CAPI cho Form t∆∞ v·∫•n
    fetch('https://ruby-wings-chatbot-v4.onrender.com/api/track-contact', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
            event_id: eventId,
            phone: '',
            source: 'Form T∆∞ V·∫•n'
        })
    }).catch(function(error) {
        console.warn('Form t∆∞ v·∫•n CAPI error:', error);
    });
    
    // V·∫™N GI·ªÆ NGUY√äN H√ÄNH VI M·ªû LINK
    // Kh√¥ng preventDefault ƒë·ªÉ link v·∫´n m·ªü b√¨nh th∆∞·ªùng
});

/* =========================================================
   FAQ FUNCTIONALITY
========================================================= */
document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', () => {
            // ƒê√≥ng t·∫•t c·∫£ c√°c FAQ kh√°c
            faqItems.forEach(otherItem => {
                if (otherItem !== item && otherItem.classList.contains('active')) {
                    otherItem.classList.remove('active');
                }
            });
            
            // Toggle FAQ hi·ªán t·∫°i
            item.classList.toggle('active');
        });
    });
    
    // T·ª± ƒë·ªông m·ªü FAQ ƒë·∫ßu ti√™n tr√™n desktop
    if (window.innerWidth > 768) {
        const firstFaq = document.querySelector('.faq-item');
        if (firstFaq) {
            firstFaq.classList.add('active');
        }
    }
});

})();
</script>

<!-- ================= CHATBOT WIDGET - GI·ªÆ NGUY√äN 100% ================= -->
<script>
// Ruby Wings Chat Widget - Complete Isolation
const BACKEND_URL = "https://ruby-wings-chatbot-v4.onrender.com";

(function() {
    'use strict';
    
    // Ki·ªÉm tra tr√πng l·∫∑p
    if (window.RW_CHAT_LOADED) return;
    window.RW_CHAT_LOADED = true;
    
    // T·∫°o container t√°ch bi·ªát ho√†n to√†n
    const createIsolatedWidget = function() {
        // X√≥a widget c≈© n·∫øu c√≥
        const oldWidgets = document.querySelectorAll('#rw-chat-isolated, .rw-chat-isolated');
        oldWidgets.forEach(w => w.remove());
        
        // T·∫°o container m·ªõi
        const container = document.createElement('div');
        container.id = 'rw-chat-isolated';
        container.className = 'rw-chat-isolated';
        
        // CSS ho√†n to√†n t√°ch bi·ªát
        const styles = `
            .rw-chat-isolated {
                position: fixed !important;
                left: 0 !important;
                bottom: 0 !important;
                width: auto !important;
                height: auto !important;
                z-index: 10000 !important;
                pointer-events: none !important;
                isolation: isolate !important;
                all: initial !important;
                font-family: Arial, sans-serif !important;
            }
            
            .rw-chat-isolated * {
                pointer-events: auto !important;
                box-sizing: border-box !important;
            }
            
            .rw-chat-btn-isolated {
    position: fixed !important;
    left: 15px !important;
    bottom: 15px !important;
    width: 60px !important;
    height: 60px !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, #00d97e, #00b368) !important;
    border: 2px solid white !important; /* <--- ƒë√£ th√™m vi·ªÅn tr·∫Øng */
    color: white !important;
    font-size: 24px !important;
    cursor: pointer !important;
    z-index: 10001 !important;
    box-shadow: 0 4px 20px rgba(0,217,126,0.4) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    margin: 0 !important;
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
    overflow: hidden !important;
}
            
            .rw-chat-btn-isolated::after {
                content: "AI" !important;
                position: absolute !important;
                bottom: 5px !important;
                font-size: 11px !important;
                font-weight: bold !important;
                color: white !important;
                left: 0 !important;
                right: 0 !important;
                text-align: center !important;
            }
            
            .rw-chat-widget-isolated {
                position: fixed !important;
                left: 15px !important;
                bottom: 85px !important;
                width: calc(100vw - 30px) !important;
                max-width: 400px !important;
                height: 500px !important;
                background: white !important;
                border-radius: 12px !important;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important;
                z-index: 10002 !important;
                display: none !important;
                flex-direction: column !important;
                overflow: hidden !important;
                border: 1px solid #e2e8f0 !important;
                pointer-events: auto !important;
            }
            
            .rw-chat-widget-isolated.open {
                display: flex !important;
            }
            
            .rw-chat-header-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                padding: 15px !important;
                display: flex !important;
                align-items: center !important;
                gap: 10px !important;
            }
            
            .rw-chat-avatar-isolated {
                width: 32px !important;
                height: 32px !important;
                border-radius: 8px !important;
                background: rgba(255,255,255,0.2) !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-weight: bold !important;
                font-size: 14px !important;
            }
            
            .rw-chat-title-isolated {
                font-weight: bold !important;
                font-size: 16px !important;
                flex: 1 !important;
            }
            
            .rw-chat-close-isolated {
                background: none !important;
                border: none !important;
                color: white !important;
                font-size: 18px !important;
                cursor: pointer !important;
                width: 30px !important;
                height: 30px !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .rw-chat-body-isolated {
                flex: 1 !important;
                padding: 15px !important;
                overflow-y: auto !important;
                background: #f8fafc !important;
                display: flex !important;
                flex-direction: column !important;
                gap: 12px !important;
            }
            
            .rw-chat-message-isolated {
                max-width: 85% !important;
                padding: 12px 16px !important;
                border-radius: 12px !important;
                font-size: 14px !important;
                line-height: 1.4 !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
            }
            
            .rw-chat-message-bot-isolated {
                background: white !important;
                color: #1e293b !important;
                border-bottom-left-radius: 4px !important;
                align-self: flex-start !important;
            }
            
            .rw-chat-message-user-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                border-bottom-right-radius: 4px !important;
                align-self: flex-end !important;
            }
            
            .rw-chat-input-container-isolated {
                padding: 15px !important;
                background: white !important;
                border-top: 1px solid #e2e8f0 !important;
                display: flex !important;
                gap: 8px !important;
            }
            
            .rw-chat-input-isolated {
                flex: 1 !important;
                padding: 12px !important;
                border: 2px solid #00b368 !important;
                border-radius: 8px !important;
                font-size: 14px !important;
                outline: none !important;
                background: white !important;
                color: #1e293b !important;
            }
            
            .rw-chat-input-isolated:focus {
                border-color: #00d97e !important;
                box-shadow: 0 0 0 3px rgba(0, 217, 126, 0.2) !important;
            }
            
            .rw-chat-send-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                border: none !important;
                padding: 12px 16px !important;
                border-radius: 8px !important;
                cursor: pointer !important;
                font-weight: bold !important;
                font-size: 14px !important;
            }
            
            @media (min-width: 769px) {
                .rw-chat-btn-isolated {
                    left: 20px !important;
                    bottom: 20px !important;
                    width: 70px !important;
                    height: 70px !important;
                }
                .rw-chat-btn-isolated::after {
                    font-size: 12px !important;
                    bottom: 8px !important;
                }
                .rw-chat-widget-isolated {
                    left: 20px !important;
                    bottom: 100px !important;
                    width: 400px !important;
                }
            }
        `;
        
        // Th√™m styles
        const styleEl = document.createElement('style');
        styleEl.textContent = styles;
        document.head.appendChild(styleEl);
        
        // T·∫°o HTML
        container.innerHTML = `
            <button class="rw-chat-btn-isolated" aria-label="M·ªü chat tr·ª£ l√Ω Ruby Wings AI">ü§ñ</button>
            <div class="rw-chat-widget-isolated">
                <div class="rw-chat-header-isolated">
                    <div class="rw-chat-avatar-isolated">AI</div>
                    <div class="rw-chat-title-isolated">Tr·ª£ l√Ω Ruby Wings AI</div>
                    <button class="rw-chat-close-isolated" aria-label="ƒê√≥ng chat">‚úï</button>
                </div>
                <div class="rw-chat-body-isolated">
                    <div class="rw-chat-message-isolated rw-chat-message-bot-isolated">
                        Ch√†o b·∫°n! T√¥i l√† tr·ª£ l√Ω Ruby Wings AI chuy√™n t∆∞ v·∫•n v·ªÅ du l·ªãch ... T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?
                        <div style="font-size:11px; color:#94a3b8; margin-top:4px; text-align:right;">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                    </div>
                </div>
                <div class="rw-chat-input-container-isolated">
                    <input type="text" class="rw-chat-input-isolated" placeholder="Chatbot v·∫´n ƒëang n√¢ng c·∫•p...">
                    <button class="rw-chat-send-isolated">G·ª≠i</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(container);
        
        // L·∫•y elements
        const chatBtn = container.querySelector('.rw-chat-btn-isolated');
        const chatWidget = container.querySelector('.rw-chat-widget-isolated');
        const closeBtn = container.querySelector('.rw-chat-close-isolated');
        const sendBtn = container.querySelector('.rw-chat-send-isolated');
        const chatInput = container.querySelector('.rw-chat-input-isolated');
        const chatBody = container.querySelector('.rw-chat-body-isolated');
        
        let isOpen = false;
        
        // Event handlers ƒë∆°n gi·∫£n
        function toggleChat() {
            isOpen = !isOpen;
            chatWidget.classList.toggle('open', isOpen);
            if (isOpen) {
                setTimeout(() => chatInput.focus(), 100);
            }
        }
        
        function closeChat() {
            isOpen = false;
            chatWidget.classList.remove('open');
        }
        
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            // Th√™m tin nh·∫Øn user
            addMessage(message, 'user');
            chatInput.value = '';
            
            // Hi·ªÉn th·ªã typing
            const typingMsg = addMessage('...', 'bot', true);
            
            // G·ª≠i ƒë·∫øn backend (FIX: Endpoint ƒë√∫ng /chat kh√¥ng c√≥ /api)
            fetch(BACKEND_URL + '/chat', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ message: message })
            })
            .then(response => response.json())
            .then(data => {
                typingMsg.remove();
                const reply = data.reply || data.message || 'Kh√¥ng c√≥ ph·∫£n h·ªìi t·ª´ server.';
                addMessage(reply, 'bot');
            })
            .catch(error => {
                typingMsg.remove();
                addMessage('Xin l·ªói, d·ªãch v·ª• t·∫°m th·ªùi gi√°n ƒëo·∫°n. Vui l√≤ng th·ª≠ l·∫°i.', 'bot');
                console.error('Chat error:', error);
            });
        }
        
        function addMessage(text, sender, isTyping = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `rw-chat-message-isolated rw-chat-message-${sender}-isolated`;
            
            if (isTyping) {
                messageDiv.innerHTML = `
                    <div style="display:flex; gap:4px; align-items:center;">
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite"></div>
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite 0.1s"></div>
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite 0.2s"></div>
                    </div>
                    <style>
                        @keyframes bounce {
                            0%, 100% { transform: translateY(0); }
                            50% { transform: translateY(-5px); }
                        }
                    </style>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div>${text}</div>
                    <div style="font-size:11px; opacity:0.7; margin-top:4px; text-align:${sender === 'user' ? 'left' : 'right'};">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                `;
            }
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
            return messageDiv;
        }
        
        // G·∫Øn event listeners
        chatBtn.addEventListener('click', toggleChat);
        closeBtn.addEventListener('click', closeChat);
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        // ƒê√≥ng khi click b√™n ngo√†i
        document.addEventListener('click', (e) => {
            if (isOpen && !chatWidget.contains(e.target) && !chatBtn.contains(e.target)) {
                closeChat();
            }
        });
    };
    
    // Kh·ªüi t·∫°o khi trang load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', createIsolatedWidget);
    } else {
        createIsolatedWidget();
    }
})();

</script>
<!-- N√öT G·ªåI ƒêI·ªÜN RUBY WINGS - ƒê·∫∑t tr∆∞·ªõc th·∫ª ƒë√≥ng </body> -->
<div id="ruby-call-widget" style="position: fixed; z-index: 10001;">
   <button id="ruby-call-button" style="background: linear-gradient(135deg, #00d97e, #00b368) !important; color: white; border: 2px solid white; border-radius: 50%; cursor: pointer; box-shadow: 0 6px 25px rgba(0, 217, 126, 0.4); display: flex; align-items: center; justify-content: center; transition: all 0.3s; outline: none;">
        üìû
    </button>
</div>

<!-- MODAL NH·∫¨P S·ªê ƒêI·ªÜN THO·∫†I -->
<div id="ruby-call-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10002; align-items: center; justify-content: center;">
    <div style="background: linear-gradient(135deg, #1a5f23 0%, #0d3b1a 100%); border-radius: 16px; padding: 30px; width: 90%; max-width: 420px; box-shadow: 0 15px 40px rgba(0,0,0,0.5); border: 2px solid #27ae60;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
            <h3 style="color: white; margin: 0; font-size: 22px; font-weight: 600; text-shadow: 1px 1px 3px rgba(0,0,0,0.3);">üìû G·ªåI CHO CH√öNG T√îI</h3>
            <button id="ruby-close-modal" style="background: none; border: none; font-size: 28px; cursor: pointer; color: white; padding: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s;">√ó</button>
        </div>
        
        <div style="margin-bottom: 25px;">
            <p style="color: white; margin-bottom: 10px; font-size: 16px; font-weight: 500;">Nh·∫≠p s·ªë c·ªßa B·∫°n ƒë·ªÉ g·ªçi ch√∫ng t√¥i:</p>
            <input type="tel" id="ruby-phone-input" 
                   style="width: 100%; padding: 15px; background: white; color: black; border: 3px solid #27ae60; border-radius: 10px; font-size: 18px; font-weight: 500; box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);"
                   placeholder="V√≠ d·ª•: 0332 510 486" 
                   pattern="[0-9]{10,11}">
            <p style="color: #d1e7dd; font-size: 13px; margin-top: 8px; font-weight: 400;">Ch√∫ng t√¥i s·∫Ω g·ªçi l·∫°i cho b·∫°n trong s·ªõm nh·∫•t c√≥ th·ªÉ</p>
        </div>
        
        <div style="display: flex; gap: 12px;">
            <button id="ruby-call-regular" 
                    style="flex: 1; background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%); color: white; border: none; padding: 16px; border-radius: 10px; cursor: pointer; font-size: 17px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); transition: all 0.3s; min-height: 55px;">
                <span style="font-size: 20px;">üìû</span>
                <span>G·ªåI S·ªê</span>
            </button>
            <button id="ruby-call-zalo" 
                    style="flex: 1; background: linear-gradient(135deg, #0068ff 0%, #0052cc 100%); color: white; border: none; padding: 16px; border-radius: 10px; cursor: pointer; font-size: 17px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(0, 104, 255, 0.4); transition: all 0.3s; min-height: 55px;">
                <span><img src="https://img.icons8.com/color/20/000000/zalo.png" style="width: 20px; height: 20px; filter: brightness(0) invert(1);"></span>
                <span>G·ªåI ZALO</span>
            </button>
        </div>
        
        <p id="ruby-call-message" style="margin-top: 20px; text-align: center; font-size: 14px; min-height: 22px; color: white; font-weight: 500;"></p>
    </div>
</div>

<style>
/* ===== STYLES FOR ALL DEVICES ===== */
#ruby-call-widget {
    position: fixed !important;
    z-index: 10001 !important;
}

#ruby-call-button {
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

#ruby-call-button::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
    z-index: -1;
}

#ruby-call-button:hover::after {
    opacity: 1;
}

#ruby-close-modal:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    transform: rotate(90deg);
}

/* D√íNG CODE THAY TH·∫æ */
#ruby-call-regular:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0, 217, 126, 0.6) !important;
    background: linear-gradient(135deg, #00d97e, #00b368) !important;
    filter: brightness(1.1);
}

#ruby-call-zalo:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0, 104, 255, 0.6) !important;
    background: linear-gradient(135deg, #0057d9 0%, #0047b3 100%) !important;
}

/* Input focus effects */
#ruby-phone-input:focus {
    outline: none;
    border-color: #2ecc71 !important;
    box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.3) !important;
}

/* Animation cho modal */
@keyframes rubyModalFadeIn {
    from { 
        opacity: 0; 
        transform: translateY(-30px) scale(0.95); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    }
}

@keyframes rubyButtonPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

#ruby-call-modal > div {
    animation: rubyModalFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Pulsing effect for call button */
.ruby-pulse {
    animation: rubyButtonPulse 2s infinite;
}

/* ===== DESKTOP STYLES (default) ===== */
@media (min-width: 769px) {
    #ruby-call-widget {
        bottom: 105px;
        left: 24px;
    }
    
    #ruby-call-button {
        width: 70px;
        height: 70px;
        font-size: 30px;
    }
}

/* ===== MOBILE STYLES ===== */
@media (max-width: 768px) {
    #ruby-call-widget {
        bottom: 85px;
        left: 15px;
    }
    
    #ruby-call-button {
        width: 60px;
        height: 60px;
        font-size: 26px;
    }
    
    #ruby-call-modal > div {
        padding: 25px !important;
        margin: 15px;
    }
    
    #ruby-phone-input {
        padding: 14px !important;
        font-size: 16px !important;
    }
    
    #ruby-call-regular,
    #ruby-call-zalo {
        padding: 14px !important;
        font-size: 16px !important;
        min-height: 50px !important;
    }
}

/* ===== EXTRA SMALL DEVICES ===== */
@media (max-width: 480px) {
    #ruby-call-widget {
        bottom: 85px;
        left: 15px;
    }
    
    #ruby-call-button {
        width: 60px;
        height: 60px;
        font-size: 24px;
    }
    
    #ruby-call-modal > div {
        padding: 20px !important;
    }
    
    h3 {
        font-size: 20px !important;
    }
}

/* ===== PRINT STYLES (hide on print) ===== */
@media print {
    #ruby-call-widget,
    #ruby-call-modal {
        display: none !important;
    }
}

/* ===== DARK MODE SUPPORT ===== */
@media (prefers-color-scheme: dark) {
    #ruby-phone-input {
        background: white !important;
        color: black !important;
    }
}
</style>

<script>
// Bi·∫øn to√†n c·ª•c ƒë·ªÉ track tr·∫°ng th√°i
let rubyCallWidgetInitialized = false;
let rubyCallWidgetVisible = true;

// S·ªë ƒëi·ªán tho·∫°i c·ªë ƒë·ªãnh c·ªßa c√¥ng ty
const RUBY_WINGS_PHONE = "0332510486";

// H√†m kh·ªüi t·∫°o widget g·ªçi ƒëi·ªán
function initRubyCallWidget() {
    if (rubyCallWidgetInitialized) return;
    rubyCallWidgetInitialized = true;
    
    // DOM Elements
    const callButton = document.getElementById('ruby-call-button');
    const callModal = document.getElementById('ruby-call-modal');
    const closeButton = document.getElementById('ruby-close-modal');
    const phoneInput = document.getElementById('ruby-phone-input');
    const callRegularButton = document.getElementById('ruby-call-regular');
    const callZaloButton = document.getElementById('ruby-call-zalo');
    const messageElement = document.getElementById('ruby-call-message');
    
    // √Åp d·ª•ng positioning cho widget
    function applyWidgetPosition() {
        const widget = document.getElementById('ruby-call-widget');
        if (window.innerWidth >= 769) {
            // Desktop positioning
            widget.style.bottom = '105px';
            widget.style.left = '24px';
        } else {
            // Mobile positioning
            widget.style.bottom = '85px';
            widget.style.left = '15px';
        }
    }
    
    // Apply initial position
    applyWidgetPosition();
    
    // Th√™m hi·ªáu ·ª©ng pulse cho n√∫t
    callButton.classList.add('ruby-pulse');
    
    // M·ªü modal khi click n√∫t g·ªçi ƒëi·ªán
    callButton.addEventListener('click', () => {
        callModal.style.display = 'flex';
        phoneInput.focus();
        phoneInput.select();
        
        // T·∫°m d·ª´ng hi·ªáu ·ª©ng pulse khi m·ªü modal
        callButton.classList.remove('ruby-pulse');
    });
    
    // ƒê√≥ng modal
    closeButton.addEventListener('click', () => {
        callModal.style.display = 'none';
        messageElement.textContent = '';
        phoneInput.value = '';
        
        // Kh√¥i ph·ª•c hi·ªáu ·ª©ng pulse
        setTimeout(() => {
            callButton.classList.add('ruby-pulse');
        }, 500);
    });
    
    // Click b√™n ngo√†i ƒë·ªÉ ƒë√≥ng modal
    callModal.addEventListener('click', (e) => {
        if (e.target === callModal) {
            callModal.style.display = 'none';
            messageElement.textContent = '';
            phoneInput.value = '';
            
            // Kh√¥i ph·ª•c hi·ªáu ·ª©ng pulse
            setTimeout(() => {
                callButton.classList.add('ruby-pulse');
            }, 500);
        }
    });
    
    // ESC key ƒë·ªÉ ƒë√≥ng modal
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && callModal.style.display === 'flex') {
            callModal.style.display = 'none';
            messageElement.textContent = '';
            phoneInput.value = '';
            
            setTimeout(() => {
                callButton.classList.add('ruby-pulse');
            }, 500);
        }
    });
    
    // H√†m l∆∞u lead v√†o h·ªá th·ªëng
    async function saveRubyLead(phoneNumber, callType) {
    const cleanPhone = phoneNumber.replace(/\D/g, '');
    if (cleanPhone.length < 10 || cleanPhone.length > 11) {
        throw new Error('S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p 10-11 ch·ªØ s·ªë');
    }

    // üîë HARD DEDUP: d√πng event_id t·ª´ FE (b·∫Øt bu·ªôc cho CAPI)
    const eventId = getFinalConvEventId('call');
        

    const leadData = {
        event_id: eventId,              // üîí QUAN TR·ªåNG
        phone: cleanPhone,
        source_channel: "Website",
        action_type: "Click Call Button",
        page_url: window.location.href,
        contact_name: "Kh√°ch y√™u c·∫ßu g·ªçi l·∫°i",
        service_interest: "",
        note: callType === 'zalo'
              ? "Kh√°ch y√™u c·∫ßu g·ªçi l·∫°i qua Zalo"
              : "Kh√°ch y√™u c·∫ßu g·ªçi l·∫°i tr·ª±c ti·∫øp"
    };

    const response = await fetch(
        'https://ruby-wings-chatbot-v4.onrender.com/api/save-lead',
        {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(leadData)
        }
    );

    if (!response.ok) {
        throw new Error('L·ªói k·∫øt n·ªëi server. Vui l√≤ng th·ª≠ l·∫°i');
    }

    return { ok: true, event_id: eventId };
}

    


    // H√†m x·ª≠ l√Ω g·ªçi ƒëi·ªán
    async function handleCall(callType = 'regular') {
        const phoneNumber = phoneInput.value.trim();
        
        if (!phoneNumber) {
            messageElement.textContent = '‚ö†Ô∏è Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i';
            messageElement.style.color = '#ffcc00';
            phoneInput.focus();
            return;
        }
        
        // Hi·ªÉn th·ªã tr·∫°ng th√°i ƒëang x·ª≠ l√Ω
        const originalRegularText = callRegularButton.innerHTML;
        const originalZaloText = callZaloButton.innerHTML;
        
        if (callType === 'regular') {
            callRegularButton.innerHTML = '<span style="font-size: 20px;">‚è≥</span><span>ƒêANG X·ª¨ L√ù...</span>';
            callRegularButton.disabled = true;
            callRegularButton.style.opacity = '0.8';
        } else {
            callZaloButton.innerHTML = '<span style="font-size: 20px;">‚è≥</span><span>ƒêANG X·ª¨ L√ù...</span>';
            callZaloButton.disabled = true;
            callZaloButton.style.opacity = '0.8';
        }
        
        messageElement.textContent = '‚è≥ ƒêang l∆∞u th√¥ng tin v√† k·∫øt n·ªëi...';
        messageElement.style.color = '#ffcc00';
        
        try {
            // 1. L∆∞u lead v√†o h·ªá th·ªëng
            const result = await saveRubyLead(phoneNumber, callType);
            // Track Call / Zalo conversion (Meta CAPI)
            fetch('https://ruby-wings-chatbot-v4.onrender.com/api/track-call', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    event_id: result.event_id, 
                    phone: phoneNumber.replace(/\D/g, ''),
                    action: callType === 'zalo' ? 'Zalo Click' : 'Phone Call'
                })
            });


            // 2. Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
            messageElement.innerHTML = '‚úÖ <strong>TH√ÄNH C√îNG!</strong> ƒê√£ g·ª≠i th√¥ng tin';
            messageElement.style.color = '#2ecc71';
            
            // 3. Chuy·ªÉn h∆∞·ªõng ƒë·∫øn cu·ªôc g·ªçi/Zalo C√îNG TY (FIX: G·ªçi ƒë·∫øn s·ªë c√¥ng ty thay v√¨ s·ªë kh√°ch h√†ng)
            setTimeout(() => {
                if (callType === 'zalo') {
                    // M·ªü Zalo C√îNG TY trong tab m·ªõi
                    window.open(`https://zalo.me/${RUBY_WINGS_PHONE}`, '_blank', 'noopener,noreferrer');
                } else {
                    // G·ªçi ƒëi·ªán ƒë·∫øn S·ªê C√îNG TY
                    window.location.href = `tel:${RUBY_WINGS_PHONE}`;
                }
                
                // ƒê√≥ng modal sau 1.5 gi√¢y
                setTimeout(() => {
                    callModal.style.display = 'none';
                    phoneInput.value = '';
                    messageElement.textContent = '';
                    
                    // Kh√¥i ph·ª•c hi·ªáu ·ª©ng pulse
                    setTimeout(() => {
                        callButton.classList.add('ruby-pulse');
                    }, 500);
                }, 1500);
            }, 1000);
            
        } catch (error) {
            // X·ª≠ l√Ω l·ªói
            console.error('Ruby Call Widget Error:', error);
            messageElement.innerHTML = `‚ùå <strong>${error.message}</strong>`;
            messageElement.style.color = '#ff6b6b';
            
            // V·∫´n cho ph√©p g·ªçi n·∫øu API fail (fallback - G·ªåI ƒê·∫æN C√îNG TY)
            setTimeout(() => {
                const userConfirmed = confirm('H·ªá th·ªëng ƒëang b·∫≠n. B·∫°n v·∫´n mu·ªën ti·∫øp t·ª•c g·ªçi kh√¥ng?');
                
                if (userConfirmed) {
                    if (callType === 'zalo') {
                        window.open(`https://zalo.me/${RUBY_WINGS_PHONE}`, '_blank', 'noopener,noreferrer');
                    } else {
                        window.location.href = `tel:${RUBY_WINGS_PHONE}`;
                    }
                    callModal.style.display = 'none';
                    phoneInput.value = '';
                    messageElement.textContent = '';
                }
            }, 2000);
        } finally {
            // Kh√¥i ph·ª•c tr·∫°ng th√°i n√∫t
            if (callType === 'regular') {
                setTimeout(() => {
                    callRegularButton.innerHTML = originalRegularText;
                    callRegularButton.disabled = false;
                    callRegularButton.style.opacity = '1';
                }, 1000);
            } else {
                setTimeout(() => {
                    callZaloButton.innerHTML = originalZaloText;
                    callZaloButton.disabled = false;
                    callZaloButton.style.opacity = '1';
                }, 1000);
            }
        }
    }
    
    // G·∫Øn s·ª± ki·ªán cho n√∫t g·ªçi th∆∞·ªùng
    callRegularButton.addEventListener('click', () => handleCall('regular'));
    
    // G·∫Øn s·ª± ki·ªán cho n√∫t g·ªçi Zalo
    callZaloButton.addEventListener('click', () => handleCall('zalo'));
    
    // Cho ph√©p nh·∫•n Enter ƒë·ªÉ g·ªçi th∆∞·ªùng
    phoneInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            handleCall('regular');
        }
    });
    
    // Auto-format s·ªë ƒëi·ªán tho·∫°i
    phoneInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length > 0) {
            if (value.length <= 4) {
                value = value;
            } else if (value.length <= 7) {
                value = `${value.slice(0, 4)} ${value.slice(4)}`;
            } else {
                value = `${value.slice(0, 4)} ${value.slice(4, 7)} ${value.slice(7, 11)}`;
            }
        }
        
        e.target.value = value;
    });
    
    // ƒêi·ªÅu ch·ªânh v·ªã tr√≠ n·∫øu c√≥ chatbot
    function adjustPositionForChatbot() {
        const chatWidget = document.querySelector('#chatWidget, .chat-widget, [id*="chat"], [class*="chat"], .tawk-button, .zalo-chat-widget');
        if (chatWidget) {
            const chatRect = chatWidget.getBoundingClientRect();
            const callWidget = document.getElementById('ruby-call-widget');
            
            // ƒê·∫∑t n√∫t g·ªçi ƒëi·ªán cao h∆°n n√∫t chatbot 80px
            callWidget.style.bottom = `${chatRect.height + 80}px`;
        }
    }
    
    // Re-apply position on resize
    window.addEventListener('resize', () => {
        applyWidgetPosition();
        adjustPositionForChatbot();
    });
    
    // Ki·ªÉm tra v√† ƒëi·ªÅu ch·ªânh m·ªói 1 gi√¢y (ph√≤ng tr∆∞·ªùng h·ª£p chatbot load sau)
    const positionCheckInterval = setInterval(() => {
        adjustPositionForChatbot();
    }, 1000);
    
    // Initial adjustments
    setTimeout(() => {
        adjustPositionForChatbot();
    }, 1000);
    
    console.log('‚úÖ Ruby Call Widget ƒë√£ s·∫µn s√†ng - Phi√™n b·∫£n ho√†n thi·ªán');
}

// Kh·ªüi t·∫°o khi DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initRubyCallWidget);
} else {
    initRubyCallWidget();
}

// ƒê·∫£m b·∫£o widget v·∫´n ho·∫°t ƒë·ªông khi chuy·ªÉn trang trong SPA
document.addEventListener('click', (e) => {
    if (e.target.matches('a[href*="#"]') || e.target.closest('a[href*="#"]')) {
        // Gi·ªØ widget hi·ªÉn th·ªã khi chuy·ªÉn anchor link
        setTimeout(() => {
            if (window.rubyCallWidgetInitialized) {
                const widget = document.getElementById('ruby-call-widget');
                widget.style.display = 'block';
            }
        }, 100);
    }
});

// Ch·ªëng ·∫©n widget khi scroll
window.rw_lastScrollTop = 0;
window.addEventListener('scroll', () => {
    const st = window.pageYOffset || document.documentElement.scrollTop;
    
    // Lu√¥n hi·ªÉn th·ªã widget, kh√¥ng ·∫©n khi scroll
    const widget = document.getElementById('ruby-call-widget');
    if (widget) {
        widget.style.display = 'block';
        widget.style.opacity = '1';
    }  
    window.rw_lastScrollTop = st <= 0 ? 0 : st;
}, false);
</script>
</body>
</html>
