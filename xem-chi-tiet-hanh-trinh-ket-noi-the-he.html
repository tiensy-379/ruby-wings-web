<!DOCTYPE html>
<html lang="vi">
<head>
<script src="/js/rw-event-id.js" defer></script>

<!-- ================= META CLIENT PARAM BUILDER ================= -->
<script>
window.addEventListener('load', function () {
  var s = document.createElement('script');
  s.src = 'https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js';
  s.onload = function () {
    try {
      if (!window.RW_EVENT_ID && window.crypto && crypto.randomUUID) {
        window.RW_EVENT_ID = crypto.randomUUID();
      }

      if (window.clientParamBuilder) {
        clientParamBuilder.processAndCollectAllParams(
          window.location.href,
          function () { return ''; }
        );
      }
    } catch (e) {
      console.warn('CAPI init failed', e);
    }
  };
  document.body.appendChild(s);
});
</script>

<!-- ================= CONVERSION EVENT ID STORE ================= -->
<script>
window.RW_FINAL_CONV_EVENTS = {};

function getFinalConvEventId(action) {
  const key = 'rw_final_' + action;

  let eid = sessionStorage.getItem(key);
  if (eid) return eid;

  if (window.RW_FINAL_CONV_EVENTS[action]) {
    return window.RW_FINAL_CONV_EVENTS[action];
  }

  eid =
    (window.crypto && crypto.randomUUID)
      ? crypto.randomUUID()
      : 'rw_' + Date.now() + '_' + Math.random().toString(36).slice(2);

  window.RW_FINAL_CONV_EVENTS[action] = eid;
  sessionStorage.setItem(key, eid);

  return eid;
}
</script>

<!-- ================= FETCH HEADER (PAGEVIEW ONLY) ================= -->
<script>
(function () {
  if (!window.fetch || !window.RW_EVENT_ID) return;

  var originalFetch = window.fetch;
  window.fetch = function (url, options) {
    options = options || {};
    options.headers = options.headers || {};
    options.headers['X-RW-EVENT-ID'] = window.RW_EVENT_ID;
    return originalFetch(url, options);
  };
})();
</script>

<!-- ================= GOOGLE TAG MANAGER ================= -->
<script>
(function(w,d,s,l,i){
  w[l]=w[l]||[];
  w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
  var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),
      dl=l!='dataLayer'?'&l='+l:'';
  j.async=true;
  j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
  f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KNFLM3CR');
</script>

<!-- ================= META PIXEL ================= -->
<script>
!function(f,b,e,v,n,t,s){
if(f.fbq)return;
n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];
t=b.createElement(e);t.async=!0;t.src=v;
s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)
}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');

fbq('init','862531473384426',{}, {autoConfig:false});
fbq('set','autoConfig','862531473384426',false);

if (window.RW_EVENT_ID) {
  fbq('track','PageView');
}
</script>

<!-- ================= PIXEL CONVERSIONS ================= -->
<script>
(function () {
  if (!window.fbq) return;

  /* CALL */
  document.addEventListener('click', function (e) {
    var btn = e.target.closest && e.target.closest('#ruby-call-regular');
    if (!btn) return;
    fbq('trackCustom','CallButtonClick',{},{
      eventID: getFinalConvEventId('call')
    });
  });

  /* FORM – LEAD (SUBMIT THẬT) */
  document.addEventListener('submit', function (e) {
    if (!e.target || e.target.tagName !== 'FORM') return;
    var eid = getFinalConvEventId('lead');
    fbq('track','Lead',{}, { eventID: eid });
  });

  fbq('consent','revoke');
  fbq('consent','grant');
})();
</script>

<!-- ================= CONTACT / CHAT CAPI ================= -->
<script>
(function () {
  function sendContact(source, phone, eventId) {
    fetch('https://ruby-wings-chatbot.onrender.com/api/track-contact', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        event_id: eventId,
        phone: phone || '',
        source: source
      })
    });
  }

  /* ZALO – CAPI (1 LẦN / PHIÊN) */
  document.addEventListener('click', function (e) {
    var zalo = e.target.closest && e.target.closest('#rw-zalo-round-btn');
    if (!zalo) return;

    if (sessionStorage.getItem('rw_zalo_capi_sent')) return;
    sessionStorage.setItem('rw_zalo_capi_sent', '1');

    sendContact(
      'Zalo Contact',
      '84332510486',
      getFinalConvEventId('zalo')
    );
  });

  /* CHATBOT – CAPI (1 LẦN / PHIÊN) */
  document.addEventListener('click', function (e) {
    var chat = e.target.closest && e.target.closest('.rw-chat-btn, .rw-chat-btn-isolated');
    if (!chat) return;

    if (sessionStorage.getItem('rw_chat_capi_sent')) return;
    sessionStorage.setItem('rw_chat_capi_sent', '1');

    sendContact(
      'Chatbot Contact',
      '',
      getFinalConvEventId('chat')
    );
  });
})();
</script>


<!-- ========================================================= -->
<!-- 5. KHÔNG GTM – KHÔNG DOUBLE TRACKING -->
<!-- ========================================================= -->

    <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
    <link rel="manifest" href="icon/site.webmanifest">
    <link rel="shortcut icon" href="icon/favicon.ico">
    <meta name="theme-color" content="#ffffff">
    <meta name="facebook-domain-verification" content="9tvsczh90ochfhg9byyr544ixf080p" />
    <link type="text/plain" rel="author" href="/humans.txt" />

    <!-- === META TAGS SEO TỐI ƯU HOÀN CHỈNH === -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    
    <!-- Title & Description Tối ưu -->
    <title>Ngọn Lửa Trường Sơn - Ký ức và khát vọng: Hành trình 2N1Đ Trường Sơn Quảng Trị | Ruby Wings</title>
    <meta name="description" content="Hành trình 'Ngọn Lửa Trường Sơn - Ký ức và khát vọng': Nghĩa trang Trường Sơn, Nhà tù Lao Bảo, Thành cổ Quảng Trị, Thánh địa La Vang, trải nghiệm giao lưu văn hóa đồng bào Vân Kiều - Pa Kô, lửa trại đêm Trường Sơn - Kết nối ký ức lịch sử, văn hóa và phát triển bền vững.">
    <meta name="keywords" content="tour Trường Sơn Quảng Trị, hành trình ngọn lửa Trường Sơn, ký ức và khát vọng, Nghĩa trang Trường Sơn, Thành cổ Quảng Trị, giao lưu văn hóa Vân Kiều Pa Kô, lửa trại Trường Sơn, Ruby Wings Travel">
    
    <!-- Canonical & Alternate URLs -->
    <link rel="canonical" href="https://rubywings.vn/ngon-lua-truong-son.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rubywings.vn/ngon-lua-truong-son.html">
    <meta property="og:title" content="Ngọn Lửa Trường Sơn - Ký ức và khát vọng: Hành trình 2N1Đ Trường Sơn Quảng Trị - Ruby Wings">
    <meta property="og:description" content="Hành trình 2 ngày 1 đêm: Nghĩa trang Trường Sơn, Nhà tù Lao Bảo, Thành cổ Quảng Trị, Thánh địa La Vang, giao lưu văn hóa đồng bào Vân Kiều - Pa Kô, lửa trại đêm Trường Sơn - Kết nối ký ức lịch sử, văn hóa và phát triển bền vững.">
    <meta property="og:image" content="https://rubywings.vn/images/lua-trai-1.jpg">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ngọn Lửa Trường Sơn - Ký ức và khát vọng: Hành trình 2N1Đ Trường Sơn Quảng Trị - Ruby Wings">
    <meta name="twitter:description" content="Tour 2 ngày: Nghĩa trang Trường Sơn, Nhà tù Lao Bảo, Thành cổ Quảng Trị, Thánh địa La Vang, giao lưu văn hóa đồng bào Vân Kiều - Pa Kô, lửa trại đêm Trường Sơn.">
    <meta name="twitter:image" content="https://rubywings.vn/images/lua-trai-1.jpg">
    
   <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://rubywings.vn/#organization",
      "name": "Ruby Wings Travel",
      "url": "https://rubywings.vn/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://rubywings.vn/images/logofxf.png"
      },
      "description": "Ruby Wings là hệ sinh thái phát triển con người toàn diện, chuyên về du lịch cảm xúc và trải nghiệm chữa lành nội tâm thông qua thiền, khí công và kết nối thiên nhiên, hướng đến giá trị chuẩn mực, chân thành và có chiều sâu.",
      "slogan": "Bay lên từ bên trong – Hành trình trải nghiệm có chiều sâu, nơi không chỉ đến một nơi mà còn có thể trở về với chính mình",
      "sameAs": [
        "https://www.facebook.com/profile.php?id=61563772112138",
        "https://www.facebook.com/tien.sy.5011/",
        "https://www.instagram.com/tiensyrubywings",
        "https://www.tiktok.com/@syluong379",
        "https://www.youtube.com/@rubywing-slsa",
        "https://www.linkedin.com/in/ti%E1%BA%BFn-s%E1%BB%B1-l%C6%A1ng-9a0292387"
        ],
      "telephone": "+84-332-510-486",
      "email": "rubywingslsa@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "148 Trương Gia Mô, Vỹ Dạ",
        "addressLocality": "Thành phố Huế",
        "addressRegion": "Thừa Thiên Huế",
        "postalCode": "530000",
        "addressCountry": "VN"
      },
      "founder": {
        "@type": "Person",
        "name": "Lương Tiến Sỹ",
        "jobTitle": "Founder & CEO",
        "url": "https://www.facebook.com/tien.sy.5011/"
      },
      "knowsAbout": [
        "Du lịch chữa lành",
        "Du lịch cảm xúc",
        "Thiền chánh niệm khoa học",
        "Khí công trị liệu",
        "Retreat nội tâm",
        "Phát triển con người toàn diện",
        "Giáo dục lịch sử gắn với trải nghiệm"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "https://rubywings.vn/#website",
      "url": "https://rubywings.vn/",
      "name": "Ruby Wings Travel – Hành trình trải nghiệm cảm xúc",
      "publisher": {
        "@id": "https://rubywings.vn/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://rubywings.vn/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "WebPage",
      "@id": "https://rubywings.vn/ngon-lua-truong-son.html#webpage",
      "url": "https://rubywings.vn/ngon-lua-truong-son.html",
      "name": "Ngọn Lửa Trường Sơn – Ký ức và khát vọng: Hành trình 2N1Đ Trường Sơn Quảng Trị",
      "description": "Hành trình du lịch trải nghiệm kết nối ký ức lịch sử và văn hóa: Nghĩa trang Trường Sơn, Nhà tù Lao Bảo, Thành cổ Quảng Trị, Thánh địa La Vang, trải nghiệm giao lưu văn hóa đồng bào Vân Kiều - Pa Kô, lửa trại đêm Trường Sơn - Kết nối ký ức lịch sử, văn hóa và phát triển bền vững.",
      "isPartOf": {
        "@id": "https://rubywings.vn/#website"
      },
      "about": {
        "@id": "https://rubywings.vn/#organization"
      },
      "audience": {
        "@type": "PeopleAudience",
        "audienceType": [
          "Đoàn cựu chiến binh",
          "Nhóm bạn",
          "Gia đình",
          "Người yêu lịch sử",
          "Người tìm kiếm trải nghiệm văn hóa sâu sắc"
        ]
      },
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://rubywings.vn/images/lua-trai-1.jpg"
      },
      "mainContentOfPage": {
        "@type": "WebPageElement",
        "name": "Nội dung hành trình du lịch trải nghiệm lịch sử và văn hóa Trường Sơn"
      }
    },
    {
      "@type": "Service",
      "@id": "https://rubywings.vn/ngon-lua-truong-son.html#service",
      "name": "Ngọn Lửa Trường Sơn – Ký ức và khát vọng",
      "serviceType": "Du lịch trải nghiệm lịch sử kết hợp văn hóa và tri ân",
      "description": "Hành trình 2 ngày 1 đêm kết nối ký ức lịch sử và văn hóa tại Trường Sơn Quảng Trị, kết hợp tham quan di tích lịch sử, giao lưu văn hóa đồng bào Vân Kiều - Pa Kô, lửa trại đêm Trường Sơn, thiền khí công và các hoạt động tri ân.",
      "provider": {
        "@id": "https://rubywings.vn/#organization"
      },
      "areaServed": {
        "@type": "Country",
        "name": "Việt Nam"
      },
      "audience": {
        "@type": "PeopleAudience",
        "suggestedMinAge": 18,
        "suggestedMaxAge": 75,
        "audienceType": "Đoàn cựu chiến binh, nhóm bạn, gia đình, người yêu lịch sử và văn hóa dân tộc"
      },
      "availableChannel": {
        "@type": "ServiceChannel",
        "serviceLocation": {
          "@type": "Place",
          "name": "Việt Nam"
        }
      },
      "offers": {
        "@type": "Offer",
        "availability": "https://schema.org/InStock",
        "category": "Tour du lịch trải nghiệm lịch sử"
      },
      "additionalProperty": [
        {
          "@type": "PropertyValue",
          "name": "itinerary",
          "value": "Future itinerary data to be added"
        },
        {
          "@type": "PropertyValue",
          "name": "duration",
          "value": "2 ngày 1 đêm"
        },
        {
          "@type": "PropertyValue",
          "name": "pricing",
          "value": "Liên hệ để biết chi tiết"
        }
      ]
    },
    {
      "@type": "FAQPage",
      "@id": "https://rubywings.vn/ngon-lua-truong-son.html#faq",
      "isPartOf": {
        "@id": "https://rubywings.vn/ngon-lua-truong-son.html#webpage"
      },
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Hành trình này có phù hợp với đoàn cựu chiến binh không?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Hoàn toàn phù hợp. Hành trình được thiết kế đặc biệt cho các cựu chiến binh, với các điểm tham quan mang tính lịch sử, cơ hội gặp gỡ nhân chứng và giao lưu với đồng bào dân tộc, tạo không gian tri ân và hồi tưởng."
          }
        },
        {
          "@type": "Question",
          "name": "Tôi cần chuẩn bị gì cho đêm lửa trại và giao lưu văn hóa?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Nên mang trang phục thoải mái, ấm áp cho đêm lửa trại. Tâm thế cởi mở để tham gia các hoạt động giao lưu, múa hát cùng đồng bào. Có thể chuẩn bị một số món quà nhỏ (không bắt buộc) để tặng trong giao lưu."
          }
        },
        {
          "@type": "Question",
          "name": "Hành trình có các hoạt động thiền, khí công không?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Có, vào buổi sáng ngày thứ 2, đoàn sẽ tham gia các bài tập thiền - khí công đơn giản dưới sự hướng dẫn của nhân viên chuyên môn Ruby Wings, giúp cân bằng năng lượng và kết nối với thiên nhiên Trường Sơn."
          }
        }
      ]
    }
  ]
}
</script>

    <!-- Preload Critical Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* === Biến CSS Nâng Cao === */
        :root {
            --color-primary: #0b562a;
            --color-primary-light: #2bb559;
            --color-secondary: #f21970;
            --color-secondary-light: #f84288;
            --color-accent: #ebaf16;
            --color-dark: #2F4F4F;
            --color-light: #F5F5F0;
            --color-nature: #0b8b34;
            --color-fresh-pink: #f0ecee;
            --color-dark-blue: #9cf379;
            --color-search-green: #8bc34a;
            --color-healing-green: #e8f5e9;
            --color-nature-light: #a0d8b0;
            --color-text-dark: #333;
            --color-text-light: #fff;
            
            --gradient-primary: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-secondary-light) 100%);
            --gradient-nature: linear-gradient(135deg, #44ba46 0%, var(--color-primary) 100%);
            --gradient-header: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
            --gradient-logo: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 50%, var(--color-accent) 100%);
            --gradient-hero: linear-gradient(135deg, rgba(139, 0, 0, 0.85) 0%, rgba(178, 34, 34, 0.75) 100%);
            
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            --font-special: 'Inter', sans-serif;
            
            --box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            --box-shadow-hover: 0 10px 25px rgba(0,0,0,0.15);
            --box-shadow-logo: 0 8px 25px rgba(139, 46, 82, 0.3);
            --box-shadow-card: 0 8px 30px rgba(0,0,0,0.12);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 12px;
            --border-radius-lg: 20px;
        }
       
        /* === Reset & Base Styles === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: var(--font-body);
            color: var(--color-text-dark);
            line-height: 1.6;
            overflow-x: hidden;
            background-color: #f0f0f0;
            text-align: justify;
            text-justify: inter-word;
            font-size: 16px;
        }
       
        h1, h2, h3, h4 {
            font-family: var(--font-heading);
            margin-bottom: 15px;
            line-height: 1.2;
            text-align: center;
            font-weight: 700;
        }
       
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
       
        ul {
            list-style: none;
        }
       
        a {
            text-decoration: none;
            color: inherit;
            transition: var(--transition);
        }
       
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Text Justification */
        p, .text-justify {
            text-align: justify;
            text-justify: inter-word;
        }
       
        /* === HIỆU ỨNG NÚT NÂNG CAO === */
        .btn {
            display: inline-block;
            background: var(--gradient-primary);
            color: white;
            padding: 14px 32px;
            border-radius: 30px;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
            font-family: var(--font-body);
        }
       
        .btn:hover {
            background: var(--gradient-secondary);
            transform: translateY(-3px);
            box-shadow: var(--box-shadow-hover);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .btn:focus:not(:active)::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        /* === HEADER NÂNG CẤP CAO CẤP === */
        header {
            background: var(--gradient-header);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 30px rgba(0,0,0,0.1);
            transition: var(--transition-slow);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0;
        }
       
        header.sticky {
            background: var(--gradient-header);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            padding: 5px 0;
        }

        header.hidden {
            transform: translateY(-100%);
        }
       
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            max-width: 1900px;
            margin: 0 auto;
            position: relative;
        }
       
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
            position: relative;
            z-index: 1001;
        }

        .logo:hover {
            transform: translateY(-2px);
        }
       
        .logo-image-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
            padding: 5px;
            box-shadow: var(--box-shadow-logo);
            transition: var(--transition);
            overflow: hidden;
        }

        .logo-image-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient-logo);
            border-radius: 50%;
            z-index: -1;
            opacity: 0.7;
            filter: blur(10px);
        }

        .logo:hover .logo-image-container {
            transform: scale(1.05) rotate(5deg);
            box-shadow: 0 12px 30px rgba(46, 139, 87, 0.4);
        }

        .logo img {
            height: 90px;
            width: 90px;
            border-radius: 50%;
            transition: var(--transition);
            filter: brightness(1.1) contrast(1.1);
            object-fit: cover;
        }

        .logo:hover img {
            transform: scale(1.05);
        }

        .logo-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .logo-main {
            font-size: 2.2rem;
            font-weight: 800;
            color: #ff1493;
            letter-spacing: -0.5px;
            font-family: var(--font-heading);
            line-height: 1;
            margin-bottom: 4px;
            background: white;
            padding: 5px 15px;
            border-radius: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            white-space: nowrap;
        }

        .logo-tagline {
            font-size: 1.1rem;
            color: var(--color-dark-blue);
            font-style: italic;
            font-weight: 500;
            line-height: 1.2;
            text-align: left;
            position: relative;
            padding-left: 0;
        }

        /* Xoá gạch đứng màu hồng bên trái */
        .logo-tagline::before {
            content: none;
        }
       
        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }
       
        .nav-links a {
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
            transition: var(--transition);
            position: relative;
            padding: 10px 5px;
            font-family: var(--font-body);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
       
        .nav-links a:hover {
            color: var(--color-secondary);
            transform: translateY(-2px);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, white, var(--color-secondary));
            bottom: -2px;
            left: 50%;
            border-radius: 2px;
            transition: var(--transition);
            transform: translateX(-50%);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links a.active {
            color: var(--color-secondary);
            font-weight: 700;
        }

        .nav-links a.active::after {
            width: 100%;
            background: var(--color-secondary);
        }

        /* Enhanced Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            transition: var(--transition);
            border: 2px solid transparent;
            z-index: 1001;
        }

        .mobile-menu-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: white;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Enhanced Mobile Navigation */
        .nav-mobile {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--gradient-header);
            flex-direction: column;
            padding: 100px 20px 20px;
            z-index: 999;
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .nav-mobile.active {
            transform: translateX(0);
            display: flex;
        }

        .nav-mobile a {
            padding: 18px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            transition: var(--transition);
            position: relative;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 8px;
            margin: 5px 0;
        }

        .nav-mobile a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-secondary);
            padding-left: 30px;
            transform: translateX(5px);
        }

        .nav-mobile a::before {
            content: '›';
            position: absolute;
            left: 15px;
            opacity: 0;
            transition: var(--transition);
            color: var(--color-secondary);
            font-weight: bold;
        }

        .nav-mobile a:hover::before {
            opacity: 1;
            left: 20px;
        }

        .nav-mobile a:last-child {
            border-bottom: none;
        }

        /* Overlay for mobile menu */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* === STYLES RIÊNG CHO TRANG TOUR === */
        
        /* Hero Section */
        .tour-hero {
            background: linear-gradient(rgba(139, 0, 0, 0.85), rgba(178, 34, 34, 0.75)), url('images/lua-trai-1.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            padding: 160px 0 100px;
            text-align: center;
            margin-top: 140px;
            position: relative;
            overflow: hidden;
        }
        
        .tour-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="rgba(255,255,255,0.1)"><path d="M500 50Q550 0 600 50T700 50T800 50T900 50T1000 50V100H0V50Q100 50 200 50T300 50T400 50T500 50Z"/></svg>');
            background-size: cover;
            background-position: bottom;
        }
        
        .tour-hero-content {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        
        .tour-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 25px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
            line-height: 1.1;
        }
        
        .tour-hero p {
            font-size: 1.3rem;
            margin-bottom: 35px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            animation: fadeInUp 1s ease-out 0.2s both;
            line-height: 1.6;
        }
        
        .tour-tag {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 12px 30px;
            border-radius: 30px;
            margin-bottom: 25px;
            font-weight: 600;
            backdrop-filter: blur(10px);
            animation: fadeInUp 1s ease-out 0.4s both;
            font-size: 1.1rem;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .tour-hero .btn {
            font-size: 1.2rem;
            padding: 16px 40px;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        /* Section Styles */
        .tour-section {
            padding: 100px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 60px;
        }
       
        .section-title h2 {
            font-size: 2.8rem;
            color: var(--color-dark);
            position: relative;
            display: inline-block;
            padding-bottom: 15px;
        }
       
        .section-title h2::after {
            content: '';
            position: absolute;
            width: 60%;
            height: 4px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
            bottom: 0;
            left: 20%;
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        .section-title h2:hover::after {
            width: 80%;
        }
        
        /* Giới thiệu Tour */
        .tour-intro {
            background-color: var(--color-healing-green);
            position: relative;
        }
        
        .intro-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }
        
        .intro-text {
            font-size: 1.15rem;
        }
        
        .intro-text p {
            margin-bottom: 18px;
        }
        
        .intro-image {
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--box-shadow-hover);
            position: relative;
        }
        
       .intro-image img {
width: 100%;
height: 500px;
object-fit: cover;
transition: var(--transition-slow);
}

@media (max-width: 768px) {
.intro-image img {
height: auto;
aspect-ratio: 16/9;
max-height: 300px;
object-fit: cover;
object-position: center;
}
}
        
        .intro-image:hover img {
            transform: scale(1.05);
        }
        
        .intro-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(139, 0, 0, 0.1), rgba(242, 25, 112, 0.1));
            opacity: 0;
            transition: var(--transition);
        }
        
        .intro-image:hover::after {
            opacity: 1;
        }
        
        /* Điểm nổi bật */
        .tour-highlights {
            background: white;
            position: relative;
        }
        
        .highlights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }
        
        .highlight-card {
            background: white;
            padding: 40px 30px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-card);
            transition: var(--transition);
            text-align: center;
            border-top: 5px solid var(--color-primary);
            position: relative;
            overflow: hidden;
        }
        
        .highlight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: var(--transition);
        }
        
        .highlight-card:hover {
            transform: translateY(-15px);
            box-shadow: var(--box-shadow-hover);
            border-top-color: var(--color-secondary);
        }
        
        .highlight-card:hover::before {
            transform: scaleX(1);
        }
        
        .highlight-icon {
            font-size: 3rem;
            color: var(--color-secondary);
            margin-bottom: 25px;
            display: inline-block;
            padding: 20px;
            border-radius: 50%;
            background: rgba(242, 25, 112, 0.1);
            transition: var(--transition);
        }
        
        .highlight-card:hover .highlight-icon {
            transform: scale(1.1) rotate(5deg);
            background: rgba(242, 25, 112, 0.2);
        }
        
        .highlight-card h3 {
            color: var(--color-dark);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .highlight-card p {
            color: #666;
            line-height: 1.7;
        }
        
        /* Lịch trình */
        .tour-itinerary {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            position: relative;
        }
        
        .timeline {
position: relative;
max-width: 1200px;
margin: 0 auto;
}
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 30px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--gradient-primary);
            border-radius: 3px;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 50px;
            padding-left: 100px;
        }
        
        .timeline-time {
            position: absolute;
            left: 0;
            top: 0;
            background: var(--color-primary);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 700;
            min-width: 120px;
            text-align: center;
            box-shadow: var(--box-shadow);
            z-index: 2;
        }
        
        .timeline-content {
            background: white;
            padding: 35px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--box-shadow-card);
            transition: var(--transition);
            position: relative;
            border-left: 4px solid var(--color-primary);
        }
        
        .timeline-content::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 25px;
            width: 20px;
            height: 3px;
            background: var(--color-primary);
        }
        
        .timeline-content:hover {
            transform: translateX(15px);
            box-shadow: var(--box-shadow-hover);
            border-left-color: var(--color-secondary);
        }
        
        .timeline-content h3 {
            color: var(--color-secondary);
            margin-bottom: 15px;
            text-align: left;
            font-size: 1.4rem;
        }
        
        .timeline-content p {
            color: #555;
            line-height: 1.7;
        }
        
        /* Thông tin giá */
        .tour-pricing {
            background: var(--gradient-primary);
            color: white;
            position: relative;
        }
        
        .tour-pricing .section-title h2 {
            color: white;
        }
        
        .tour-pricing .section-title h2::after {
            background: linear-gradient(90deg, white, var(--color-accent));
        }
        
        @media (min-width: 769px) {
    .pricing-content {
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
    }
}

        
        .included, .excluded, .policies {
            background: rgba(255,255,255,0.15);
            padding: 28px 26px;
            border-radius: var(--border-radius-lg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: var(--transition);
        }
        
        .included:hover, .excluded:hover, .policies:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-5px);
        }
        
        .included h3, .excluded h3, .policies h3 {
            color: var(--color-accent);
            margin-bottom: 18px;
            text-align: left;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .included h3::before {
            content: '✓';
            color: #90EE90;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .excluded h3::before {
            content: '✗';
            color: #ff6b6b;
            font-weight: bold;
            font-size: 1.3rem;
        }

        .policies h3::before {
            content: 'ℹ';
            color: #ffffff;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .included ul, .excluded ul, .policies ul {
            list-style-type: none;
        }
        
        .included li, .excluded li, .policies li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.12);
            line-height: 1.6;
        }
        
        .included li:last-child, .excluded li:last-child, .policies li:last-child {
            border-bottom: none;
        }

        .included li strong,
        .excluded li strong,
        .policies li strong {
            color: #ffe08a;
            font-weight: 700;
        }
        
        .pricing-cta {
            text-align: center;
            margin-top: 45px;
        }
        
        .pricing-cta .btn {
            background: var(--color-accent);
            color: var(--color-dark);
            font-size: 1.3rem;
            padding: 18px 50px;
            font-weight: 700;
        }
        
        .pricing-cta .btn:hover {
            background: white;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }
        
        .pricing-note {
            text-align: center;
            margin-top: 15px;
            font-style: italic;
            opacity: 0.9;
        }
        
        /* FAQ Section */
        .tour-faq {
            background: white;
            position: relative;
        }
        
        @media (min-width: 769px) {
    .faq-content {
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
    }
}

        
        .faq-item {
            margin-bottom: 25px;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--box-shadow-card);
            transition: var(--transition);
            border: 1px solid #f0f0f0;
        }
        
        .faq-item:hover {
            box-shadow: var(--box-shadow-hover);
        }
        
        .faq-question {
            background: var(--color-healing-green);
            padding: 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            transition: var(--transition);
            font-size: 1.1rem;
        }
        
        .faq-question:hover {
            background: var(--color-nature-light);
        }
        
        .faq-answer {
            padding: 0 25px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.3s ease;
            background: white;
        }
        
        .faq-item.active .faq-answer {
            padding: 25px;
            max-height: 500px;
        }
        
        .faq-item.active .faq-question {
            background: var(--color-primary);
            color: white;
        }
        
        .faq-toggle {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
        }
        
        .faq-item.active .faq-toggle {
            transform: rotate(180deg);
        }
        
        /* Nút "Xem các hành trình khác" */
        .other-tours-btn {
            display: block;
            background: var(--gradient-primary);
            color: white;
            padding: 16px 40px;
            border-radius: 30px;
            font-weight: 700;
            text-align: center;
            margin: 30px auto 20px;
            max-width: 400px;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            font-size: 1.1rem;
        }
        
        .other-tours-btn:hover {
            background: var(--gradient-secondary);
            transform: translateY(-5px);
            box-shadow: var(--box-shadow-hover);
        }
        
        /* Nút tư vấn */
        .consultation-btn-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 9998;
        }
        
        .consultation-btn {
            display: flex;
            align-items: center;
            background: var(--gradient-secondary);
            color: white;
            padding: 18px 30px;
            border-radius: 50px;
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(242, 25, 112, 0.4);
            transition: var(--transition);
            font-size: 1.1rem;
        }
        
        .consultation-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(242, 25, 112, 0.6);
        }
        
        .consultation-btn i {
            margin-right: 12px;
            font-size: 1.3rem;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Lazy loading for images */
        .lazy-image {
            opacity: 0;
            transition: opacity 0.8s ease;
        }
        
        .lazy-image.loaded {
            opacity: 1;
        }

        /* Footer Styles */
        footer {
            background: #0b562a;
            color: white;
            padding: 60px 0 30px;
            position: relative;
            text-align: left;
            border-top: 5px solid var(--color-secondary);
        }
       
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 50px;
            margin-bottom: 40px;
        }
       
        .footer-column h3 {
            color: var(--color-accent);
            margin-bottom: 25px;
            position: relative;
            padding-bottom: 15px;
            font-size: 1.5rem;
            text-align: left;
        }
       
        .footer-column h3::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 3px;
            background: var(--color-accent);
            bottom: 0;
            left: 0;
        }
       
        .footer-column p {
            margin-bottom: 20px;
            font-size: 1rem;
            text-align: left;
            line-height: 1.7;
        }
       
        .contact-info {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
            text-align: left;
        }
       
        .social-links-grid {
display: flex;
flex-direction: row;
gap: 10px;
justify-content: flex-start;
flex-wrap: nowrap;
margin-top: 20px;
overflow-x: auto;
overflow-y: hidden;
padding: 5px 0 15px 0;
width: 100%;
-webkit-overflow-scrolling: touch;
scrollbar-width: thin;
}

.social-row {
display: flex;
gap: 10px;
flex-wrap: nowrap;
justify-content: flex-start;
width: 100%;
padding-right: 20px;
}

        .social-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            color: white !important;
            text-decoration: none;
            transition: var(--transition);
            font-size: 18px;
            flex-shrink: 0;
            opacity: 1;
            visibility: visible;
        }

        .social-icon:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .social-icon.facebook {
            background-color: #3b5998;
        }

       .social-icon.facebook-personal {
background-color: #3b5998;
}

        .social-icon.twitter {
            background-color: #1da1f2;
        }

        .social-icon.instagram {
            background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        }

        .social-icon.tiktok {
            background-color: #000000;
        }

        .social-icon.linkedin {
            background-color: #0077b5;
        }

        .social-icon.whatsapp {
            background-color: #25D366;
        }

        .social-icon.zalo {
            background-color: #0068FF;
            padding: 5px;
        }

        .social-icon.youtube {
            background-color: #f01281;
        }

        .social-icon.messenger {
            background: linear-gradient(135deg, #0084FF 0%, #00C6FF 100%);
        }

        .zalo-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            object-fit: cover;
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 1rem;
            opacity: 0.8;
        }
        
        .community-btn {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 25px;
            background-color: var(--color-secondary);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .community-btn:hover {
            background-color: var(--color-secondary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(0,0,0,0.2);
        }

        /* === Responsive Design === */
        @media (max-width: 1200px) {
            .header-container {
                padding: 12px 20px;
            }
            
            .nav-links {
                gap: 25px;
            display: none;
            position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: var(--gradient-header);
                flex-direction: column;
                padding: 100px 20px 20px;
                z-index: 999;
                transform: translateX(-100%);
                transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }

            .nav-links.active {
                transform: translateX(0);
                display: flex;
            }

            .mobile-menu-toggle {
                display: flex;
            }

            .intro-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }
            
            .pricing-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .tour-hero h1 {
                font-size: 2.8rem;
            }
            
            .highlights-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }
        
       @media (max-width: 768px) {
.tour-hero {
margin-top: 100px;
padding: 80px 0 60px;
background-attachment: scroll;
aspect-ratio: 16/9;
height: auto;
min-height: 0;
background-size: cover;
background-position: center center;
}
            
            .tour-hero h1 {
                font-size: 2.3rem;
            }
            
            .tour-hero p {
                font-size: 1.1rem;
            }
            
            .tour-section {
                padding: 80px 0;
            }
            
            .section-title h2 {
                font-size: 2.2rem;
            }
            
            .timeline::before {
                display: none;
            }
            
            .timeline-item {
                padding-left: 0;
                margin-bottom: 30px;
            }
            
            .timeline-time {
                position: relative;
                left: 0;
                top: 0;
                margin-bottom: 15px;
                min-width: 140px;
                width: auto;
                display: inline-block;
            }
            
            .timeline-content {
                padding: 25px;
                border-left: 4px solid var(--color-primary);
                border-radius: var(--border-radius);
                box-shadow: var(--box-shadow);
                width: 100%;
                margin-left: 0;
                transform: none !important;
            }
            
            .timeline-content::before {
                display: none;
            }
            
            .timeline-content:hover {
                transform: none;
                box-shadow: var(--box-shadow-hover);
            }
            
            .consultation-btn {
                padding: 15px 25px;
                font-size: 1rem;
            }
            
            .highlight-card, .included, .excluded, .policies {
                padding: 24px 20px;
            }
            
            /* Mobile header adjustments */
            .logo-main {
                font-size: 1.8rem;
                padding: 4px 12px;
                white-space: nowrap;
            }
            
            .logo-image-container {
                width: 80px;
                height: 80px;
            }
            
            .logo img {
                height: 70px;
                width: 70px;
            }
            
            .logo-tagline {
                font-size: 0.95rem;
            }
            
            /* FOOTER MOBILE FIX */
            footer {
                padding: 40px 0 20px;
            }
            
            .footer-content {
                gap: 30px;
                margin-bottom: 30px;
            }
            
            .footer-column {
                margin-bottom: 20px;
            }
            
            .footer-column p {
                margin-bottom: 12px;
                line-height: 1.5;
                font-size: 0.95rem;
            }
            
            .contact-info {
                margin-bottom: 12px;
                gap: 10px;
            }
            
            .social-links-grid {
                margin-top: 15px;
                overflow-x: auto;
                flex-wrap: nowrap;
                padding-bottom: 10px;
                justify-content: flex-start;
            }
            
            .social-row {
                flex-wrap: nowrap;
                gap: 8px;
                padding-right: 20px;
            }
            
            .social-icon {
                width: 38px;
                height: 38px;
                font-size: 16px;
                flex-shrink: 0;
            }
            
            .zalo-icon {
                width: 22px;
                height: 22px;
            }
            
            .copyright {
                padding-top: 20px;
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .tour-hero h1 {
                font-size: 2rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .highlight-card, .timeline-content, .included, .excluded, .policies, .faq-question {
                padding: 20px;
            }
            
            .tour-tag {
                padding: 10px 20px;
                font-size: 1rem;
            }
            
            .consultation-btn-container {
                bottom: 20px;
                right: 20px;
            }
            
            .consultation-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .logo-main {
                font-size: 1.6rem;
                padding: 3px 10px;
            }
            
            .logo-image-container {
                width: 70px;
                height: 70px;
            }
            
            .logo img {
                height: 60px;
                width: 60px;
            }
        }
    </style>
</head>

<body>
    <!-- Meta Pixel Noscript -->
    <noscript>
        <img 
            height="1" 
            width="1" 
            style="display:none"
            src="https://www.facebook.com/tr?id=862531473384426&ev=PageView&noscript=1"
        />
    </noscript>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="04-y-nghia-logo-bieu-tuong.html" class="logo">
                <div class="logo-image-container">
                    <img src="images/logofxf.png" alt="Ruby Wings Travel Logo - Du lịch trải nghiệm và chữa lành" width="90" height="90">
                </div>
                <div class="logo-content">
                    <div class="logo-main">RUBY WINGS</div>
                    <div class="logo-tagline">Hành trình trải nghiệm</div>
                </div>
            </a>
            <!-- Desktop Navigation -->
            	<nav class="nav-links">
                 <a href="index.html">Trang chủ</a>
                 <a href="trai-nghiem-cam-xuc.html">Thiên Nhiên Việt Nam</a>
                <a href="ve-dep-quang-tri.html">khám phá Miền Trung</a>
                <a href="nhung-hanh-trinh-tieu-bieu.html">Hành trình tiêu biểu</a>
                <a href="nhung-hanh-trinh-tham-quan-trai-nghiem-linh-hoat.html">hành trình linh hoạt</a>
                <a href="thien-va-suc-khoe.html">Retreat- Chữa lành</a>
            </nav>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle mobile menu">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <!-- Mobile Navigation -->
            <nav class="nav-mobile" id="mobileNav">
                <a href="index.html">Trang chủ</a>
                 <a href="trai-nghiem-cam-xuc.html">Thiên Nhiên Việt Nam</a>
                <a href="ve-dep-quang-tri.html">khám phá Miền Trung</a>
                <a href="nhung-hanh-trinh-tieu-bieu.html">Hành trình tiêu biểu</a>
                <a href="nhung-hanh-trinh-tham-quan-trai-nghiem-linh-hoat.html">hành trình linh hoạt</a>
                <a href="thien-va-suc-khoe.html">Retreat- Chữa lành</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="tour-hero">
            <div class="container tour-hero-content">
                <div class="tour-tag">HÀNH TRÌNH 2 NGÀY 1 ĐÊM</div>
                <h1>Ngọn Lửa Trường Sơn - Ký ức và khát vọng</h1>
                <p>"Đây không chỉ là một chuyến đi, mà là cuộc hội ngộ giữa những tâm hồn mang khát vọng riêng nhưng lại hòa chung trong một mạch nguồn: ý chí kiên cường, tinh thần sẻ chia và tầm nhìn rộng mở."</p>
                <p>Tất cả cùng vang vọng nơi đất Quảng Trị linh thiêng – miền đất bên dãy Trường Sơn hùng vĩ, nơi từng in dấu những trang sử oai hùng của dân tộc.</p>
            </div>
        </section>

       <!-- Giới thiệu Tour -->
        <section class="tour-section tour-intro">
            <div class="container">
                <div class="section-title">
                    <h2>Giới thiệu hành trình</h2>
                </div>
                <div class="intro-content">
                    <div class="intro-text">
                        <p><strong>Ruby Wings Travel</strong> trân trọng giới thiệu hành trình <strong>"Ngọn Lửa Trường Sơn - Ký ức và khát vọng"</strong> - một chuyến đi đặc biệt dành cho những tâm hồn mang khát vọng riêng nhưng lại hòa chung trong một mạch nguồn: ý chí kiên cường, tinh thần sẻ chia và tầm nhìn rộng mở.</p>
                        <p><strong>Phong cách:</strong> Một retreat đa sắc màu – nơi tĩnh tại và năng động giao hòa, rèn luyện cả thể chất lẫn tinh thần. Đây cũng là hành trình "của sự sống và kết nối thế hệ": gặp gỡ nhân chứng lịch sử, giao lưu cộng đồng, đồng hành cùng nhau như những mảnh ghép bổ sung giá trị, để chuyến đi trở thành phép nhân của trải nghiệm có chiều sâu.</p>
                        <p><strong>Điểm đặc biệt:</strong></p>
                        <ul style="margin-left: 20px; margin-bottom: 15px;">
                            <li>• Trải nghiệm "Đêm lửa trại 'Ngọn lửa Trường Sơn'" - nơi hội tụ ký ức và khát vọng của đồng bào Vân Kiều - Pa Kô với tiếng cồng chiêng vang dậy cùng tiếng đàn Ta lư say đắm...</li>
                            <li>• Hoạt động tri ân và phát triển bền vững: Viếng - tưởng niệm tại Nghĩa trang Liệt sĩ, các hoạt động thuộc "Hành trình xanh"...</li>
                            <li>• Quý khách có cơ hội nghe - dẫn dắt bởi những người lính - Cựu chiến binh (CCB) nhân chứng lịch sử với câu chuyện chân thực, sống động.</li>
                            <li>• Được chia sẻ về phương pháp sống khỏe từ thiên nhiên thiết thực (kết hợp thiền, khí công) để chăm sóc sức khỏe từ gốc.</li>
                        </ul>
                        <p><strong>Đối tượng:</strong> Hành trình được thiết kế để ai cũng có thể tham gia – mỗi người là một mảnh ghép, bổ sung và làm sáng tỏ giá trị cho nhau. Khi cùng hiện diện, chúng ta tạo nên "phép nhân của trải nghiệm": nếu thiếu đi một mắt xích, bức tranh tổng thể sẽ không trọn vẹn...</p>
                        <p><strong>Ruby Wings</strong> - Hành trình của chiều sâu, nơi bạn không chỉ đến một nơi, mà còn có thể được trở về với chính mình</p>
                    </div>
                    <div class="intro-image">
                        <img src="images/lua-trai-2.jpg" alt="Đêm lửa trại Ngọn lửa Trường Sơn" class="lazy-image">
                    </div>
                </div>
            </div>
        </section>

        <!-- Điểm nổi bật -->
        <section class="tour-section tour-highlights">
            <div class="container">
                <div class="section-title">
                    <h2>Điểm Đặc Biệt</h2>
                </div>
                <div class="highlights-grid">
                    <div class="highlight-card fade-in">
                        <div class="highlight-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <h3>Đêm lửa trại "Ngọn lửa Trường Sơn"</h3>
                        <p>Trải nghiệm không thể quên với đồng bào Vân Kiều - Pa Kô: tiếng cồng chiêng vang dậy, đàn Ta lư say đắm, lửa trại ấm áp, những câu chuyện quân dân và khúc dân ca vùng miền thắp lên tình đoàn kết, lan tỏa niềm tự hào dân tộc.</p>
                    </div>
                    <div class="highlight-card fade-in">
                        <div class="highlight-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Gặp gỡ nhân chứng lịch sử</h3>
                        <p>Được lắng nghe và dẫn dắt bởi những cựu chiến binh - nhân chứng lịch sử với câu chuyện chân thực, sống động về một thời oai hùng, về sự kiên cường của những người lính trẻ giữa mưa bom bão đạn.</p>
                    </div>
                    <div class="highlight-card fade-in">
                        <div class="highlight-icon">
                            <i class="fas fa-spa"></i>
                        </div>
                        <h3>Thiền - Khí công & Sống khỏe từ thiên nhiên</h3>
                        <p>Tham gia các bài tập thiền - khí công đơn giản giữa không khí trong lành của núi rừng Trường Sơn, học phương pháp sống khỏe từ thiên nhiên thiết thực để chăm sóc sức khỏe từ gốc - nền tảng tiên quyết cảm nhận hạnh phúc cuộc sống.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lịch trình -->
        <section class="tour-section tour-itinerary">
            <div class="container">
                <div class="section-title">
                    <h2>Lịch trình chi tiết</h2>
                </div>
                <div class="timeline">
                    <!-- Ngày 1 -->
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">Ngày 1<br>06:00 - 08:00</div>
                        <div class="timeline-content">
                            <h3>Huế – Đông Hà - Điểm tâm sáng</h3>
                            <p><strong>06:00 – 08.00:</strong> Chuyến xe đón đoàn tại TP. Huế - Khởi hành đi thành phố Đông Hà. Đến thành phố Đông Hà, quý khách sẽ dùng điểm tâm sáng.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">08:00 - 10:00</div>
                        <div class="timeline-content">
                            <h3>Nghĩa trang Liệt sĩ Quốc gia Trường Sơn</h3>
                            <p><strong>08.00 – 10.00:</strong> Viếng – tham quan Nghĩa trang Liệt sĩ Quốc gia Trường Sơn - nơi yên nghỉ hàng vạn anh hùng liệt sĩ đã ngã xuống trên tuyến đường mòn Hồ Chí Minh huyền thoại, đoàn dâng hương, dành những phút mặc niệm để tưởng nhớ và tri ân các anh hùng đã hy sinh vì độc lập, tự do của Tổ quốc, lắng nghe câu chuyện về những hy sinh thầm lặng của bộ đội Trường Sơn. Tại đây, quý khách có 15-20 phút để tự do đi dạo, hồi tưởng, hoặc ngồi tĩnh lặng để cảm nhận không khí linh thiêng và những ký ức không thể nào quên.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">10:00 - 11:30</div>
                        <div class="timeline-content">
                            <h3>Di chuyển lên miền tây Quảng Trị</h3>
                            <p><strong>10.00 – 11.30:</strong> Di chuyển lên miền tây Quảng Trị, hành trình sẽ đưa quý vị băng qua những cung đường đèo uốn lượn của dãy Trường Sơn, nơi từng là tuyến đường huyết mạch trong chiến tranh. Trên đường, quý khách sẽ được nghe những câu chuyện về hành trình tiếp tế vượt Trường Sơn năm xưa.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">11:30 - 13:00</div>
                        <div class="timeline-content">
                            <h3>Ăn trưa tại Khe Sanh</h3>
                            <p><strong>11.30 – 13.00:</strong> Quý khách dùng cơm trưa, thưởng thức đặc sản địa phương tại thị trấn Khe Sanh (tên cũ) xinh đẹp – nơi được ví như "Đà Lạt 2".</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">13:00 - 14:30</div>
                        <div class="timeline-content">
                            <h3>Nhà tù Lao Bảo & Làng Vây</h3>
                            <p><strong>13.00 – 14.30:</strong> Quý khách tham quan Nhà tù Lao Bảo, nơi từng giam cầm chí sĩ cách mạng những năm đầu thế kỷ 20 trong cuộc kháng chiến chống thực dân Pháp xâm lược. Sau đó quý khách ghé Làng Vây, tham quan di tích lịch sử, trận đầu tiên bộ đội ta đưa lực lượng Tăng thiết giáp vào chiến đấu.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">14:30 - 16:00</div>
                        <div class="timeline-content">
                            <h3>Cây Cô Đơn, Hồ Rào Quán & Cánh đồng điện gió</h3>
                            <p><strong>14:30 – 16.00:</strong> Check-in Cây Cô Đơn, Hồ Rào Quán và ngắm Cánh đồng điện gió. Đây là dịp để đoàn hiểu thêm về sự phát triển của vùng đất này sau chiến tranh.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">16:00 - 18:30</div>
                        <div class="timeline-content">
                            <h3>Sân bay Tà Cơn - Bảo tàng Khe Sanh</h3>
                            <p><strong>16:00 – 18.30:</strong> Tham quan sân bay Tà Cơn - Bảo tàng Khe Sanh. Tại đây, đoàn sẽ được tìm hiểu sâu hơn về trận đánh lịch sử Khe Sanh qua các hiện vật được trưng bày, nghe những câu chuyện kể về tinh thần quả cảm của quân và dân ta.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">18:30 - 22:00</div>
                        <div class="timeline-content">
                            <h3>Nhận phòng & Đêm lửa trại giao lưu</h3>
                            <p><strong>18:30 – 22.00:</strong> Nhận phòng Home Stay (hoặc khách sạn), sau đó Đoàn sẽ dùng bữa tối thân mật và tham gia giao lưu bản sắc có một không hai từ trước đến nay tại "Khe Sanh phố núi mờ sương", ở đó bạn có thể múa quanh bếp lửa, thưởng thức bánh Ayớh, nhấp ngụm rượu cần men lá nồng ấm cùng các 'thôn nam' thôn nữ và cảm nhận... bên ánh lửa bập bùng, tiếng tù và, nhịp cồng chiêng hùng tráng vang vọng cùng tiếng đàn Ta lư say đắm... Đây là cơ hội gặp gỡ giao lưu, trải nghiệm, lắng nghe những câu chuyện chân thực về cuộc sống, văn hóa truyền thống và vai trò của đồng bào trong kháng chiến, chia sẻ kỷ niệm và cảm nhận sự hồi sinh của vùng đất.</p>
                            <p><strong>Nghỉ đêm tại thị trấn Khe Sanh xinh đẹp.</strong></p>
                        </div>
                    </div>

                    <!-- Ngày 2 -->
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">Ngày 2<br>05:00 - 07:30</div>
                        <div class="timeline-content">
                            <h3>Bình minh Tây Trường Sơn & Thiền - Khí công</h3>
                            <p><strong>05:00 - 07:30:</strong> Khởi đầu ngày mới Đoàn thức dậy sớm đón bình minh Tây Trường Sơn, tham gia các bài tập tăng cường - giữ gìn sức khoẻ từ bên trong qua hình thức thiền - khí công đơn giản do nhân viên chuyên môn của Ruby Wings hướng dẫn. Không khí trong lành của núi rừng cùng những động tác nhẹ nhàng giúp cân bằng năng lượng...</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">07:30 - 08:30</div>
                        <div class="timeline-content">
                            <h3>Cà phê Homi & Chánh niệm</h3>
                            <p><strong>07:30 - 08.30:</strong> Thưởng thức Cà phê Homi, quý vị sẽ được ngắm nhìn toàn cảnh núi rừng Trường Sơn hùng vĩ từ không gian panorama độc đáo. Đây là khoảnh khắc tĩnh lặng để thực hành chánh niệm, quan sát không gian rộng lớn và lắng nghe hơi thở, giúp khai phóng tư duy và kết nối sâu sắc hơn với bản thân, chìa khoá kích hoạt chữa lành từ bên trong.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">08:30 - 11:30</div>
                        <div class="timeline-content">
                            <h3>Thành cổ Quảng Trị & Gặp nhân chứng lịch sử</h3>
                            <p><strong>08:30 - 11:30:</strong> Viếng Thành Cổ Quảng Trị, quý vị có thể được gặp gỡ nhân chứng sống sót từ trận đánh 81 ngày đêm. Họ sẽ kể về sự kiên cường của những người lính trẻ, cách họ giữ vững tinh thần giữa mưa bom bão đạn.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">11:30 - 14:00</div>
                        <div class="timeline-content">
                            <h3>Ăn trưa & Giao lưu tổng kết</h3>
                            <p><strong>11.30 - 14.00:</strong> Đoàn dùng cơm trưa, thưởng thức ẩm thực địa phương với những món hải sản tươi ngon, tận hưởng không khí trong lành của biển cả. Quý vị kết hợp giao lưu tổng kết chương trình tại đây.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">14:00 - 15:30</div>
                        <div class="timeline-content">
                            <h3>Thánh địa La Vang</h3>
                            <p><strong>14.00 - 15:30:</strong> Tham quan Thánh địa La Vang - trung tâm hành hương quan trọng bậc nhất của Công giáo Việt Nam, tọa lạc tại Quảng Trị. Nơi đây tôn vinh Đức Mẹ Maria, được cho là đã hiện ra để an ủi các tín hữu vào thế kỷ 18.</p>
                        </div>
                    </div>
                    <div class="timeline-item fade-in">
                        <div class="timeline-time">15:30 - 17:00</div>
                        <div class="timeline-content">
                            <h3>Kết thúc hành trình</h3>
                            <p><strong>15.30 - 17:00:</strong> Xe đưa đoàn trở về lại điểm đón ban đầu, kết thúc chương trình tham quan trải nghiệm, hẹn gặp lại trong những chương trình tiếp theo.</p>
                        </div>
                    </div>
                </div>
                <p class="text-justify pricing-note" style="margin-top: 40px;">
                    <strong>Lưu ý:</strong> Chương trình tour có thể hoán đổi thứ tự điểm tham quan theo sự sắp xếp của Cty hoặc HDV địa phương nhưng vẫn đảm bảo điểm tham quan có trong chương trình.
                </p>
            </div>
        </section>

        <!-- Thông tin giá -->
        <section class="tour-section tour-pricing" id="booking">
            <div class="container">
                <div class="section-title">
                    <h2>Chi phí & Dịch vụ</h2>
                </div>
                <div class="pricing-content">
                    <div class="included">
                        <h3>CHI PHÍ BAO GỒM</h3>
                        <ul>
                            <li><strong>Vận chuyển:</strong> Xe du lịch đời mới, tiện nghi, điều hòa, lái xe an toàn, chuyên nghiệp theo suốt hành trình.</li>
                            <li><strong>Lưu trú:</strong> 01 đêm homestay hoặc khách sạn (Khe Sanh 3*, Hướng Tân 3*) đầy đủ tiện nghi, có ăn sáng.</li>
                            <li><strong>Ăn uống:</strong> 02 bữa sáng, 02 bữa trưa, 01 bữa tối (150.000đ/suất), thực đơn đa dạng, hương vị địa phương. Có nước uống đầy đủ.</li>
                            <li><strong>Vé tham quan:</strong> Vé vào cửa một lần các điểm theo chương trình.</li>
                            <li><strong>Hướng dẫn viên:</strong> Chuyên nghiệp, nhiệt tình, am hiểu lịch sử – văn hóa; đồng hành suốt tuyến. (Một số điểm có thuyết minh chuyên sâu).</li>
                            <li><strong>Nhân chứng lịch sử:</strong> Chi phí mời CCB/nhân chứng tại Thành Cổ (tùy điều kiện thực tế).</li>
                            <li><strong>Bảo hiểm du lịch:</strong> Theo quy định pháp luật Việt Nam.</li>
                            <li><strong>Quà tặng:</strong> Mũ/nón du lịch Ruby Wings.</li>
                            <li><strong>Hoạt động giao lưu:</strong> Tổ chức giao lưu văn hóa cộng đồng: rượu cần, bánh, củi, MC, nghệ nhân… (âm thanh chất lượng cao).</li>
                            <li><strong>Hỗ trợ sự kiện:</strong> Chuẩn bị cho Lễ Tổng kết (âm thanh cơ bản, không gian).</li>
                            <li><strong>Truyền thông & ký ức:</strong> Chụp ảnh kỷ niệm, slideshow/clip cơ bản trình chiếu tại Lễ Tổng kết và gửi tặng đoàn.</li>
                            <li><strong>Bảo đảm y tế:</strong> 01 chuyên viên y tế và thuốc thông dụng đi cùng.</li>
                        </ul>
                    </div>
                    <div class="excluded">
                        <h3>GIÁ KHÔNG BAO GỒM</h3>
                        <ul>
                            <li>Đồ uống cá nhân (bia, rượu, nước ngọt…) ngoài chương trình.</li>
                            <li>Chi phí mua sắm, giặt là, minibar trong khách sạn/homestay.</li>
                            <li>Tiền tip cho lái xe, hướng dẫn viên (tùy tâm).</li>
                            <li>Chi phí phát sinh do thiên tai, dịch bệnh, biểu tình, tắc đường, trễ chuyến bay/tàu…</li>
                            <li>Thuế giá trị gia tăng (VAT) – nếu xuất hóa đơn.</li>
                            <li>Dịch vụ nâng cao: Quay phim/chụp ảnh chuyên nghiệp, dựng clip highlight, album ảnh (báo giá riêng theo yêu cầu).</li>
                        </ul>
                    </div>
                    <div class="policies">
                        <h3>THÔNG TIN LƯU TRÚ & CÁC ĐIỂM CHÚ Ý</h3>
                        <ul>
                            <li><strong>Tiêu chuẩn phòng:</strong> 2 bạn/phòng KS hoặc 2 bạn/lều (ngủ lều giảm 50k/người). Homestay 4 bạn/phòng (giảm 25k), 8 bạn/phòng (giảm 50k).</li>
                            <li><strong>Phòng đơn:</strong> KS: phụ thu 200k; Lều đơn: phụ thu 100k.</li>
                            <li><strong>* Phụ thu cụ thể thông báo khi đăng ký. Khách đoàn có bảng chi phí riêng.</strong></li>
                            <li><strong>Sức khỏe & Thể trạng:</strong> Hành trình nhịp độ chậm rãi, có đi bộ tại di tích/địa đạo. Vui lòng báo trước tình trạng sức khỏe đặc biệt để BTC hỗ trợ tốt nhất.</li>
                            <li><strong>Trang phục:</strong> Khi tham quan di tích/tâm linh, ăn mặc lịch sự. Nên mang giày thể thao, áo khoác nhẹ và vật dụng chống nắng/mưa.</li>
                            <li><strong>Tâm thế:</strong> Đây là hành trình tri ân, chiêm nghiệm, kết nối. Hãy đến với tâm hồn rộng mở, lắng nghe và chia sẻ suy tư để tăng chiều sâu nhân văn.</li>
                            <li><strong>Văn hóa & Tôn trọng:</strong> Tuân thủ quy tắc ứng xử tại di tích, nghĩa trang và khi giao lưu cộng đồng dân tộc thiểu số. Tránh tranh luận chính trị, tôn giáo, vùng miền; giữ sự trang nghiêm nơi linh thiêng.</li>
                            <li><strong>An toàn:</strong> Tuân thủ hướng dẫn của trưởng đoàn và HDV để đảm bảo an toàn tuyệt đối.</li>
                        </ul>
                    </div>
                </div>
                <div class="pricing-cta">
                    <button onclick="handleRegistration()" id="registrationCostButton" class="btn" style="font-size: 1.3rem; padding: 18px 50px; font-weight: 700;">
                        <i class="fas fa-calendar-check"></i> NHẬN BÁO GIÁ VÀ ĐĂNG KÝ
                    </button>
                    <p class="pricing-note">* Chi phí cụ thể sẽ được báo riêng theo số lượng và loại hình lưu trú. Liên hệ ngay để được tư vấn chi tiết!</p>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="tour-section tour-faq">
            <div class="container">
                <div class="section-title">
                    <h2>Câu hỏi thường gặp</h2>
                </div>
                <div class="faq-container">
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Hành trình này có phù hợp với đoàn cựu chiến binh không?</span>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>Hoàn toàn phù hợp. Hành trình được thiết kế đặc biệt cho các cựu chiến binh, với các điểm tham quan mang tính lịch sử, cơ hội gặp gỡ nhân chứng và giao lưu với đồng bào dân tộc, tạo không gian tri ân và hồi tưởng. Các cựu chiến binh có thể mặc quân phục (nếu có) hoặc thường phục khi tham gia.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Tôi cần chuẩn bị gì cho đêm lửa trại và giao lưu văn hóa?</span>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p><strong>Trang phục:</strong> Nên mang trang phục thoải mái, ấm áp cho đêm lửa trại (áo khoác nhẹ).</p>
                            <p><strong>Tâm thế:</strong> Cởi mở để tham gia các hoạt động giao lưu, múa hát cùng đồng bào.</p>
                            <p><strong>Quà tặng (không bắt buộc):</strong> Có thể chuẩn bị một số món quà nhỏ (bánh kẹo, dụng cụ học tập cho trẻ em) để tặng trong giao lưu.</p>
                            <p><strong>Ý thức văn hóa:</strong> Tôn trọng phong tục tập quán của đồng bào dân tộc, không tranh luận về tôn giáo, chính trị.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Hành trình có các hoạt động thiền, khí công không?</span>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p>Có, vào buổi sáng ngày thứ 2, đoàn sẽ tham gia các bài tập thiền - khí công đơn giản dưới sự hướng dẫn của nhân viên chuyên môn Ruby Wings, giúp cân bằng năng lượng và kết nối với thiên nhiên Trường Sơn. Đây là hoạt động tự nguyện, phù hợp với mọi lứa tuổi và thể trạng.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Điều kiện sức khỏe nào cần lưu ý khi tham gia hành trình?</span>
                            <span class="faq-toggle"><i class="fas fa-chevron-down"></i></span>
                        </div>
                        <div class="faq-answer">
                            <p><strong>Nhịp độ:</strong> Hành trình nhịp độ chậm rãi, có đi bộ tại các di tích, địa đạo. Người tham gia cần có sức khỏe ổn định để di chuyển.</p>
                            <p><strong>Báo trước:</strong> Vui lòng báo trước tình trạng sức khỏe đặc biệt (bệnh nền, dị ứng, hạn chế vận động...) để Ban tổ chức hỗ trợ tốt nhất.</p>
                            <p><strong>Đội ngũ y tế:</strong> Hành trình có 01 chuyên viên y tế và thuốc thông dụng đi cùng để hỗ trợ khi cần thiết.</p>
                            <p><strong>Khí hậu:</strong> Vùng Trường Sơn có khí hậu mát mẻ nhưng có thể thay đổi, nên chuẩn bị áo khoác nhẹ và đồ dùng chống nắng/mưa.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Nút "XEM CÁC HÀNH TRÌNH KHÁC" -->
                <div style="text-align: center; margin-top: 40px;">
                    <a href="nhung-hanh-trinh-tieu-bieu.html" class="other-tours-btn">
                        <i class="fas fa-route"></i> XEM CÁC HÀNH TRÌNH KHÁC
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3><a href="tuyen-ngon-sang-lap-ruby-wings.html" class="footer-title-link">Về chúng tôi</a></h3>
                    <p>Ruby Wings Travel - Nơi bạn không chỉ đến một nơi, mà còn có thể được trở về với chính mình".</p>
                    <p> MST: 3301743759</p>
                    <div class="social-links-grid">
                        <div class="social-row">
                            <a href="https://www.facebook.com/profile.php?id=61563772112138" target="_blank" class="social-icon facebook" title="Facebook Fanpage Ruby Wings">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                           <a href="https://www.facebook.com/tien.sy.5011/" target="_blank" class="social-icon facebook-personal" title="Facebook Cá nhân Ruby Wings">
<i class="fab fa-facebook-f"></i>
</a>
                            <a href="https://x.com/TienSy379/status/1971778015232421915?t=UsXdMD8FrwjF3OO3ZnoUGg&s=19" target="_blank" class="social-icon twitter" title="Twitter Ruby Wings">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="https://www.instagram.com/tiensyrubywings?igsh=MWV3czBwMmYwYnIydA==" target="_blank" class="social-icon instagram" title="Instagram Ruby Wings">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="https://www.tiktok.com/@syluong379?_t=ZS-904eIdTTG12&_r=1" target="_blank" class="social-icon tiktok" title="TikTok Ruby Wings">
                                <i class="fab fa-tiktok"></i>
                            </a>
                            <a href="https://www.linkedin.com/in/ti%E1%BA%BFn-s%E1%BB%B1-l%C6%B0%C6%A1ng-9a0292387?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank" class="social-icon linkedin" title="LinkedIn Ruby Wings">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="https://wa.me/84332510486" target="_blank" class="social-icon whatsapp" title="WhatsApp Ruby Wings">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                            <a href="https://zalo.me/84332510486" target="_blank" class="social-icon zalo" title="Zalo Nhắn tin Ruby Wings">
                                <img src="images/zalo.jpg" alt="Zalo Ruby Wings" class="zalo-icon" width="20" height="20">
                            </a>
                            <a href="https://www.youtube.com/@rubywing-slsa" target="_blank" class="social-icon youtube" title="YouTube Ruby Wings">
                                <i class="fab fa-youtube"></i>
                            </a>
                            <a href="https://m.me/tien.sy.5011?hash=AbY3ty4r4j7255Yb&source=qr_link_share" target="_blank" class="social-icon messenger" title="Messenger Ruby Wings">
                                <i class="fab fa-facebook-messenger"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Liên Hệ</h3>
                    <div class="contact-info">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>148 Trương Gia Mô, Vỹ Dạ TP. Huế</span>
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-phone"></i>
                        <span>0332510486 </span>
                    </div>
                    <div class="contact-info">
                        <i class="fab fa-whatsapp"></i>
                        <span> Hotline: 0332510486 (WhatsApp/Zalo)</span>
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-envelope"></i>
                        <span><a href="mailto:rubywingslsa@gmail.com">rubywingslsa@gmail.com</a></span>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Tham gia cộng đồng</h3>
                    <p>Tham gia nhóm cộng đồng Ruby Wings để nhận những thông tin mới nhất, chia sẻ trải nghiệm và lan tỏa những thông điệp tốt đẹp.</p>
                    <a href="https://www.facebook.com/groups/4107197836205156/" target="_blank" class="community-btn">
                        Tham gia nhóm <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
           
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Header functionality
            const header = document.querySelector('header');
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const mobileNav = document.getElementById('mobileNav');
            const overlay = document.createElement('div');
            overlay.className = 'overlay';
            document.body.appendChild(overlay);
            
            // Sticky Header
            let lastScrollY = window.scrollY;
            let ticking = false;
            
            function updateHeader() {
                const scrollY = window.scrollY;
                const isMobile = window.innerWidth <= 768;
                
                if (!isMobile) {
                    if (scrollY > 100) {
                        header.classList.add('sticky');
                    } else {
                        header.classList.remove('sticky');
                    }
                    
                    if (scrollY > lastScrollY && scrollY > 100) {
                        header.style.transform = 'translateY(-100%)';
                    } else {
                        header.style.transform = 'translateY(0)';
                    }
                } else {
                    if (scrollY > lastScrollY && scrollY > 100) {
                        header.style.transform = 'translateY(-100%)';
                    } else {
                        header.style.transform = 'translateY(0)';
                    }
                }
                
                lastScrollY = scrollY;
                ticking = false;
            }
            
            function onScroll() {
                if (!ticking) {
                    requestAnimationFrame(updateHeader);
                    ticking = true;
                }
            }
            
            window.addEventListener('scroll', onScroll, { passive: true });
            
            // Mobile Menu
            function toggleMobileMenu() {
                const isActive = mobileNav.classList.contains('active');
                
                if (isActive) {
                    mobileNav.classList.remove('active');
                    mobileMenuToggle.classList.remove('active');
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                } else {
                    mobileNav.classList.add('active');
                    mobileMenuToggle.classList.add('active');
                    overlay.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            }
            
            mobileMenuToggle.addEventListener('click', toggleMobileMenu);
            overlay.addEventListener('click', toggleMobileMenu);
            
            // Close mobile menu when clicking on links
            const mobileLinks = mobileNav.querySelectorAll('a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', toggleMobileMenu);
            });
            
            // FAQ functionality
            const faqItems = document.querySelectorAll('.faq-item');
            
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    // Close all other items
                    faqItems.forEach(otherItem => {
                        if (otherItem !== item) {
                            otherItem.classList.remove('active');
                        }
                    });
                    
                    // Toggle current item
                    item.classList.toggle('active');
                });
            });
            
            // Scroll animations
            const fadeElements = document.querySelectorAll('.fade-in');
            
            function checkScroll() {
                fadeElements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 150;
                    
                    if (elementTop < window.innerHeight - elementVisible) {
                        element.classList.add('visible');
                    }
                });
            }
            
            window.addEventListener('scroll', checkScroll);
            checkScroll(); // Check on load
            
            // Lazy loading images
            const lazyImages = document.querySelectorAll('.lazy-image');
            
            function lazyLoad() {
                lazyImages.forEach(img => {
                    if (img.getBoundingClientRect().top < window.innerHeight + 100) {
                        img.src = img.dataset.src || img.src;
                        img.classList.add('loaded');
                    }
                });
            }
            
            // Set up Intersection Observer for lazy loading
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src || img.src;
                            img.classList.add('loaded');
                            imageObserver.unobserve(img);
                        }
                    });
                });
                
                lazyImages.forEach(img => {
                    imageObserver.observe(img);
                });
            } else {
                // Fallback for older browsers
                window.addEventListener('scroll', lazyLoad);
                lazyLoad();
            }
        });

        // === HÀM XỬ LÝ CLICK NÚT VỚI TRACKING ===
        function handleRegistration() {
            // Chuẩn hoá dữ liệu động cho tour, trang, nút & form
            var pageUrl = window.location.href;
            var pageTitle = document.title;
            var tourTitleElement = document.querySelector('.tour-hero h1');
            var tourName = tourTitleElement ? tourTitleElement.innerText.trim() : 'Ngọn Lửa Trường Sơn - Ký ức và khát vọng';
            var registrationButton = document.getElementById('registrationCostButton');

            var buttonText = registrationButton ? registrationButton.innerText.trim() : 'NHẬN BÁO GIÁ VÀ ĐĂNG KÝ';
            var buttonFeatures = registrationButton ? JSON.stringify({
                id: registrationButton.id || null,
                classes: registrationButton.className || null,
                tag: registrationButton.tagName || 'BUTTON',
                type: registrationButton.getAttribute('type') || 'button'
            }) : null;

            // Form đăng ký chi phí & tham gia tour
            var formUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSdR4-JBUs7wtyZH-a1tHrCBAYj3M2PAhFRKrCo_ZOvWwCvZEQ/viewform';
            var formFeatures = JSON.stringify({
                type: 'external_google_form',
                provider: 'google_forms',
                url: formUrl
            });

            var canonicalLink = document.querySelector('link[rel="canonical"]');
            var canonicalUrl = canonicalLink ? canonicalLink.href : pageUrl;

            var pageFeatures = JSON.stringify({
                template: 'tour_detail',
                canonical: canonicalUrl
            });

            // 1. FACEBOOK PIXEL - Track chuyển đổi "Lead" với dữ liệu đầy đủ
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Lead', {
                    content_name: pageTitle,
                    content_category: 'Tour Du Lịch',
                    page_url: pageUrl,
                    page_title: pageTitle,
                    button_type: 'Cost Registration',
                    buttonText: buttonText,
                    buttonFeatures: buttonFeatures,
                    formFeatures: formFeatures,
                    pageFeatures: pageFeatures,
                    tour_name: tourName
                });
                console.log('✅ Facebook Pixel: Tracked registration click', {
                    content_name: pageTitle,
                    tour_name: tourName,
                    page_url: pageUrl,
                    buttonText: buttonText
                });
            } else {
                console.warn('⚠️ Facebook Pixel chưa được tải');
            }
            
            // 2. GOOGLE ANALYTICS - Track sự kiện với dữ liệu tour & trang động
            if (typeof gtag !== 'undefined') {
                // GA4 Event
                gtag('event', 'registration_click', {
                    'event_category': 'conversion',
                    'event_label': tourName + ' - Cost Registration',
                    'value': 1,
                    'tour_name': tourName,
                    'page_title': pageTitle,
                    'page_location': pageUrl
                });
                
                // GA4 Generate Lead Event
                gtag('event', 'generate_lead', {
                    'event_category': 'engagement',
                    'event_label': tourName + ' Registration',
                    'page_title': pageTitle,
                    'page_location': pageUrl
                });
                
                console.log('✅ Google Analytics: Tracked registration event', {
                    tour_name: tourName,
                    page_url: pageUrl
                });
            } else {
                console.warn('⚠️ Google Analytics chưa được tải');
            }
            
            console.log('🎯 Tracking completed - Opening registration form');
            
            // 3. MỞ FORM ĐĂNG KÝ
            setTimeout(function() {
                window.open(formUrl, '_blank');
            }, 200);
            
            return false;
        }

        // === ĐẢM BẢO TRACKING HOẠT ĐỘNG ===
        document.addEventListener('DOMContentLoaded', function() {
            console.log('📊 Registration button loaded - FB Pixel & GA4 ready');
            
            // Kiểm tra tracking scripts
            const checkTracking = setInterval(function() {
                if (typeof fbq !== 'undefined' && typeof gtag !== 'undefined') {
                    console.log('✅ All tracking scripts are loaded');
                    clearInterval(checkTracking);
                }
            }, 500);
            
            // Timeout sau 5 giây
            setTimeout(function() {
                clearInterval(checkTracking);
                if (typeof fbq === 'undefined') {
                    console.warn('❌ Facebook Pixel not loaded after 5 seconds');
                }
                if (typeof gtag === 'undefined') {
                    console.warn('❌ Google Analytics not loaded after 5 seconds');
                }
            }, 5000);
        });

        // === XỬ LÝ PHÍM ENTER TRÊN NÚT ===
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const activeElement = document.activeElement;
                if (activeElement && activeElement.onclick && activeElement.onclick.name === 'handleRegistration') {
                    handleRegistration();
                }
            }
        });

        // === FALLBACK SCRIPT ĐẢM BẢO TRACKING HOẠT ĐỘNG ===
        if (typeof handleRegistration === 'undefined') {
            window.handleRegistration = function() {
                window.open('https://docs.google.com/forms/d/e/1FAIpQLSdR4-JBUs7wtyZH-a1tHrCBAYj3M2PAhFRKrCo_ZOvWwCvZEQ/viewform', '_blank');
                console.log('Fallback: Form opened without tracking');
            };
        }
    </script>

<!-- RUBY WINGS – META PIXEL LOGIC + CONSULT BUTTON (FINAL, FIX MAP, FIX DEEPSCROLL, NO FALLBACK) -->
<script>
(function(){
'use strict';

/* =========================================================
   CONFIG
========================================================= */
const SCROLL_DEPTH = 80;
const ENGAGED_TIME = 30000;

/* =========================================================
   CONTENT ID MAP (ÉP MAP – KHÔNG AUTO)
========================================================= */
const CONTENT_ID_MAP = {
  '': 'RW_HOME',
  'nhung-hanh-trinh-tieu-bieu': 'RW_LANDING_FEATURED',
  'nhung-hanh-trinh-tham-quan-trai-nghiem-linh-hoat': 'RW_LANDING_FLEX',
  'ngon-lua-truong-son-2n1d': 'RW_TOUR_NLTSON_2N1D',
  'mua-do-va-tay-truong-son-2n1d': 'RW_TOUR_MUADO_TSON_2N1D',
  'hanh-trinh-lanh-dao-3n2d': 'RW_TOUR_LANHDAO_3N2D',
  'di-san-quoc-gia-2n1d': 'RW_TOUR_DISANQG_2N1D',
  'huyen-thoai-nguoi-phu-nu-viet-nam-3n2d': 'RW_TOUR_PHUNUVN_3N2D',
  'dmz-hoa-giai-ban-sac-4n3d': 'RW_TOUR_DMZ_4N3D',
  'hanh-trinh-trai-nghiem-linh-hoat': 'RW_FLEX_GENERAL',
  'hanh-trinh-giao-duc-ky-nang-song': 'RW_FLEX_EDU_SKILL',
  'hanh-trinh-trai-nghiem-thien-nhien': 'RW_FLEX_NATURE',
  'hanh-trinh-van-hoa-di-san': 'RW_FLEX_HERITAGE',
  'tom_tat_ho_so_hanh_trinh_mau_cho_nha_truong': 'RW_PROFILE_SCHOOL',
  '01-mo-dau-ruby-wings-la-ai': 'RW_ABOUT_01',
  '02-cau-chuyen-khoi-nguon': 'RW_ABOUT_02',
  '03-triet-ly-gia-tri': 'RW_ABOUT_03',
  '04-logo-y-nghia': 'RW_ABOUT_04',
  '05-he-sinh-thai-ruby-wings': 'RW_ABOUT_05',
  'dich-vu-du-lich-trai-nghiem': 'RW_SERVICE_EXPERIENCE',
  'dich-vu-retreat-chua-lanh': 'RW_SERVICE_RETREAT',
  'dich-vu-team-building': 'RW_SERVICE_TEAMBUILDING',
  'dich-vu-giao-duc-ky-nang': 'RW_SERVICE_EDUCATION',
  'lien-he': 'RW_CONTACT',
  'gioi-thieu': 'RW_ABOUT',
  'theo_dong_di_san_mien_trung_tu_pho_co_den_co_do': 'RW_TOUR_DISANMIENTRUNG_3N2D',
  'ky_uc_va_dai_ngan_tinh_lang_gv': 'RW_TOUR_KYUC_DAINGAN_2N1D',
  'mien_trung_di_san_kham_pha_quy_nhon_phu_yen': 'RW_TOUR_QUYNHON_PHUYEN_4N3D',
  'kham_pha_dat_viet_van_hoa_ky_quan_thien_nhien_khe_sanh_tam_dao_moc_chau': 'RW_TOUR_TAMDAO_MOCCHAU_4N3D',
  'mien_bac_di_san_tam_linh_thien_nhien': 'RW_TOUR_HALONG_NINHBINH_TAMCHUC_3N2D',
  'trai_nghiem_tinh_hoa_bac_bo_ha_noi_sa_pa_phu_tho': 'RW_TOUR_HANOI_SAPA_PHUTHO_5N4D',
  'di_san_kham_pha_ninh_binh_tam_dao_ha_long': 'RW_TOUR_NINHBINH_TAMDAO_HALONG_6N5D',
  'kham_pha_da_nang_hoi_an': 'RW_TOUR_DANANG_HOIAN_2N1D',
  'gioi_thieu_tai_lieu_bat_mach_noi_dau': 'RW_BOOK_BAT_MACH_NOI_DAU',
  'cong_dong_ban_sac_trong_nuoc': 'CONG_DONG_BAN_SAC_TRONG_NUOC',
  'ket_noi_trong_nuoc': 'KET_NOI_TRONG_NUOC',
  'lan_toa_trong_nuoc': 'LAN_TOA_TRONG_NUOC',
  'giao_duc_ky_nang_trong_nuoc': 'GIAO_DUC_KY_NANG_TRONG_NUOC',
   'trai-nghiem-linh-hoat-phu-nu': 'RW_TOUR_DONGCHAYYEUTHUONG_2N1D',
  'mua_do_va_tay_truong_son': 'RW_TOUR_MUADO_TSON_2N1D',
  'dai_ngan_truong_son_sac_xuan_mien_bien_vien': 'RW_TOUR_TRUONGSON_BIENVIEN_2N1D',
  'non-nuoc-bach-ma': 'RW_TOUR_BACHMA_1DAY',
  'sac_xuan_mien_bien_vien': 'RW_TOUR_SACXUAN_BIENVIEN_2N1D'
};

/* =========================================================
   LEAD KEYWORDS
========================================================= */
const LEAD_KEYWORDS = [
  'đăng ký',
  'đăng ký thông tin tư vấn',
  'gọi để chúng tôi tư vấn',
  'liên hệ đặt hành trình',
  'nơi nhận tư vấn',
  'nơi nhận tư vấn →',
  'liên hệ',
  'tư vấn',
  '033.251.0486'
];

/* =========================================================
   PATH KEY – FIX CHUẨN HTML TĨNH
========================================================= */
let pathKey = location.pathname
  .replace(/^\/|\/$/g,'')
  .replace('index.html','')
  .replace('.html','');

if(pathKey === '') pathKey = '';

const CONTENT_ID = CONTENT_ID_MAP[pathKey] || null;
const PAGE_TYPE = pathKey === '' ? 'home' : (CONTENT_ID ? 'page' : 'unmapped');

/* =========================================================
   VIEW CONTENT
========================================================= */
setTimeout(function () {
  if (!window.fbq || !window.RW_EVENT_ID) return;
  if (typeof CONTENT_ID === 'undefined' || typeof PAGE_TYPE === 'undefined') return;

  fbq('track', 'ViewContent', {
    content_name: document.title,
    content_category: PAGE_TYPE,
    content_ids: [CONTENT_ID],
    content_type: 'website',
    currency: 'VND',
    value: PAGE_TYPE === 'home' ? 0 : 10000,
    predicted_ltv: PAGE_TYPE === 'home' ? 0 : 1000000
  }, {
    eventID: window.RW_EVENT_ID
  });
}, 1000);


/* =========================================================
   LANDING PAGE VIEW / PAGE SCROLL / CONTENT VIEW
   SAFE – NO eventID – MID/FULL FUNNEL ONLY
========================================================= */

/* ===== 1. LANDING PAGE VIEW (1 lần / session) ===== */
if (window.fbq && !sessionStorage.getItem('rw_landing_viewed')) {
  sessionStorage.setItem('rw_landing_viewed', '1');

  fbq('trackCustom', 'LandingPageView', {
    page_type: PAGE_TYPE,
    content_id: CONTENT_ID || null,
    url: location.href
  });
}

/* ===== 2. PAGE SCROLL (25% / 50% / 75%) ===== */
const rwScrollMarks = [25, 50, 75];
const rwScrollSent = {};

window.addEventListener('scroll', function () {
  if (!window.fbq) return;

  const percent =
    (window.scrollY + window.innerHeight) /
    document.documentElement.scrollHeight * 100;

  rwScrollMarks.forEach(function (mark) {
    if (percent >= mark && !rwScrollSent[mark]) {
      rwScrollSent[mark] = true;

      fbq('trackCustom', 'PageScroll', {
        scroll_percent: mark,
        page_type: PAGE_TYPE,
        content_id: CONTENT_ID || null
      });
    }
  });
}, { passive: true });

/* ===== 3. CONTENT VIEW (PAGE ≠ HOME, 1 lần) ===== */
if (
  window.fbq &&
  PAGE_TYPE !== 'home' &&
  CONTENT_ID &&
  !sessionStorage.getItem('rw_content_viewed_' + CONTENT_ID)
) {
  sessionStorage.setItem('rw_content_viewed_' + CONTENT_ID, '1');

  fbq('trackCustom', 'ContentView', {
    content_id: CONTENT_ID,
    page_type: PAGE_TYPE,
    title: document.title
  });
}




/* =========================================================
   DEEP SCROLL (SAFE + DEDUP READY)
========================================================= */
let deepScrollSent = false;

window.addEventListener('scroll', function () {
  if (
    deepScrollSent ||
    !window.fbq ||
    !window.RW_EVENT_ID ||
    typeof CONTENT_ID === 'undefined' ||
    typeof PAGE_TYPE === 'undefined' ||
    typeof SCROLL_DEPTH === 'undefined'
  ) return;

  const percent =
    (window.scrollY + window.innerHeight) /
    document.documentElement.scrollHeight * 100;

  if (percent >= SCROLL_DEPTH) {
    deepScrollSent = true;

    fbq('trackCustom', 'DeepScroll', {
  content_id: CONTENT_ID,
  page_type: PAGE_TYPE,
  scroll_depth: SCROLL_DEPTH
});
}
}, { passive: true });


/* =========================================================
   ENGAGED VIEW (SAFE + DEDUP READY)
========================================================= */
setTimeout(function () {
  if (
    !window.fbq ||
    !window.RW_EVENT_ID ||
    typeof CONTENT_ID === 'undefined' ||
    typeof PAGE_TYPE === 'undefined' ||
    typeof ENGAGED_TIME === 'undefined'
  ) return;

  window.fbq('trackCustom', 'EngagedView', {
  content_id: CONTENT_ID,
  page_type: PAGE_TYPE,
  time_on_page: ENGAGED_TIME / 1000
});
}, ENGAGED_TIME);



/* =========================================================
   CONSULT CLICK (ENGAGEMENT ONLY – NO LEAD, SAFE + DEDUP)
========================================================= */
document.addEventListener('click', function (e) {
  if (
    !window.fbq ||
    !window.RW_EVENT_ID ||
    typeof CONTENT_ID === 'undefined' ||
    typeof PAGE_TYPE === 'undefined' ||
    typeof LEAD_KEYWORDS === 'undefined'
  ) return;

  var el = e.target.closest && e.target.closest('a,button');
  if (!el) return;

  var text = (el.innerText || '').toLowerCase();
  var isLead = LEAD_KEYWORDS.some(function (k) {
    return text.indexOf(k.toLowerCase()) !== -1;
  });
  if (!isLead) return;

  window.fbq('trackCustom', 'ConsultClick', {
  content_name: text.substring(0, 80),
  content_category: 'consultation',
  content_ids: [CONTENT_ID],
  page_type: PAGE_TYPE
});
});




/* =========================================================
   ZALO BUTTON (GÓC PHẢI, TRÊN NÚT FORM TƯ VẤN) - NÚT TRÒN
========================================================= */
const zaloRoundBtn = document.createElement('div');
zaloRoundBtn.innerHTML = `
 <a href="https://zalo.me/84332510486"
   target="_blank"
   rel="noopener noreferrer"
   id="rw-zalo-round-btn"
   aria-label="Liên hệ Zalo Ruby Wings"
   style="
     position:fixed;
     right:20px;
     bottom:80px;
     z-index:9999;
     width:60px;
     height:60px;
     border-radius:50%;
     background:linear-gradient(135deg,#0068FF,#0052CC);
     color:#ffffff;
     display:flex;
     align-items:center;
     justify-content:center;
     text-decoration:none;
     box-shadow:0 6px 16px rgba(0,0,0,.25);
     border:2px solid white;
   ">
   <img 
     src="images/zalo.jpg"
     alt=""
     style="width:30px;height:30px;border-radius:50%;object-fit:cover;"
   >
</a>
`;
document.body.appendChild(zaloRoundBtn);





/* =========================================================
   CONSULT BUTTON (GÓC PHẢI) – PIXEL + CAPI LEAD (DEDUP SAFE)
========================================================= */
const btn = document.createElement('div');
btn.innerHTML = `
 <a href="https://forms.gle/XCWf6zgFRp4Vhbw39"
   target="_blank"
   id="rw-consult-btn"
   style="
     position:fixed;
     right:20px;
     bottom:20px;
     z-index:9999;
     padding:12px 18px;
     background:linear-gradient(135deg,#16a34a,#22c55e);
     color:#ffffff;
     font-weight:700;
     font-size:14px;
     border-radius:30px;
     text-decoration:none;
     box-shadow:0 6px 16px rgba(0,0,0,.25);
   ">
   Form tư vấn
 </a>
`;
document.body.appendChild(btn);


/* =========================================================
   FAQ FUNCTIONALITY
========================================================= */
document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', () => {
            // Đóng tất cả các FAQ khác
            faqItems.forEach(otherItem => {
                if (otherItem !== item && otherItem.classList.contains('active')) {
                    otherItem.classList.remove('active');
                }
            });
            
            // Toggle FAQ hiện tại
            item.classList.toggle('active');
        });
    });
    
    // Tự động mở FAQ đầu tiên trên desktop
    if (window.innerWidth > 768) {
        const firstFaq = document.querySelector('.faq-item');
        if (firstFaq) {
            firstFaq.classList.add('active');
        }
    }
});

})();
</script>


<script>
// Ruby Wings Chat Widget - Complete Isolation
const BACKEND_URL = "https://ruby-wings-chatbot.onrender.com";

(function() {
    'use strict';
    
    // Kiểm tra trùng lặp
    if (window.RW_CHAT_LOADED) return;
    window.RW_CHAT_LOADED = true;
    
    // Tạo container tách biệt hoàn toàn
    const createIsolatedWidget = function() {
        // Xóa widget cũ nếu có
        const oldWidgets = document.querySelectorAll('#rw-chat-isolated, .rw-chat-isolated');
        oldWidgets.forEach(w => w.remove());
        
        // Tạo container mới
        const container = document.createElement('div');
        container.id = 'rw-chat-isolated';
        container.className = 'rw-chat-isolated';
        
        // CSS hoàn toàn tách biệt
        const styles = `
            .rw-chat-isolated {
                position: fixed !important;
                left: 0 !important;
                bottom: 0 !important;
                width: auto !important;
                height: auto !important;
                z-index: 10000 !important;
                pointer-events: none !important;
                isolation: isolate !important;
                all: initial !important;
                font-family: Arial, sans-serif !important;
            }
            
            .rw-chat-isolated * {
                pointer-events: auto !important;
                box-sizing: border-box !important;
            }
            
            .rw-chat-btn-isolated {
    position: fixed !important;
    left: 15px !important;
    bottom: 15px !important;
    width: 60px !important;
    height: 60px !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, #00d97e, #00b368) !important;
    border: 2px solid white !important; /* <--- đã thêm viền trắng */
    color: white !important;
    font-size: 24px !important;
    cursor: pointer !important;
    z-index: 10001 !important;
    box-shadow: 0 4px 20px rgba(0,217,126,0.4) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    margin: 0 !important;
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
    overflow: hidden !important;
}
            
            .rw-chat-btn-isolated::after {
                content: "AI" !important;
                position: absolute !important;
                bottom: 5px !important;
                font-size: 11px !important;
                font-weight: bold !important;
                color: white !important;
                left: 0 !important;
                right: 0 !important;
                text-align: center !important;
            }
            
            .rw-chat-widget-isolated {
                position: fixed !important;
                left: 15px !important;
                bottom: 85px !important;
                width: calc(100vw - 30px) !important;
                max-width: 400px !important;
                height: 500px !important;
                background: white !important;
                border-radius: 12px !important;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important;
                z-index: 10002 !important;
                display: none !important;
                flex-direction: column !important;
                overflow: hidden !important;
                border: 1px solid #e2e8f0 !important;
                pointer-events: auto !important;
            }
            
            .rw-chat-widget-isolated.open {
                display: flex !important;
            }
            
            .rw-chat-header-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                padding: 15px !important;
                display: flex !important;
                align-items: center !important;
                gap: 10px !important;
            }
            
            .rw-chat-avatar-isolated {
                width: 32px !important;
                height: 32px !important;
                border-radius: 8px !important;
                background: rgba(255,255,255,0.2) !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-weight: bold !important;
                font-size: 14px !important;
            }
            
            .rw-chat-title-isolated {
                font-weight: bold !important;
                font-size: 16px !important;
                flex: 1 !important;
            }
            
            .rw-chat-close-isolated {
                background: none !important;
                border: none !important;
                color: white !important;
                font-size: 18px !important;
                cursor: pointer !important;
                width: 30px !important;
                height: 30px !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .rw-chat-body-isolated {
                flex: 1 !important;
                padding: 15px !important;
                overflow-y: auto !important;
                background: #f8fafc !important;
                display: flex !important;
                flex-direction: column !important;
                gap: 12px !important;
            }
            
            .rw-chat-message-isolated {
                max-width: 85% !important;
                padding: 12px 16px !important;
                border-radius: 12px !important;
                font-size: 14px !important;
                line-height: 1.4 !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
            }
            
            .rw-chat-message-bot-isolated {
                background: white !important;
                color: #1e293b !important;
                border-bottom-left-radius: 4px !important;
                align-self: flex-start !important;
            }
            
            .rw-chat-message-user-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                border-bottom-right-radius: 4px !important;
                align-self: flex-end !important;
            }
            
            .rw-chat-input-container-isolated {
                padding: 15px !important;
                background: white !important;
                border-top: 1px solid #e2e8f0 !important;
                display: flex !important;
                gap: 8px !important;
            }
            
            .rw-chat-input-isolated {
                flex: 1 !important;
                padding: 12px !important;
                border: 2px solid #00b368 !important;
                border-radius: 8px !important;
                font-size: 14px !important;
                outline: none !important;
                background: white !important;
                color: #1e293b !important;
            }
            
            .rw-chat-input-isolated:focus {
                border-color: #00d97e !important;
                box-shadow: 0 0 0 3px rgba(0, 217, 126, 0.2) !important;
            }
            
            .rw-chat-send-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                border: none !important;
                padding: 12px 16px !important;
                border-radius: 8px !important;
                cursor: pointer !important;
                font-weight: bold !important;
                font-size: 14px !important;
            }
            
            @media (min-width: 769px) {
                .rw-chat-btn-isolated {
                    left: 20px !important;
                    bottom: 20px !important;
                    width: 70px !important;
                    height: 70px !important;
                }
                .rw-chat-btn-isolated::after {
                    font-size: 12px !important;
                    bottom: 8px !important;
                }
                .rw-chat-widget-isolated {
                    left: 20px !important;
                    bottom: 100px !important;
                    width: 400px !important;
                }
            }
        `;
        
        // Thêm styles
        const styleEl = document.createElement('style');
        styleEl.textContent = styles;
        document.head.appendChild(styleEl);
        
        // Tạo HTML
        container.innerHTML = `
            <button class="rw-chat-btn-isolated" aria-label="Mở chat trợ lý Ruby Wings AI">🤖</button>
            <div class="rw-chat-widget-isolated">
                <div class="rw-chat-header-isolated">
                    <div class="rw-chat-avatar-isolated">AI</div>
                    <div class="rw-chat-title-isolated">Trợ lý Ruby Wings AI</div>
                    <button class="rw-chat-close-isolated" aria-label="Đóng chat">✕</button>
                </div>
                <div class="rw-chat-body-isolated">
                    <div class="rw-chat-message-isolated rw-chat-message-bot-isolated">
                        Chào bạn! Tôi là trợ lý Ruby Wings AI chuyên tư vấn về du lịch ... Tôi có thể giúp gì cho bạn?
                        <div style="font-size:11px; color:#94a3b8; margin-top:4px; text-align:right;">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                    </div>
                </div>
                <div class="rw-chat-input-container-isolated">
                    <input type="text" class="rw-chat-input-isolated" placeholder="Chatbot vẫn đang nâng cấp...">
                    <button class="rw-chat-send-isolated">Gửi</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(container);
        
        // Lấy elements
        const chatBtn = container.querySelector('.rw-chat-btn-isolated');
        const chatWidget = container.querySelector('.rw-chat-widget-isolated');
        const closeBtn = container.querySelector('.rw-chat-close-isolated');
        const sendBtn = container.querySelector('.rw-chat-send-isolated');
        const chatInput = container.querySelector('.rw-chat-input-isolated');
        const chatBody = container.querySelector('.rw-chat-body-isolated');
        
        let isOpen = false;
        
        // Event handlers đơn giản
        function toggleChat() {
            isOpen = !isOpen;
            chatWidget.classList.toggle('open', isOpen);
            if (isOpen) {
                setTimeout(() => chatInput.focus(), 100);
            }
        }
        
        function closeChat() {
            isOpen = false;
            chatWidget.classList.remove('open');
        }
        
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            // Thêm tin nhắn user
            addMessage(message, 'user');
            chatInput.value = '';
            
            // Hiển thị typing
            const typingMsg = addMessage('...', 'bot', true);
            
            // Gửi đến backend (FIX: Endpoint đúng /chat không có /api)
            fetch(BACKEND_URL + '/chat', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ message: message })
            })
            .then(response => response.json())
            .then(data => {
                typingMsg.remove();
                const reply = data.reply || data.message || 'Không có phản hồi từ server.';
                addMessage(reply, 'bot');
            })
            .catch(error => {
                typingMsg.remove();
                addMessage('Xin lỗi, dịch vụ tạm thời gián đoạn. Vui lòng thử lại.', 'bot');
                console.error('Chat error:', error);
            });
        }
        
        function addMessage(text, sender, isTyping = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `rw-chat-message-isolated rw-chat-message-${sender}-isolated`;
            
            if (isTyping) {
                messageDiv.innerHTML = `
                    <div style="display:flex; gap:4px; align-items:center;">
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite"></div>
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite 0.1s"></div>
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite 0.2s"></div>
                    </div>
                    <style>
                        @keyframes bounce {
                            0%, 100% { transform: translateY(0); }
                            50% { transform: translateY(-5px); }
                        }
                    </style>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div>${text}</div>
                    <div style="font-size:11px; opacity:0.7; margin-top:4px; text-align:${sender === 'user' ? 'left' : 'right'};">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                `;
            }
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
            return messageDiv;
        }
        
        // Gắn event listeners
        chatBtn.addEventListener('click', toggleChat);
        closeBtn.addEventListener('click', closeChat);
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        // Đóng khi click bên ngoài
        document.addEventListener('click', (e) => {
            if (isOpen && !chatWidget.contains(e.target) && !chatBtn.contains(e.target)) {
                closeChat();
            }
        });
    };
    
    // Khởi tạo khi trang load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', createIsolatedWidget);
    } else {
        createIsolatedWidget();
    }
})();

</script>
<!-- NÚT GỌI ĐIỆN RUBY WINGS - Đặt trước thẻ đóng </body> -->
<div id="ruby-call-widget" style="position: fixed; z-index: 10001;">
   <button id="ruby-call-button" style="background: linear-gradient(135deg, #00d97e, #00b368) !important; color: white; border: 2px solid white; border-radius: 50%; cursor: pointer; box-shadow: 0 6px 25px rgba(0, 217, 126, 0.4); display: flex; align-items: center; justify-content: center; transition: all 0.3s; outline: none;">
        📞
    </button>
</div>

<!-- MODAL NHẬP SỐ ĐIỆN THOẠI -->
<div id="ruby-call-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10002; align-items: center; justify-content: center;">
    <div style="background: linear-gradient(135deg, #1a5f23 0%, #0d3b1a 100%); border-radius: 16px; padding: 30px; width: 90%; max-width: 420px; box-shadow: 0 15px 40px rgba(0,0,0,0.5); border: 2px solid #27ae60;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
            <h3 style="color: white; margin: 0; font-size: 22px; font-weight: 600; text-shadow: 1px 1px 3px rgba(0,0,0,0.3);">📞 GỌI CHO CHÚNG TÔI</h3>
            <button id="ruby-close-modal" style="background: none; border: none; font-size: 28px; cursor: pointer; color: white; padding: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s;">×</button>
        </div>
        
        <div style="margin-bottom: 25px;">
            <p style="color: white; margin-bottom: 10px; font-size: 16px; font-weight: 500;">Nhập số của Bạn để gọi chúng tôi:</p>
            <input type="tel" id="ruby-phone-input" 
                   style="width: 100%; padding: 15px; background: white; color: black; border: 3px solid #27ae60; border-radius: 10px; font-size: 18px; font-weight: 500; box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);"
                   placeholder="Ví dụ: 0332 510 486" 
                   pattern="[0-9]{10,11}">
            <p style="color: #d1e7dd; font-size: 13px; margin-top: 8px; font-weight: 400;">Chúng tôi sẽ gọi lại cho bạn trong sớm nhất có thể</p>
        </div>
        
        <div style="display: flex; gap: 12px;">
            <button id="ruby-call-regular" 
                    style="flex: 1; background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%); color: white; border: none; padding: 16px; border-radius: 10px; cursor: pointer; font-size: 17px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); transition: all 0.3s; min-height: 55px;">
                <span style="font-size: 20px;">📞</span>
                <span>GỌI SỐ</span>
            </button>
            <button id="ruby-call-zalo" 
                    style="flex: 1; background: linear-gradient(135deg, #0068ff 0%, #0052cc 100%); color: white; border: none; padding: 16px; border-radius: 10px; cursor: pointer; font-size: 17px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(0, 104, 255, 0.4); transition: all 0.3s; min-height: 55px;">
                <span><img src="https://img.icons8.com/color/20/000000/zalo.png" style="width: 20px; height: 20px; filter: brightness(0) invert(1);"></span>
                <span>GỌI ZALO</span>
            </button>
        </div>
        
        <p id="ruby-call-message" style="margin-top: 20px; text-align: center; font-size: 14px; min-height: 22px; color: white; font-weight: 500;"></p>
    </div>
</div>

<style>
/* ===== STYLES FOR ALL DEVICES ===== */
#ruby-call-widget {
    position: fixed !important;
    z-index: 10001 !important;
}

#ruby-call-button {
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

#ruby-call-button::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
    z-index: -1;
}

#ruby-call-button:hover::after {
    opacity: 1;
}

#ruby-close-modal:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    transform: rotate(90deg);
}

/* DÒNG CODE THAY THẾ */
#ruby-call-regular:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0, 217, 126, 0.6) !important;
    background: linear-gradient(135deg, #00d97e, #00b368) !important;
    filter: brightness(1.1);
}

#ruby-call-zalo:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0, 104, 255, 0.6) !important;
    background: linear-gradient(135deg, #0057d9 0%, #0047b3 100%) !important;
}

/* Input focus effects */
#ruby-phone-input:focus {
    outline: none;
    border-color: #2ecc71 !important;
    box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.3) !important;
}

/* Animation cho modal */
@keyframes rubyModalFadeIn {
    from { 
        opacity: 0; 
        transform: translateY(-30px) scale(0.95); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    }
}

@keyframes rubyButtonPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

#ruby-call-modal > div {
    animation: rubyModalFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Pulsing effect for call button */
.ruby-pulse {
    animation: rubyButtonPulse 2s infinite;
}

/* ===== DESKTOP STYLES (default) ===== */
@media (min-width: 769px) {
    #ruby-call-widget {
        bottom: 105px;
        left: 24px;
    }
    
    #ruby-call-button {
        width: 70px;
        height: 70px;
        font-size: 30px;
    }
}

/* ===== MOBILE STYLES ===== */
@media (max-width: 768px) {
    #ruby-call-widget {
        bottom: 85px;
        left: 15px;
    }
    
    #ruby-call-button {
        width: 60px;
        height: 60px;
        font-size: 26px;
    }
    
    #ruby-call-modal > div {
        padding: 25px !important;
        margin: 15px;
    }
    
    #ruby-phone-input {
        padding: 14px !important;
        font-size: 16px !important;
    }
    
    #ruby-call-regular,
    #ruby-call-zalo {
        padding: 14px !important;
        font-size: 16px !important;
        min-height: 50px !important;
    }
}

/* ===== EXTRA SMALL DEVICES ===== */
@media (max-width: 480px) {
    #ruby-call-widget {
        bottom: 85px;
        left: 15px;
    }
    
    #ruby-call-button {
        width: 60px;
        height: 60px;
        font-size: 24px;
    }
    
    #ruby-call-modal > div {
        padding: 20px !important;
    }
    
    h3 {
        font-size: 20px !important;
    }
}

/* ===== PRINT STYLES (hide on print) ===== */
@media print {
    #ruby-call-widget,
    #ruby-call-modal {
        display: none !important;
    }
}

/* ===== DARK MODE SUPPORT ===== */
@media (prefers-color-scheme: dark) {
    #ruby-phone-input {
        background: white !important;
        color: black !important;
    }
}
</style>

<script>
// Biến toàn cục để track trạng thái
let rubyCallWidgetInitialized = false;
let rubyCallWidgetVisible = true;

// Số điện thoại cố định của công ty
const RUBY_WINGS_PHONE = "0332510486";

// Hàm khởi tạo widget gọi điện
function initRubyCallWidget() {
    if (rubyCallWidgetInitialized) return;
    rubyCallWidgetInitialized = true;
    
    // DOM Elements
    const callButton = document.getElementById('ruby-call-button');
    const callModal = document.getElementById('ruby-call-modal');
    const closeButton = document.getElementById('ruby-close-modal');
    const phoneInput = document.getElementById('ruby-phone-input');
    const callRegularButton = document.getElementById('ruby-call-regular');
    const callZaloButton = document.getElementById('ruby-call-zalo');
    const messageElement = document.getElementById('ruby-call-message');
    
    // Áp dụng positioning cho widget
    function applyWidgetPosition() {
        const widget = document.getElementById('ruby-call-widget');
        if (window.innerWidth >= 769) {
            // Desktop positioning
            widget.style.bottom = '105px';
            widget.style.left = '24px';
        } else {
            // Mobile positioning
            widget.style.bottom = '85px';
            widget.style.left = '15px';
        }
    }
    
    // Apply initial position
    applyWidgetPosition();
    
    // Thêm hiệu ứng pulse cho nút
    callButton.classList.add('ruby-pulse');
    
    // Mở modal khi click nút gọi điện
    callButton.addEventListener('click', () => {
        callModal.style.display = 'flex';
        phoneInput.focus();
        phoneInput.select();
        
        // Tạm dừng hiệu ứng pulse khi mở modal
        callButton.classList.remove('ruby-pulse');
    });
    
    // Đóng modal
    closeButton.addEventListener('click', () => {
        callModal.style.display = 'none';
        messageElement.textContent = '';
        phoneInput.value = '';
        
        // Khôi phục hiệu ứng pulse
        setTimeout(() => {
            callButton.classList.add('ruby-pulse');
        }, 500);
    });
    
    // Click bên ngoài để đóng modal
    callModal.addEventListener('click', (e) => {
        if (e.target === callModal) {
            callModal.style.display = 'none';
            messageElement.textContent = '';
            phoneInput.value = '';
            
            // Khôi phục hiệu ứng pulse
            setTimeout(() => {
                callButton.classList.add('ruby-pulse');
            }, 500);
        }
    });
    
    // ESC key để đóng modal
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && callModal.style.display === 'flex') {
            callModal.style.display = 'none';
            messageElement.textContent = '';
            phoneInput.value = '';
            
            setTimeout(() => {
                callButton.classList.add('ruby-pulse');
            }, 500);
        }
    });
    
    // Hàm lưu lead vào hệ thống
    async function saveRubyLead(phoneNumber, callType) {
    const cleanPhone = phoneNumber.replace(/\D/g, '');
    if (cleanPhone.length < 10 || cleanPhone.length > 11) {
        throw new Error('Số điện thoại không hợp lệ. Vui lòng nhập 10-11 chữ số');
    }

    // 🔑 HARD DEDUP: dùng event_id từ FE (bắt buộc cho CAPI)
    const eventId = getFinalConvEventId('call');
        

    const leadData = {
        event_id: eventId,              // 🔒 QUAN TRỌNG
        phone: cleanPhone,
        source_channel: "Website",
        action_type: "Click Call Button",
        page_url: window.location.href,
        contact_name: "Khách yêu cầu gọi lại",
        service_interest: "",
        note: callType === 'zalo'
              ? "Khách yêu cầu gọi lại qua Zalo"
              : "Khách yêu cầu gọi lại trực tiếp"
    };

    const response = await fetch(
        'https://ruby-wings-chatbot.onrender.com/api/save-lead',
        {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(leadData)
        }
    );

    if (!response.ok) {
        throw new Error('Lỗi kết nối server. Vui lòng thử lại');
    }

    return { ok: true, event_id: eventId };
}

    


    // Hàm xử lý gọi điện
    async function handleCall(callType = 'regular') {
        const phoneNumber = phoneInput.value.trim();
        
        if (!phoneNumber) {
            messageElement.textContent = '⚠️ Vui lòng nhập số điện thoại';
            messageElement.style.color = '#ffcc00';
            phoneInput.focus();
            return;
        }
        
        // Hiển thị trạng thái đang xử lý
        const originalRegularText = callRegularButton.innerHTML;
        const originalZaloText = callZaloButton.innerHTML;
        
        if (callType === 'regular') {
            callRegularButton.innerHTML = '<span style="font-size: 20px;">⏳</span><span>ĐANG XỬ LÝ...</span>';
            callRegularButton.disabled = true;
            callRegularButton.style.opacity = '0.8';
        } else {
            callZaloButton.innerHTML = '<span style="font-size: 20px;">⏳</span><span>ĐANG XỬ LÝ...</span>';
            callZaloButton.disabled = true;
            callZaloButton.style.opacity = '0.8';
        }
        
        messageElement.textContent = '⏳ Đang lưu thông tin và kết nối...';
        messageElement.style.color = '#ffcc00';
        
        try {
            // 1. Lưu lead vào hệ thống
            const result = await saveRubyLead(phoneNumber, callType);
            // Track Call / Zalo conversion (Meta CAPI)
            fetch('https://ruby-wings-chatbot.onrender.com/api/track-call', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    event_id: result.event_id, 
                    phone: phoneNumber.replace(/\D/g, ''),
                    action: callType === 'zalo' ? 'Zalo Click' : 'Phone Call'
                })
            });


            // 2. Hiển thị thông báo thành công
            messageElement.innerHTML = '✅ <strong>THÀNH CÔNG!</strong> Đã gửi thông tin';
            messageElement.style.color = '#2ecc71';
            
            // 3. Chuyển hướng đến cuộc gọi/Zalo CÔNG TY (FIX: Gọi đến số công ty thay vì số khách hàng)
            setTimeout(() => {
                if (callType === 'zalo') {
                    // Mở Zalo CÔNG TY trong tab mới
                    window.open(`https://zalo.me/${RUBY_WINGS_PHONE}`, '_blank', 'noopener,noreferrer');
                } else {
                    // Gọi điện đến SỐ CÔNG TY
                    window.location.href = `tel:${RUBY_WINGS_PHONE}`;
                }
                
                // Đóng modal sau 1.5 giây
                setTimeout(() => {
                    callModal.style.display = 'none';
                    phoneInput.value = '';
                    messageElement.textContent = '';
                    
                    // Khôi phục hiệu ứng pulse
                    setTimeout(() => {
                        callButton.classList.add('ruby-pulse');
                    }, 500);
                }, 1500);
            }, 1000);
            
        } catch (error) {
            // Xử lý lỗi
            console.error('Ruby Call Widget Error:', error);
            messageElement.innerHTML = `❌ <strong>${error.message}</strong>`;
            messageElement.style.color = '#ff6b6b';
            
            // Vẫn cho phép gọi nếu API fail (fallback - GỌI ĐẾN CÔNG TY)
            setTimeout(() => {
                const userConfirmed = confirm('Hệ thống đang bận. Bạn vẫn muốn tiếp tục gọi không?');
                
                if (userConfirmed) {
                    if (callType === 'zalo') {
                        window.open(`https://zalo.me/${RUBY_WINGS_PHONE}`, '_blank', 'noopener,noreferrer');
                    } else {
                        window.location.href = `tel:${RUBY_WINGS_PHONE}`;
                    }
                    callModal.style.display = 'none';
                    phoneInput.value = '';
                    messageElement.textContent = '';
                }
            }, 2000);
        } finally {
            // Khôi phục trạng thái nút
            if (callType === 'regular') {
                setTimeout(() => {
                    callRegularButton.innerHTML = originalRegularText;
                    callRegularButton.disabled = false;
                    callRegularButton.style.opacity = '1';
                }, 1000);
            } else {
                setTimeout(() => {
                    callZaloButton.innerHTML = originalZaloText;
                    callZaloButton.disabled = false;
                    callZaloButton.style.opacity = '1';
                }, 1000);
            }
        }
    }
    
    // Gắn sự kiện cho nút gọi thường
    callRegularButton.addEventListener('click', () => handleCall('regular'));
    
    // Gắn sự kiện cho nút gọi Zalo
    callZaloButton.addEventListener('click', () => handleCall('zalo'));
    
    // Cho phép nhấn Enter để gọi thường
    phoneInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            handleCall('regular');
        }
    });
    
    // Auto-format số điện thoại
    phoneInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length > 0) {
            if (value.length <= 4) {
                value = value;
            } else if (value.length <= 7) {
                value = `${value.slice(0, 4)} ${value.slice(4)}`;
            } else {
                value = `${value.slice(0, 4)} ${value.slice(4, 7)} ${value.slice(7, 11)}`;
            }
        }
        
        e.target.value = value;
    });
    
    // Điều chỉnh vị trí nếu có chatbot
    function adjustPositionForChatbot() {
        const chatWidget = document.querySelector('#chatWidget, .chat-widget, [id*="chat"], [class*="chat"], .tawk-button, .zalo-chat-widget');
        if (chatWidget) {
            const chatRect = chatWidget.getBoundingClientRect();
            const callWidget = document.getElementById('ruby-call-widget');
            
            // Đặt nút gọi điện cao hơn nút chatbot 80px
            callWidget.style.bottom = `${chatRect.height + 80}px`;
        }
    }
    
    // Re-apply position on resize
    window.addEventListener('resize', () => {
        applyWidgetPosition();
        adjustPositionForChatbot();
    });
    
    // Kiểm tra và điều chỉnh mỗi 1 giây (phòng trường hợp chatbot load sau)
    const positionCheckInterval = setInterval(() => {
        adjustPositionForChatbot();
    }, 1000);
    
    // Initial adjustments
    setTimeout(() => {
        adjustPositionForChatbot();
    }, 1000);
    
    console.log('✅ Ruby Call Widget đã sẵn sàng - Phiên bản hoàn thiện');
}

// Khởi tạo khi DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initRubyCallWidget);
} else {
    initRubyCallWidget();
}

// Đảm bảo widget vẫn hoạt động khi chuyển trang trong SPA
document.addEventListener('click', (e) => {
    if (e.target.matches('a[href*="#"]') || e.target.closest('a[href*="#"]')) {
        // Giữ widget hiển thị khi chuyển anchor link
        setTimeout(() => {
            if (window.rubyCallWidgetInitialized) {
                const widget = document.getElementById('ruby-call-widget');
                widget.style.display = 'block';
            }
        }, 100);
    }
});

// Chống ẩn widget khi scroll
window.rw_lastScrollTop = 0;
window.addEventListener('scroll', () => {
    const st = window.pageYOffset || document.documentElement.scrollTop;
    
    // Luôn hiển thị widget, không ẩn khi scroll
    const widget = document.getElementById('ruby-call-widget');
    if (widget) {
        widget.style.display = 'block';
        widget.style.opacity = '1';
    }  
    window.rw_lastScrollTop = st <= 0 ? 0 : st;
}, false);
</script>
</body>
</html>
