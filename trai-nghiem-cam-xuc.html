<!DOCTYPE html>
<html lang="vi">
<head>

<!-- ========================================================= -->
<!-- 1. RW_EVENT_ID – PHẢI SINH NGAY ĐẦU <head> (ABSOLUTE SAFE) -->
<!-- ========================================================= -->
<script>
/*
 * RW_EVENT_ID
 * - Sinh NGAY khi parse <head>
 * - Dùng cho Meta Pixel PageView + dedup CAPI
 * - KHÔNG bao giờ ghi đè
 */
(function () {
  if (!window.RW_EVENT_ID) {
    window.RW_EVENT_ID = crypto.randomUUID();
  }
})();
</script>
<script>
/**
 * Expose RW_EVENT_ID to all fetch / XHR requests
 * Used for Meta CAPI PageView deduplication
 */
(function () {
  const originalFetch = window.fetch;
  window.fetch = function (...args) {
    if (args[1] && typeof args[1] === 'object') {
      args[1].headers = args[1].headers || {};
      args[1].headers['X-RW-EVENT-ID'] = window.RW_EVENT_ID;
    }
    return originalFetch.apply(this, args);
  };
})();
</script>


<!-- OPTIONAL helper – bắt buộc có guard nội bộ -->
<script src="/js/rw-event-id.js" defer></script>

<!-- ========================================================= -->
<!-- 2. META PIXEL – PAGEVIEW ONLY (CLIENT SIDE) -->
<!-- ========================================================= -->
<script>
!function(f,b,e,v,n,t,s){
  if(f.fbq)return;
  n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];
  t=b.createElement(e);t.async=!0;
  t.src=v;
  s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s);
}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
</script>

<script>
/*
 * Meta Pixel PageView
 * - eventID = RW_EVENT_ID
 * - Dedup chuẩn với Server-side CAPI
 */
(function () {
  if (typeof fbq === 'function') {
    fbq('init', '862531473384426');
    fbq('track', 'PageView', {}, {
      eventID: window.RW_EVENT_ID
    });
  }
})();
</script>

<!-- ========================================================= -->
<!-- 3. META CLIENT PARAM BUILDER – SUPPORT SERVER CAPI -->
<!-- ========================================================= -->
<script>
/*
 * Client Param Builder
 * - KHÔNG gửi event
 * - CHỈ thu thập fbp / fbc
 * - KHÔNG sinh RW_EVENT_ID
 * - KHÔNG can thiệp PageView
 */
document.addEventListener('DOMContentLoaded', function () {
  var s = document.createElement('script');
  s.src = 'https://capi-automation.s3.us-east-2.amazonaws.com/public/client_js/capiParamBuilder/clientParamBuilder.bundle.js';
  s.async = true;
  s.onload = function () {
    try {
      if (
        window.clientParamBuilder &&
        typeof clientParamBuilder.processAndCollectAllParams === 'function'
      ) {
        clientParamBuilder.processAndCollectAllParams(
          window.location.href,
          async function () {
            // IP chuẩn lấy từ server (request.remote_addr)
            return '';
          }
        );
      }
    } catch (e) {
      console.warn('CAPI clientParamBuilder init failed', e);
    }
  };
  document.body.appendChild(s);
});
</script>

<!-- ========================================================= -->
<!-- 4. GOOGLE TAG (gtag.js) – GA4 + GOOGLE ADS -->
<!-- ========================================================= -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BD5GXRQFQZ"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('js', new Date());

/* GA4 */
gtag('config', 'G-BD5GXRQFQZ');

/* Google Ads */
gtag('config', 'AW-17558768270');
</script>

<!-- ========================================================= -->
<!-- 5. KHÔNG GTM – KHÔNG DOUBLE TRACKING -->
<!-- ========================================================= -->
<!-- === HẾT CODE TRACKING === -->
    <!-- Meta Tags Hoàn Chỉnh -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0">
    <meta name="format-detection" content="telephone=no">

    <title>Trải nghiệm Trải Nghiệm Vẻ Đẹp Thiên Nhiên Việt Nam - Kỳ Quan Từ Bắc Vào Nam | Ruby Wings</title>
    <meta name="description" content="Khám phá vẻ đẹp thiên nhiên Việt Nam với những kỳ quan thế giới: Vịnh Hạ Long, Phong Nha Kẻ Bàng, Fanxifan, Tràng An, Cố đô Huế. Trải nghiệm di sản thiên nhiên độc đáo cùng Ruby Wings với trải nghiệm linh hoạt">
    <meta name="keywords" content="thiên nhiên Việt Nam, trải nghiệm linh hoạt, về Ruby Wings, Vịnh Hạ Long, Phong Nha Kẻ Bàng, Fanxifan, Tràng An, Cố đô Huế, danh lam thắng cảnh, di sản thiên nhiên, du lịch sinh thái, kỳ quan Việt Nam, động Phong Nha, vẻ đẹp thiên nhiên, Ruby Wings Travel">
    <meta name="author" content="Ruby Wings Travel">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">

    <!-- Canonical -->
    <link rel="canonical" href="https://rubywings.vn/trai-nghiem-cam-xuc.html">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Trải Nghiệm Vẻ Đẹp Thiên Nhiên Việt Nam - Kỳ Quan Từ Bắc Vào Nam">
    <meta property="og:description" content="Khám phá những kỳ quan thiên nhiên hàng đầu Việt Nam được UNESCO công nhận">
    <meta property="og:url" content="https://rubywings.vn/trai-nghiem-cam-xuc.html">
    <meta property="og:image" content="https://rubywings.vn/images/trai-nghiem-cam-xuc.jpg">
    <meta property="og:site_name" content="Ruby Wings Travel">
    <meta property="og:locale" content="vi_VN">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Trải Nghiệm Vẻ Đẹp Thiên Nhiên Việt Nam - Kỳ Quan Từ Bắc Vào Nam">
    <meta name="twitter:description" content="Khám phá những kỳ quan thiên nhiên hàng đầu Việt Nam">
    <meta name="twitter:image" content="https://rubywings.vn/images/trai-nghiem-cam-xuc.jpg">
    <meta name="twitter:creator" content="@TienSy379">
    <script src="facebook-pixel-complete.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:wght@400;700&family=Open+Sans:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" href="https://rubywings.vn/favicon.ico" type="image/x-icon">

    <!-- Schema JSON-LD -->
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://rubywings.vn/#organization",
      "name": "Ruby Wings Travel",
      "url": "https://rubywings.vn/",
      "logo": "https://rubywings.vn/images/logofxf.png",
      "description": "Ruby Wings là đơn vị tổ chức các chương trình du lịch, tham quan và trải nghiệm gắn với thiên nhiên, văn hóa và di sản tại Việt Nam.",
      "slogan": "Bay lên từ bên trong - Hành trình trải nghiệm có chiều sâu, nơi không chỉ đến một nơi mà còn có thể trở về với chính mình",
      "sameAs": [
        "https://www.facebook.com/profile.php?id=61563772112138",
        "https://www.facebook.com/tien.sy.5011/",
        "https://www.instagram.com/tiensyrubywings",
        "https://www.tiktok.com/@syluong379",
        "https://www.youtube.com/@rubywing-slsa",
        "https://www.linkedin.com/in/ti%E1%BA%BFn-s%E1%BB%B7-l%C6%B0%C6%A1ng-9a0292387"
      ],
      "telephone": "+84-332-510-486",
      "email": "rubywingslsa@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "148 Trương Gia Mô, Vỹ Dạ",
        "addressLocality": "Thành phố Huế",
        "addressRegion": "Thừa Thiên Huế",
        "postalCode": "530000",
        "addressCountry": "VN"
      },
      "founder": {
        "@type": "Person",
        "name": "Lương Tiến Sỹ",
        "jobTitle": "Founder & CEO",
        "url": "https://www.facebook.com/tien.sy.5011/"
      },
      "knowsAbout": [
        "Du lịch thiên nhiên",
        "Du lịch di sản",
        "Du lịch văn hóa",
        "Tổ chức tour theo tuyến"
      ]
    },
    {
      "@type": "WebSite",
      "@id": "https://rubywings.vn/#website",
      "url": "https://rubywings.vn/",
      "name": "Ruby Wings Travel - Hành trình trải nghiệm cảm xúc",
      "description": "Website giới thiệu các chương trình tour và hành trình tham quan do Ruby Wings tổ chức.",
      "publisher": {
        "@id": "https://rubywings.vn/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://rubywings.vn/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "WebPage",
      "@id": "https://rubywings.vn/trai-nghiem-cam-xuc.html#webpage",
      "url": "https://rubywings.vn/trai-nghiem-cam-xuc.html",
      "name": "Trải Nghiệm Vẻ Đẹp Thiên Nhiên Việt Nam - Kỳ Quan Từ Bắc Vào Nam | Ruby Wings",
      "description": "Trang danh mục giới thiệu các chương trình tham quan và khám phá thiên nhiên Việt Nam từ Bắc vào Nam.",
      "isPartOf": {
        "@id": "https://rubywings.vn/#website"
      },
      "mainEntity": {
        "@id": "https://rubywings.vn/trai-nghiem-cam-xuc.html#service"
      },
      "primaryImageOfPage": "https://rubywings.vn/images/trai-nghiem-cam-xuc.jpg",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Trang chủ",
            "item": "https://rubywings.vn/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Trải nghiệm",
            "item": "https://rubywings.vn/trai-nghiem-cam-xuc.html"
          }
        ]
      }
    },
    {
      "@type": "Service",
      "@id": "https://rubywings.vn/trai-nghiem-cam-xuc.html#service",
      "serviceType": "Du lịch khám phá thiên nhiên",
      "name": "Trải Nghiệm Vẻ Đẹp Thiên Nhiên Việt Nam - Kỳ Quan Từ Bắc Vào Nam",
      "description": "Các chương trình tham quan và khám phá cảnh quan thiên nhiên Việt Nam, bao gồm các điểm đến tiêu biểu như Vịnh Hạ Long, Phong Nha – Kẻ Bàng, Fansipan, Tràng An, Đèo Hải Vân và hệ đầm phá Tam Giang.",
      "provider": {
        "@id": "https://rubywings.vn/#organization"
      },
      "areaServed": {
        "@type": "Country",
        "name": "Việt Nam"
      },
      "audience": {
        "@type": "PeopleAudience",
        "suggestedMinAge": 12,
        "suggestedMaxAge": 70,
        "audienceType": "Du khách, gia đình, nhóm bạn, học sinh, sinh viên và cá nhân quan tâm đến thiên nhiên và di sản thiên nhiên"
      },
      "offers": {
        "@type": "Offer",
        "availability": "https://schema.org/InStock"
      }
    },
    {
      "@type": "FAQPage",
      "@id": "https://rubywings.vn/trai-nghiem-cam-xuc.html#faq",
      "isPartOf": {
        "@id": "https://rubywings.vn/trai-nghiem-cam-xuc.html#webpage"
      },
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Ruby Wings giới thiệu những điểm thiên nhiên nào?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Các chương trình tập trung vào những điểm thiên nhiên tiêu biểu của Việt Nam như Vịnh Hạ Long, Phong Nha – Kẻ Bàng, Fansipan, Tràng An, Đèo Hải Vân và hệ đầm phá Tam Giang."
          }
        },
        {
          "@type": "Question",
          "name": "Thời điểm nào phù hợp để tham quan các tour thiên nhiên?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Các hành trình được tổ chức linh hoạt theo mùa và khu vực để phù hợp với điều kiện thời tiết từng vùng."
          }
        },
        {
          "@type": "Question",
          "name": "Tour thiên nhiên có phù hợp cho gia đình và người lớn tuổi không?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Các chương trình được thiết kế với nhiều mức độ khác nhau, phù hợp cho gia đình, người lớn tuổi và các nhóm du khách khác."
          }
        },
        {
          "@type": "Question",
          "name": "Có những hành trình cụ thể nào để khám phá thiên nhiên Việt Nam?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Ruby Wings cung cấp nhiều tour theo vùng miền và thời lượng khác nhau; thông tin chi tiết từng chương trình được giới thiệu trên website hoặc qua tư vấn trực tiếp."
          }
        }
      ]
    }
  ]
}
</script>


    <style>
        /* === Biến CSS === */
        :root {
            --color-primary: #FF4081;    /* Màu đỏ tươi pha hồng */
            --color-secondary: #2E7D32;  /* Màu xanh lá cây đậm */
            --color-secondary-light: #4CAF50; /* Màu xanh lá nhạt */
            --color-accent: #e9c46a;     /* Màu vàng ánh kim */
            --color-dark: #264653;       /* Màu xanh đậm */
            --color-light: #f8f9fa;      /* Màu nền nhẹ */
            --color-nature: #2a9d8f;     /* Màu xanh thiên nhiên */
            --color-ocean: #1a759f;      /* Màu xanh biển */
            --color-mountain: #6a4c93;   /* Màu núi */
            
            --font-heading: 'Noto Serif', serif;
            --font-body: 'Open Sans', sans-serif;
            --font-special: 'Roboto', sans-serif;
            
            --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        /* === Reset CSS === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            background-color: #fff;
            text-align: justify;
            -webkit-text-size-adjust: 100%;
        }

        h1, h2, h3, h4 {
            font-family: var(--font-heading);
            margin-bottom: 15px;
            line-height: 1.2;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        ul {
            list-style: none;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            padding: 10px 25px;
            border-radius: 30px;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn:hover {
            background: var(--color-secondary);
            transform: translateY(-3px);
            box-shadow: var(--box-shadow);
        }

        /* === Header với Mobile Menu - ĐÃ SỬA LỖI === */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: var(--transition);
            transform: translateY(0);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo img {
            height: 70px;
            width: auto;
            transition: var(--transition);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-main {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--color-primary);
            font-family: var(--font-heading);
        }

        .logo-sub {
            font-size: 1.2rem;
            color: var(--color-secondary);
            font-weight: 600;
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-links a {
            font-weight: 600;
            transition: var(--transition);
            position: relative;
            font-size: 1.15rem;
        }

        .nav-links a:hover {
            color: var(--color-primary);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            background: var(--color-primary);
            bottom: -5px;
            left: 0;
            transition: var(--transition);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* === Mobile Menu Toggle === */
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            gap: 4px;
            width: 30px;
            height: 30px;
            justify-content: center;
            align-items: center;
        }

        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background-color: var(--color-dark);
            transition: var(--transition);
            display: block;
        }

        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        .mobile-nav {
            display: none;
            flex-direction: column;
            background: white;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 1001;
            padding: 0;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-nav a {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            font-weight: 600;
            transition: var(--transition);
            text-align: left;
            font-size: 1.1rem;
        }

        .mobile-nav a:hover {
            background-color: var(--color-light);
            color: var(--color-primary);
        }

        /* === Hero Section ĐÃ CHỈNH SỬA - SỬA LỖI HEADER CHE NỘI DUNG === */
        .wonders-hero {
            height: 40vh;
            position: relative;
            display: flex;
            align-items: center;
            text-align: center;
            color: white;
            overflow: hidden;
            margin-top: 100px; /* Tăng margin-top để không bị header che */
            background: linear-gradient(135deg, var(--color-secondary) 0%, var(--color-secondary-light) 100%) !important;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .wonders-hero h1 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            line-height: 1.2;
        }

        .wonders-hero p {
            font-size: 1.1rem;
            margin-bottom: 25px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        /* === Text Justification === */
        .text-justify {
            text-align: justify;
            text-justify: inter-word;
        }

        p, .wonder-description, .footer-column p, .highlight-content p {
            text-align: justify;
            text-justify: inter-word;
        }

        .section-title h2, .wonders-hero h1, .wonders-hero p, .highlight-content p {
            text-align: center;
        }

        /* === Social Icons Single Row - ĐÃ SỬA LỖI 1 HÀNG NGANG === */
        .social-links-single-row {
            display: flex;
            flex-wrap: nowrap;
            gap: 8px;
            margin-top: 15px;
            justify-content: flex-start;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
        }

        /* Ẩn thanh cuộn trên các trình duyệt */
        .social-links-single-row::-webkit-scrollbar {
            display: none;
        }
        .social-links-single-row {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .social-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white !important;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 16px;
            flex-shrink: 0;
        }

        .social-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Màu sắc thương hiệu cho từng nền tảng */
        .social-icon.facebook { background-color: #3b5998; }
        .social-icon.facebook-personal { background-color: #1877f2; }
        .social-icon.twitter { background-color: #1da1f2; }
        .social-icon.instagram { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
        .social-icon.tiktok { background-color: #000000; }
        .social-icon.linkedin { background-color: #0077b5; }
        .social-icon.whatsapp { background-color: #25D366; }
        .social-icon.zalo { background-color: #0068FF; }
        .social-icon.youtube { background-color: #FF0000; }
        .social-icon.messenger { background: linear-gradient(135deg, #0084FF 0%, #00C6FF 100%); }

        /* === Breadcrumb === */
        .breadcrumb {
            padding: 15px 0;
            background-color: var(--color-light);
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--color-primary);
            transition: var(--transition);
        }

        .breadcrumb a:hover {
            color: var(--color-secondary);
        }

        .breadcrumb span {
            margin: 0 5px;
            color: #777;
        }

        /* === Section Title === */
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 40px;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--color-dark);
            position: relative;
            display: inline-block;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            width: 50%;
            height: 3px;
            background: var(--color-primary);
            bottom: -10px;
            left: 25%;
        }

        /* === Wonders Grid === */
        .wonders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .wonder-card {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            background: white;
            position: relative;
        }

        .wonder-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .wonder-img {
            height: 250px;
            overflow: hidden;
            position: relative;
        }

        .wonder-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .wonder-card:hover .wonder-img img {
            transform: scale(1.05);
        }

        .wonder-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            background-color: var(--color-primary);
        }

        .wonder-badge.ocean {
            background-color: var(--color-ocean);
        }

        .wonder-badge.mountain {
            background-color: var(--color-mountain);
        }

        .wonder-badge.nature {
            background-color: var(--color-nature);
        }

        .wonder-info {
            padding: 20px;
        }

        .wonder-info h3 {
            color: var(--color-dark);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .wonder-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: #666;
            font-size: 0.9rem;
        }

        .wonder-location {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .wonder-description {
            margin-bottom: 15px;
            color: #555;
        }

        .wonder-stats {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(233, 196, 106, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* === Map Section === */
        .map-section {
            background-color: var(--color-light);
            padding: 60px 0;
        }

        .map-container {
            height: 500px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--box-shadow);
            margin-top: 30px;
            position: relative;
        }

        .map-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px;
            z-index: 10;
        }

        /* === Highlights Section === */
        .highlights-section {
            padding: 60px 0;
        }

        .highlight-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .highlight-content p {
            margin-bottom: 30px;
            font-size: 1.1rem;
            color: #666;
        }

        .highlight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .highlight-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            text-align: center;
        }

        .highlight-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .highlight-icon {
            width: 60px;
            height: 60px;
            background: var(--color-accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.5rem;
            color: var(--color-dark);
        }

        /* === Journey Link Section === */
        .journey-link-section {
            padding: 60px 0;
            background: linear-gradient(135deg, #f8faf8 0%, #e8f5e9 100%);
        }

        .journey-link-wrapper {
            max-width: 800px;
            margin: 0 auto;
        }

        .journey-link {
            display: block;
            background: linear-gradient(135deg, #2E7D32 0%, #4CAF50 100%);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            padding: 30px 40px;
            box-shadow: 0 10px 30px rgba(46, 125, 50, 0.3);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            overflow: hidden;
        }

        .journey-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(46, 125, 50, 0.4);
            background: linear-gradient(135deg, #FF4081 0%, #ff1493 100%);
        }

        .journey-link-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }

        .journey-link-icon {
            font-size: 3rem;
            margin-right: 25px;
            transition: transform 0.3s ease;
        }

        .journey-link:hover .journey-link-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .journey-link-text {
            flex: 1;
        }

        .journey-link-text h3 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 700;
            font-family: 'Noto Serif', serif;
        }

        .journey-link-text p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0;
        }

        .journey-link-arrow {
            font-size: 1.8rem;
            margin-left: 20px;
            transition: transform 0.3s ease;
        }

        .journey-link:hover .journey-link-arrow {
            transform: translateX(8px);
        }

        .journey-link-hover {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .journey-link:hover .journey-link-hover {
            left: 100%;
        }

        /* === Footer === */
        footer {
            background: var(--color-dark);
            color: white;
            padding: 60px 0 20px;
            background: linear-gradient(135deg, var(--color-dark) 0%, var(--color-secondary) 100%);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 35px;
        }

        .footer-column h3 {
            color: var(--color-accent);
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            font-size: 1.4rem;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 3px;
            background: var(--color-accent);
            bottom: 0;
            left: 0;
        }

        .footer-column p {
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .contact-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .copyright {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 0.95rem;
        }

        /* === Nút tham gia cộng đồng === */
        .community-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 20px;
            background-color: var(--color-primary);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .community-btn:hover {
            background-color: var(--color-accent);
            color: var(--color-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .footer-title-link {
            color: inherit;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-title-link:hover {
            color: var(--color-primary);
        }

        /* === Responsive với Mobile-First - ĐÃ SỬA LỖI HEADER === */
        @media (max-width: 992px) {
            .wonders-hero h1 {
                font-size: 2rem;
            }
            
            .wonders-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .wonders-hero {
                height: 35vh;
                margin-top: 90px; /* Tăng margin-top cho mobile */
            }
            
            .wonders-hero h1 {
                font-size: 1.8rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .mobile-menu-toggle {
                display: flex;
            }
            
            .logo img {
                height: 60px;
            }
            
            .logo-main {
                font-size: 2rem;
            }
            
            .logo-sub {
                font-size: 1rem;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .map-container {
                height: 400px;
            }
            
            .social-links-single-row {
                justify-content: flex-start;
            }

            /* Journey Link Responsive */
            .journey-link-section {
                padding: 40px 0;
            }

            .journey-link {
                padding: 25px 30px;
            }

            .journey-link-content {
                flex-direction: column;
                text-align: center;
            }

            .journey-link-icon {
                margin-right: 0;
                margin-bottom: 15px;
                font-size: 2.5rem;
            }

            .journey-link-text h3 {
                font-size: 1.5rem;
            }

            .journey-link-text p {
                font-size: 1rem;
            }

            .journey-link-arrow {
                margin-left: 0;
                margin-top: 15px;
            }
        }

        @media (max-width: 480px) {
            .wonders-hero {
                height: 30vh;
                margin-top: 85px; /* Tăng margin-top cho mobile nhỏ */
            }
            
            .wonders-hero h1 {
                font-size: 1.5rem;
            }
            
            .wonders-hero p {
                font-size: 0.9rem;
            }
            
            .logo img {
                height: 50px;
            }
            
            .logo-main {
                font-size: 1.8rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .wonders-grid {
                grid-template-columns: 1fr;
            }
            
            .map-container {
                height: 300px;
            }
            
            .social-icon {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }

            /* Journey Link Mobile */
            .journey-link {
                padding: 20px 25px;
                border-radius: 15px;
            }

            .journey-link-text h3 {
                font-size: 1.3rem;
            }

            .journey-link-text p {
                font-size: 0.95rem;
            }

            .journey-link-icon {
                font-size: 2rem;
            }

            .journey-link-arrow {
                font-size: 1.5rem;
            }
        }

        /* Ngăn chặn thu nhỏ trên mobile */
        @media (max-width: 768px) {
            body {
                touch-action: pan-y;
            }
            
            input, textarea, select {
                font-size: 16px !important;
            }
        }
    </style>
</head>

<body>
    <!-- Header với Mobile Menu - ĐÃ SỬA LỖI -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <img src="assets/images/ruby-wings-logo.png" alt="Ruby Wings Travel Logo - Công ty du lịch trải nghiệm thiên nhiên Việt Nam" height="70">
                <div class="logo-text">
                    <div class="logo-main">RUBY WINGS</div>
                    <div class="logo-sub">Travel - Hành trình trải nghiệm</div>
                </div>
            </div>
            <nav class="nav-links">
                <a href="index.html">Trang chủ</a>
                <a href="tuyen-ngon-sang-lap-ruby-wings.html">Về Ruby Wings chúng tôi</a>
                <a href="ve-dep-quang-tri.html">Khám phá Miền Trung</a>
                <a href="nhung-hanh-trinh-tieu-bieu.html">Hành trình tiêu biểu</a>
                <a href="trai-nghiem-cam-xuc.html">Trải nghiệm</a>
                <a href="thien-va-suc-khoe.html">Retreat- Chữa lành</a>
            </nav>
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <a href="index.html">Trang chủ</a>
            <a href="tuyen-ngon-sang-lap-ruby-wings.html">Về Ruby Wings chúng tôi</a>
            <a href="ve-dep-quang-tri.html">Khám phá Miền Trung</a>
            <a href="nhung-hanh-trinh-tieu-bieu.html">Hành trình tiêu biểu</a>
            <a href="trai-nghiem-cam-xuc.html">Trải nghiệm cảm xúc</a>
            <a href="thien-va-suc-khoe.html">Retreat- Chữa lành</a>
        </nav>
    </header>

    <!-- Hero Section ĐÃ CHỈNH SỬA - KHÔNG BỊ HEADER CHE -->
    <section class="wonders-hero">
        <div class="hero-content">
            <h1>KỲ QUAN THIÊN NHIÊN VIỆT NAM</h1>
            <p>Khám phá những tuyệt tác thiên nhiên được tạo hóa ban tặng cho dải đất hình chữ S</p>
            <a href="#wonders" class="btn">Khám phá ngay</a>
        </div>
    </section>

    <!-- Breadcrumb -->
    <div class="breadcrumb container">
        <a href="index.html">Trang chủ</a>
        <span>/</span>
        <a href="kham-pha.html">Khám phá</a>
        <span>/</span>
        <a href="trai-nghiem-cam-xuc.html">Kỳ quan thiên nhiên</a>
    </div>

    <!-- Introduction Section -->
    <section class="container">
        <div class="section-title">
            <h2>VẺ ĐẸP THIÊN NHIÊN & DU LỊCH BỀN VỮNG</h2>
        </div>
        <div style="text-align: center; max-width: 800px; margin: 0 auto 40px;">
            <p class="text-justify">Việt Nam sở hữu những kỳ quan thiên nhiên đa dạng và độc đáo từ Bắc chí Nam. Từ vịnh Hạ Long huyền thoại được UNESCO công nhận là di sản thiên nhiên thế giới, đến đỉnh Fansipan - nóc nhà Đông Dương hùng vĩ, hay hệ đầm phá Tam Giang - hệ đầm phá lớn nhất Đông Nam Á. Mỗi kỳ quan mang trong mình vẻ đẹp riêng, tạo nên bức tranh thiên nhiên Việt Nam vô cùng phong phú và đa dạng.</p>
        </div>
    </section>

    <!-- Wonders Grid Section -->
    <section id="wonders" class="container">
        <div class="section-title">
            <h2>KỲ QUAN NỔI BẬT</h2>
        </div>
        
        <div class="wonders-grid">
            <!-- Vịnh Hạ Long -->
            <div class="wonder-card">
                <div class="wonder-img">
                    <img src="assets/images/ha-long-bay.jpg" alt="Vịnh Hạ Long - Di sản thiên nhiên thế giới với hàng nghìn đảo đá vôi">
                    <span class="wonder-badge ocean">Di sản thế giới</span>
                </div>
                <div class="wonder-info">
                    <h3>Vịnh Hạ Long - Di sản thiên nhiên thế giới</h3>
                    <div class="wonder-meta">
                        <span class="wonder-location">
                            <i class="fas fa-map-marker-alt"></i> Tỉnh Quảng Ninh
                        </span>
                        <span><i class="fas fa-clock"></i> Cách Hà Nội 170km</span>
                    </div>
                    <p class="wonder-description">Với hàng nghìn hòn đảo đá vôi nhấp nhô trên mặt nước biển xanh ngọc, vịnh Hạ Long là kiệt tác thiên nhiên được UNESCO công nhận là di sản thế giới năm 1994.</p>
                    <div class="wonder-stats">
                        <div class="stat-item">
                            <i class="fas fa-route"></i> 1,553 km² diện tích
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-mountain"></i> 1,969 hòn đảo
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-water"></i> Độ sâu 6-10m
                        </div>
                    </div>
                    <a href="mien_bac_di_san_tam_linh_thien_nhien.html" class="btn" style="margin-top: 15px; display: inline-block;">Khám phá tour</a>
                </div>
            </div>
            
            <!-- Fansipan -->
            <div class="wonder-card">
                <div class="wonder-img">
                    <img src="assets/images/fansipan.jpg" alt="Đỉnh Fansipan - Nóc nhà Đông Dương cao 3,147m">
                    <span class="wonder-badge mountain">Nóc nhà Đông Dương</span>
                </div>
                <div class="wonder-info">
                    <h3>Fansipan - Nóc nhà Đông Dương</h3>
                    <div class="wonder-meta">
                        <span class="wonder-location">
                            <i class="fas fa-map-marker-alt"></i> Dãy Hoàng Liên Sơn
                        </span>
                        <span><i class="fas fa-clock"></i> Cách Sapa 9km</span>
                    </div>
                    <p class="wonder-description">Với độ cao 3,147m, Fansipan là đỉnh núi cao nhất Đông Dương, được mệnh danh là "nóc nhà Đông Dương". Nơi đây có hệ sinh thái rừng á nhiệt đới đa dạng.</p>
                    <div class="wonder-stats">
                        <div class="stat-item">
                            <i class="fas fa-mountain"></i> 3,147m độ cao
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-leaf"></i> 2,024 loài thực vật
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-temperature-low"></i> 0-15°C quanh năm
                        </div>
                    </div>
                    <a href="trai_nghiem_tinh_hoa_bac_bo_ha_noi_sa_pa_phu_tho.html" class="btn" style="margin-top: 15px; display: inline-block;">Khám phá tour</a>
                </div>
            </div>
            
            <!-- Phong  -->
            <div class="wonder-card">
                <div class="wonder-img">
                    <img src="assets/images/phong-nha-ke-bang.jpg" alt="Vườn Quốc gia Phong Nha Kẻ Bàng - Di sản thiên nhiên thế giới">
                    <span class="wonder-badge nature">Di sản thế giới</span>
                </div>
                <div class="wonder-info">
                    <h3>Phong Nha Kẻ Bàng - Vương quốc hang động</h3>
                    <div class="wonder-meta">
                        <span class="wonder-location">
                            <i class="fas fa-map-marker-alt"></i> Tỉnh Quảng Bình
                        </span>
                        <span><i class="fas fa-clock"></i> Cách Đồng Hới 50km</span>
                    </div>
                    <p class="wonder-description">Vườn quốc gia Phong Nha Kẻ Bàng được UNESCO công nhận là di sản thiên nhiên thế giới với hệ thống hang động lớn nhất thế giới, bao gồm hang Sơn Đoòng - hang động tự nhiên lớn nhất thế giới.</p>
                    <div class="wonder-stats">
                        <div class="stat-item">
                            <i class="fas fa-mountain"></i> 2.000 km² diện tích
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-cave"></i> 300 hang động
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-tree"></i> Rừng nguyên sinh
                        </div>
                    </div>
                    <a href="phong-nha-ke-bang.html" class="btn" style="margin-top: 15px; display: inline-block;">Khám phá tour</a>
                </div>
            </div>
            
            <!-- Đồng bằng sông Cửu Long -->
            <div class="wonder-card">
                <div class="wonder-img">
                    <img src="assets/images/dong-bang-song-cuu-long.jpg" alt="Đồng bằng sông Cửu Long - Vựa lúa lớn nhất Việt Nam">
                    <span class="wonder-badge nature">Vựa lúa quốc gia</span>
                </div>
                <div class="wonder-info">
                    <h3>Đồng bằng sông Cửu Long - Vựa lúa quốc gia</h3>
                    <div class="wonder-meta">
                        <span class="wonder-location">
                            <i class="fas fa-map-marker-alt"></i> Miền Tây Nam Bộ
                        </span>
                        <span><i class="fas fa-clock"></i> 13 tỉnh thành</span>
                    </div>
                    <p class="wonder-description">Là vùng đồng bằng châu thổ rộng lớn với hệ thống sông ngòi chằng chịt, nơi đây cung cấp hơn 50% sản lượng lúa gạo và 65% sản lượng trái cây cả nước.</p>
                    <div class="wonder-stats">
                        <div class="stat-item">
                            <i class="fas fa-ruler-combined"></i> 40,547 km² diện tích
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-water"></i> 9 nhánh sông
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-utensils"></i> 50% lương thực cả nước
                        </div>
                    </div>
                    <a href="mien_dat_tru_phu_sac_mau_phuong_nam.html" class="btn" style="margin-top: 15px; display: inline-block;">Khám phá tour</a>
                </div>
            </div>
            
            <!-- Đèo Hải Vân -->
            <div class="wonder-card">
                <div class="wonder-img">
                    <img src="assets/images/hai-van-pass.jpg" alt="Đèo Hải Vân - Thiên hạ đệ nhất hùng quan">
                    <span class="wonder-badge mountain">Thiên hạ đệ nhất hùng quan</span>
                </div>
                <div class="wonder-info">
                    <h3>Đèo Hải Vân - Thiên hạ đệ nhất hùng quan</h3>
                    <div class="wonder-meta">
                        <span class="wonder-location">
                            <i class="fas fa-map-marker-alt"></i> Giữa Đà Nẵng & Huế
                        </span>
                        <span><i class="fas fa-clock"></i> Dài 20km</span>
                    </div>
                    <p class="wonder-description">Được mệnh danh là "Thiên hạ đệ nhất hùng quan", đèo Hải Vân với độ cao 500m so với mực nước biển, uốn lượn quanh co giữa núi rừng và biển cả.</p>
                    <div class="wonder-stats">
                        <div class="stat-item">
                            <i class="fas fa-mountain"></i> 500m độ cao
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-road"></i> 20km chiều dài
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-history"></i> Xây dựng 1306
                        </div>
                    </div>
                    <a href="mien_trung_di_san_kham_pha_quy_nhon_phu_yen.html" class="btn" style="margin-top: 15px; display: inline-block;">Khám phá tour</a>
                </div>
            </div>
            
            <!-- Đầm phá Tam Giang -->
            <div class="wonder-card">
                <div class="wonder-img">
                    <img src="assets/images/tam-giang-lagoon.jpg" alt="Đầm phá Tam Giang - Hệ đầm phá lớn nhất Đông Nam Á">
                    <span class="wonder-badge ocean">Hệ đầm phá lớn nhất</span>
                </div>
                <div class="wonder-info">
                    <h3>Đầm phá Tam Giang - Hệ đầm phá lớn nhất Đông Nam Á</h3>
                    <div class="wonder-meta">
                        <span class="wonder-location">
                            <i class="fas fa-map-marker-alt"></i> Tỉnh Thừa Thiên Huế
                        </span>
                        <span><i class="fas fa-clock"></i> Dài 68km</span>
                    </div>
                    <p class="wonder-description">Với chiều dài 68km, đầm phá Tam Giang là hệ đầm phá nước lợ lớn nhất Đông Nam Á, nơi giao hòa giữa sông và biển, tạo nên cảnh quan độc đáo.</p>
                    <div class="wonder-stats">
                        <div class="stat-item">
                            <i class="fas fa-ruler-combined"></i> 52km² diện tích
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-water"></i> 68km chiều dài
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-fish"></i> 200 loài thủy sản
                        </div>
                    </div>
                    <a href="pha-tam-giang.html" class="btn" style="margin-top: 15px; display: inline-block;">Khám phá tour</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section">
        <div class="container">
            <div class="section-title">
                <h2>TTUYỆT ĐẸP - KỲ QUAN</h2>
            </div>
            
            <div class="map-container">
                <img src="assets/images/vietnam-wonders-map.jpg" alt="Bản đồ phân bố các kỳ quan thiên nhiên nổi bật của Việt Nam">
                <div class="map-overlay">
                    <p>Các kỳ quan thiên nhiên nổi bật của Việt Nam</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Highlights Section -->
    <section class="highlights-section">
        <div class="container">
            <div class="section-title">
                <h2>TRẢI NGHIỆM ĐỘC ĐÁO</h2>
            </div>
            
            <div class="highlight-content">
                <p>Khám phá những kỳ quan thiên nhiên Việt Nam với những trải nghiệm độc đáo không thể tìm thấy ở bất cứ nơi nào khác trên thế giới</p>
            </div>
            
            <div class="highlight-grid">
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <i class="fas fa-ship"></i>
                    </div>
                    <h4>Du thuyền vịnh Hạ Long</h4>
                    <p>Ngủ đêm trên du thuyền giữa vịnh biển đảo</p>
                </div>
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <i class="fas fa-hiking"></i>
                    </div>
                    <h4>Leo núi Fansipan</h4>
                    <p>Chinh phục nóc nhà Đông Dương</p>
                </div>
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h4>Ẩm thực miền Tây</h4>
                    <p>Thưởng thức đặc sản đồng bằng sông Cửu Long</p>
                </div>
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <i class="fas fa-motorcycle"></i>
                    </div>
                    <h4>Phượt đèo Hải Vân</h4>
                    <p>Trải nghiệm cung đường đèo đẹp nhất Việt Nam</p>
                </div>
                <div class="highlight-item">
                    <div class="highlight-icon">
                        <i class="fas fa-fish"></i>
                    </div>
                    <h4>Đánh bắt cùng ngư dân</h4>
                    <p>Trải nghiệm cuộc sống ngư dân đầm phá Tam Giang</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Link to Hành Trình Tiêu Biểu -->
    <section class="journey-link-section">
        <div class="container">
            <div class="journey-link-wrapper">
                <a href="nhung-hanh-trinh-tieu-bieu.html" class="journey-link">
                    <div class="journey-link-content">
                        <div class="journey-link-icon">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        <div class="journey-link-text">
                            <h3>Khám Phá Tất Cả Hành Trình Tiêu Biểu</h3>
                            <p>Xem ngay các tour trải nghiệm đặc sắc khác của Ruby Wings</p>
                        </div>
                        <div class="journey-link-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                    <div class="journey-link-hover"></div>
                </a>
            </div>
        </div>
    </section>
<style>
/* === RUBY WINGS CONSULTATION BUTTON - MOBILE GREEN VERSION === */
.rw-consult-btn-container {
    display: block !important;
    margin: 25px 0 !important;
    text-align: center !important;
    width: 100% !important;
}

.rw-consult-btn-main {
    /* Reset mọi style mặc định */
    all: unset !important;
    
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    text-decoration: none !important;
    
    /* Kích thước và khoảng cách */
    padding: 18px 35px !important;
    margin: 10px auto !important;
    
    /* Kiểu dáng */
    border-radius: 50px !important;
    border: 3px solid #2cec2c !important;
    font-weight: 800 !important;
    font-size: 18px !important;
    line-height: 1.3 !important;
    text-align: center !important;
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
    
    /* Màu sắc - XANH LÁ CÂY + CHỮ VÀNG */
    background: linear-gradient(135deg, #2cec2c 0%, #22cc22 100%) !important;
    color: #ffd700 !important;
    cursor: pointer !important;
    
    /* Hiệu ứng */
    transition: all 0.4s ease !important;
    position: relative !important;
    overflow: hidden !important;
    box-shadow: 0 6px 20px rgba(44, 236, 44, 0.3) !important;
    
    /* Font chữ rõ ràng */
    font-family: 'Arial', 'Helvetica', sans-serif !important;
}

/* TEXT - CHỮ MÀU VÀNG NỔI BẬT */
.rw-consult-btn-main .rw-btn-text {
    color: #f3f5f8 !important;
    font-weight: 800 !important;
    font-size: 18px !important;
    text-shadow: 0 1px 3px rgba(0,0,0,0.3) !important;
    z-index: 2 !important;
    position: relative !important;
}

/* === HIỆU ỨNG HOVER - CHUYỂN MÀU ĐẬM DẦN === */
.rw-consult-btn-main:hover {
    transform: translateY(-4px) scale(1.05) !important;
    box-shadow: 0 12px 30px rgba(44, 236, 44, 0.5) !important;
    background: linear-gradient(135deg, #32ff32 0%, #1a991a 100%) !important;
    border-color: #32ff32 !important;
    color: #ffd700 !important;
}

.rw-consult-btn-main:hover .rw-btn-text {
    color: #ffd700 !important;
}

/* Hiệu ứng ánh sáng trượt */
.rw-consult-btn-main::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: -100% !important;
    width: 100% !important;
    height: 100% !important;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent) !important;
    transition: left 0.7s ease !important;
    z-index: 1 !important;
}

.rw-consult-btn-main:hover::before {
    left: 100% !important;
}

/* === MOBILE RESPONSIVE - 1 DÒNG & TỐI ƯU === */
@media (max-width: 768px) {
    .rw-consult-btn-main {
        padding: 16px 25px !important;
        font-size: 16px !important;
        width: 95% !important;
        max-width: 320px !important;
        display: flex !important; /* Đảm bảo 1 dòng */
        flex-wrap: nowrap !important;
        white-space: nowrap !important;
    }
    
    .rw-consult-btn-main .rw-btn-text {
        font-size: 16px !important;
        white-space: nowrap !important;
        /* BỎ MŨI TÊN - chỉ hiển thị text */
    }
    
    /* Ẩn hoàn toàn mũi tên trên mobile */
    .rw-consult-btn-main .rw-btn-arrow {
        display: none !important;
    }
    
    /* Màu mobile - xanh lá nhạt */
    .rw-consult-btn-main {
        background: linear-gradient(135deg, #2bdc2b 0%, #1a9f1a 100%) !important;
        border-color: #2cec2c !important;
    }
}

@media (max-width: 480px) {
    .rw-consult-btn-main {
        padding: 14px 20px !important;
        font-size: 15px !important;
        margin: 8px auto !important;
    }
    
    .rw-consult-btn-main .rw-btn-text {
        font-size: 15px !important;
        letter-spacing: 0.5px !important;
    }
}

/* Desktop - vẫn giữ mũi tên */
@media (min-width: 769px) {
    .rw-consult-btn-main .rw-btn-arrow {
        margin-left: 12px !important;
        transition: transform 0.3s ease !important;
        font-weight: bold !important;
        font-size: 18px !important;
        color: #fff3af !important;
        z-index: 2 !important;
        position: relative !important;
    }
    
    .rw-consult-btn-main:hover .rw-btn-arrow {
        transform: translateX(4px) !important;
    }
}

/* Đảm bảo không bị ảnh hưởng bởi CSS khác */
.rw-consult-btn-container * {
    box-sizing: border-box !important;
}
</style>

<!-- === COPY TOÀN BỘ ĐOẠN NÀY VÀ DÁN VÀO CUỐI LANDING PAGE === -->


<!-- META PIXEL & TRACKING CODE -->
<script>
!function(f,b,e,v,n,t,s){
if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init','862531473384426');fbq('track','PageView');
</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=862531473384426&ev=PageView&noscript=1"/></noscript>

<script>
// HÀM TỰ ĐỘNG NHẬN DIỆN LANDING PAGE
function getCurrentPageType() {
    const url = window.location.href.toLowerCase();
    
    // TỰ ĐỘNG NHẬN DIỆN TRANG QUA URL
    if (url.includes('team-building') || url.includes('teambuilding')) return 'landing_teambuilding';
    if (url.includes('retreat') || url.includes('thien')) return 'landing_retreat';
    if (url.includes('coaching') || url.includes('cam-xuc')) return 'landing_coaching';
    if (url.includes('khoa-hoc') || url.includes('training')) return 'landing_training';
    if (url.includes('blog') || url.includes('tin-tuc')) return 'blog';
    if (url.includes('dich-vu') || url.includes('service')) return 'service_page';
    if (url === '/' || url.includes('home') || url.includes('index')) return 'homepage';
    
    return 'landing_other'; // Mặc định
}

// HÀM TRACKING KHI CLICK NÚT - ĐÃ TÍCH HỢP FANPAGE
function trackConsultationClick() {
    const pageType = getCurrentPageType();
    
    console.log('🎯 Click từ landing page:', pageType, '- Gửi data đến Fanpage...');

    // FACEBOOK PIXEL TRACKING - TỐI ƯU CHO FANPAGE
    if (typeof fbq !== 'undefined') {
        // 1. SỰ KIỆN LEAD - cho quảng cáo conversion
        fbq('track', 'Lead', {
            content_name: pageType + ' - Ruby Wings',
            content_category: 'travel_consultation',
            content_ids: ['1145041937161910'],
            value: 150000, // 💰 GIÁ TRỊ LEAD - quan trọng cho ROI
            currency: 'VND',
            page_type: pageType,
            fanpage_connected: true // ✅ Đánh dấu kết nối fanpage
        });

        // 2. SỰ KIỆN COMPLETE REGISTRATION - Facebook ưa thích
        fbq('track', 'CompleteRegistration', {
            content_name: 'Ruby Wings Consultation - ' + pageType,
            status: 'success',
            predicted_ltv: 5000000, // 📈 Dự đoán giá trị khách hàng
            content_category: pageType,
            fanpage_id: '393607737167958' // ✅ ID Fanpage Ruby Wings
        });

        // 3. CUSTOM EVENT - cho fanpage insights
        fbq('trackCustom', 'FanpageLead', {
            fanpage_name: 'Ruby Wings - Hành trình trải nghiệm cảm xúc',
            fanpage_id: '393607737167958',
            source: 'landing_page',
            page_type: pageType,
            catalog_id: '1145041937161910',
            button_location: 'fixed_bottom'
        });

        console.log('✅ Đã gửi 3 sự kiện đến Fanpage & Pixel');
    }

    // GOOGLE ANALYTICS
    if (typeof gtag !== 'undefined') {
        gtag('event', 'consultation_click', {
            'event_category': pageType,
            'event_label': 'Consultation Button - ' + pageType,
            'value': 150000
        });
    }
}

// TỰ ĐỘNG CHẠY KHI TRANG LOAD - GỬI DATA ĐẾN FANPAGE
document.addEventListener('DOMContentLoaded', function() {
    const pageType = getCurrentPageType();
    console.log('🚀 Ruby Wings Landing loaded:', pageType, '- Khởi tạo Fanpage tracking...');
    
    // TỰ ĐỘNG TRACK CÁC SỰ KIỆN CHO FANPAGE
    if (typeof fbq !== 'undefined') {
        // 1. VIEW CONTENT - fanpage biết trang được xem
        fbq('track', 'ViewContent', {
            content_name: pageType + ' - Ruby Wings',
            content_category: 'Travel',
            content_ids: ['1145041937161910'],
            content_type: 'product',
            fanpage_connected: true
        });

        // 2. CUSTOM EVENT - gửi page info đến fanpage
        fbq('trackCustom', 'LandingPageView', {
            fanpage_id: '393607737167958',
            page_url: window.location.href,
            page_type: pageType,
            landing_name: getLandingPageName(pageType),
            catalog_connected: true
        });
    }
    
    // HIỆU ỨNG NÚT BẤM
    const btn = document.querySelector('.rw-consult-btn-main');
    if (btn) {
        btn.addEventListener('mouseenter', () => {
            btn.style.transform = 'translateY(-2px) scale(1.02)';
        });
        btn.addEventListener('mouseleave', () => {
            btn.style.transform = 'translateY(0) scale(1)';
        });
        btn.addEventListener('mousedown', () => {
            btn.style.transform = 'translateY(1px) scale(0.98)';
        });
        btn.addEventListener('mouseup', () => {
            btn.style.transform = 'translateY(-2px) scale(1.02)';
        });
    }
});

// HÀM LẤY TÊN HIỂN THỊ CHO LANDING PAGE
function getLandingPageName(pageType) {
    const nameMap = {
        'landing_teambuilding': 'Team Building - Trải nghiệm gắn kết',
        'landing_retreat': 'Retreat & Thiền định - Cân bằng cảm xúc',
        'landing_coaching': 'Coaching cảm xúc - Thấu hiểu bản thân',
        'landing_training': 'Khóa học phát triển bản thân',
        'blog': 'Blog chia sẻ kinh nghiệm',
        'service_page': 'Trang dịch vụ Ruby Wings',
        'homepage': 'Trang chủ Ruby Wings',
        'landing_other': 'Landing Page khác'
    };
    return nameMap[pageType] || 'Ruby Wings Landing Page';
}

// THEO DÕI SCROLL - gửi data đến fanpage khi user tương tác
let maxScroll = 0;
window.addEventListener('scroll', function() {
    const currentScroll = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
    
    if (currentScroll > maxScroll) {
        maxScroll = currentScroll;
        
        // Gửi scroll data đến fanpage ở các mốc quan trọng
        if (maxScroll > 50 && typeof fbq !== 'undefined') {
            fbq('trackCustom', 'PageScroll', {
                fanpage_id: '393607737167958',
                scroll_percentage: Math.round(maxScroll),
                page_type: getCurrentPageType(),
                engagement: 'high'
            });
        }
    }
});
</script>

<style>
.rw-consult-btn-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
}
.rw-consult-btn-main {
    display: inline-flex;
    align-items: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 24px;
    border-radius: 50px;
    text-decoration: none;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
    border: 2px solid transparent;
}
.rw-consult-btn-main:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    border-color: rgba(255,255,255,0.3);
}
.rw-btn-text {
    margin-right: 8px;
    font-size: 14px;
}
.rw-btn-arrow {
    font-weight: bold;
    transition: transform 0.2s ease;
}
.rw-consult-btn-main:hover .rw-btn-arrow {
    transform: translateX(3px);
}
@media (max-width: 768px) {
    .rw-consult-btn-container {
        bottom: 10px;
        right: 10px;
        left: 10px;
    }
    .rw-consult-btn-main {
        width: 100%;
        justify-content: center;
        padding: 15px 20px;
    }
    .rw-btn-text {
        font-size: 13px;
    }
}

/* Hiệu ứng pulse để thu hút attention */
@keyframes pulse-gentle {
    0% { box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); }
    50% { box-shadow: 0 4px 20px rgba(102, 126, 234, 0.6); }
    100% { box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); }
}

.rw-consult-btn-main {
    animation: pulse-gentle 2s infinite;
}
</style>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3><a href="tuyen-ngon-sang-lap-ruby-wings.html" class="footer-title-link">Về chúng tôi</a></h3>
                    <p class="text-justify">Ruby Wings Travel - "Nơi bạn không chỉ đến một nơi, mà còn có thể được trở về với chính mình".</p>
                    <p>MST: 3301743759</p>
                    <!-- Social Icons ĐÃ SỬA - 1 HÀNG NGANG -->
                    <div class="social-links-single-row">
                        <a href="https://www.facebook.com/profile.php?id=61563772112138" target="_blank" class="social-icon facebook" title="Facebook Fanpage Ruby Wings" aria-label="Facebook Fanpage">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.facebook.com/tien.sy.5011/" target="_blank" class="social-icon facebook-personal" title="Facebook Cá nhân Lương Tiến Sỹ" aria-label="Facebook Cá nhân">
                            <i class="fas fa-user"></i>
                        </a>
                        <a href="https://x.com/TienSy379" target="_blank" class="social-icon twitter" title="Twitter Ruby Wings" aria-label="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="https://www.instagram.com/tiensyrubywings" target="_blank" class="social-icon instagram" title="Instagram Ruby Wings" aria-label="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.tiktok.com/@syluong379" target="_blank" class="social-icon tiktok" title="TikTok Ruby Wings" aria-label="TikTok">
                            <i class="fab fa-tiktok"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/ti%E1%BA%BFn-s%E1%BB%B9-l%C6%B0%C6%A1ng-9a0292387" target="_blank" class="social-icon linkedin" title="LinkedIn Lương Tiến Sỹ" aria-label="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://wa.me/84332510486" target="_blank" class="social-icon whatsapp" title="WhatsApp Ruby Wings" aria-label="WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="https://zalo.me/84332510486" target="_blank" class="social-icon zalo" title="Zalo Ruby Wings" aria-label="Zalo">
                            <i class="fas fa-comment-dots"></i>
                        </a>
                        <a href="https://www.youtube.com/@rubywing-slsa" target="_blank" class="social-icon youtube" title="YouTube Ruby Wings" aria-label="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://m.me/tien.sy.5011" target="_blank" class="social-icon messenger" title="Messenger Ruby Wings" aria-label="Messenger">
                            <i class="fab fa-facebook-messenger"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Liên Hệ</h3>
                    <div class="contact-info">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>148 Trương Gia Mô, Vỹ Dạ TP. Huế</span>
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-phone"></i>
                        <span>0332510486</span>
                    </div>
                    <div class="contact-info">
                        <i class="fab fa-whatsapp"></i>
                        <span>0332510486 (WhatsApp/Zalo)</span>
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-envelope"></i>
                        <span><a href="mailto:rubywingslsa@gmail.com">rubywingslsa@gmail.com</a></span>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Tham gia cộng đồng</h3>
                    <p class="text-justify">Tham gia nhóm cộng đồng Ruby Wings Travel để nhận những thông tin mới nhất, chia sẻ trải nghiệm và lan tỏa giá trị du lịch có trách nhiệm.</p>
                    <a href="https://www.facebook.com/groups/4107197836205156/" target="_blank" class="community-btn">
                        Tham gia nhóm <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
           
        </div>
    </footer>

    <!-- Minimal JavaScript -->
    <script>
        // Mobile Menu Toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const mobileNav = document.getElementById('mobileNav');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    mobileNav.classList.toggle('active');
                });
            }

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.header-container') && !event.target.closest('.mobile-nav')) {
                    mobileNav.classList.remove('active');
                    mobileMenuToggle.classList.remove('active');
                }
            });

            // Header scroll effect - ĐÃ SỬA LỖI HEADER TRÊN MOBILE
            let lastScrollTop = 0;
            const header = document.querySelector('header');
            const scrollThreshold = 50;

            window.addEventListener('scroll', function() {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // Trên mobile, ẩn header khi cuộn xuống, hiện khi cuộn lên
                if (window.innerWidth <= 768) {
                    if (scrollTop > lastScrollTop && scrollTop > scrollThreshold) {
                        // Cuộn xuống - ẩn header
                        header.style.transform = 'translateY(-100%)';
                    } else {
                        // Cuộn lên - hiện header
                        header.style.transform = 'translateY(0)';
                    }
                } else {
                    // Trên desktop, chỉ thay đổi box-shadow
                    if (scrollTop > 100) {
                        header.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                    } else {
                        header.style.boxShadow = 'none';
                    }
                }
                
                lastScrollTop = scrollTop;
            });

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                    // Close mobile menu if open
                    mobileNav.classList.remove('active');
                    mobileMenuToggle.classList.remove('active');
                });
            });
        });
    </script>
    <!-- RUBY WINGS – META PIXEL LOGIC + CONSULT BUTTON (FINAL, FIX MAP, FIX DEEPSCROLL, NO FALLBACK) -->
<script>
(function(){
'use strict';

/* =========================================================
   CONFIG
========================================================= */
const SCROLL_DEPTH = 80;
const ENGAGED_TIME = 30000;

/* =========================================================
   CONTENT ID MAP (ÉP MAP – KHÔNG AUTO)
========================================================= */
const CONTENT_ID_MAP = {
  '': 'RW_HOME',
  'nhung-hanh-trinh-tieu-bieu': 'RW_LANDING_FEATURED',
  'nhung-hanh-trinh-tham-quan-trai-nghiem-linh-hoat': 'RW_LANDING_FLEX',
  'ngon-lua-truong-son-2n1d': 'RW_TOUR_NLTSON_2N1D',
  'mua-do-va-tay-truong-son-2n1d': 'RW_TOUR_MUADO_TSON_2N1D',
  'hanh-trinh-lanh-dao-3n2d': 'RW_TOUR_LANHDAO_3N2D',
  'di-san-quoc-gia-2n1d': 'RW_TOUR_DISANQG_2N1D',
  'huyen-thoai-nguoi-phu-nu-viet-nam-3n2d': 'RW_TOUR_PHUNUVN_3N2D',
  'dmz-hoa-giai-ban-sac-4n3d': 'RW_TOUR_DMZ_4N3D',
  'hanh-trinh-trai-nghiem-linh-hoat': 'RW_FLEX_GENERAL',
  'hanh-trinh-giao-duc-ky-nang-song': 'RW_FLEX_EDU_SKILL',
  'hanh-trinh-trai-nghiem-thien-nhien': 'RW_FLEX_NATURE',
  'hanh-trinh-van-hoa-di-san': 'RW_FLEX_HERITAGE',
  'tom_tat_ho_so_hanh_trinh_mau_cho_nha_truong': 'RW_PROFILE_SCHOOL',
  '01-mo-dau-ruby-wings-la-ai': 'RW_ABOUT_01',
  '02-cau-chuyen-khoi-nguon': 'RW_ABOUT_02',
  '03-triet-ly-gia-tri': 'RW_ABOUT_03',
  '04-logo-y-nghia': 'RW_ABOUT_04',
  '05-he-sinh-thai-ruby-wings': 'RW_ABOUT_05',
  'dich-vu-du-lich-trai-nghiem': 'RW_SERVICE_EXPERIENCE',
  'dich-vu-retreat-chua-lanh': 'RW_SERVICE_RETREAT',
  'dich-vu-team-building': 'RW_SERVICE_TEAMBUILDING',
  'dich-vu-giao-duc-ky-nang': 'RW_SERVICE_EDUCATION',
  'lien-he': 'RW_CONTACT',
  'gioi-thieu': 'RW_ABOUT',
  'theo_dong_di_san_mien_trung_tu_pho_co_den_co_do': 'RW_TOUR_DISANMIENTRUNG_3N2D',
  'ky_uc_va_dai_ngan_tinh_lang_gv': 'RW_TOUR_KYUC_DAINGAN_2N1D',
  'mien_trung_di_san_kham_pha_quy_nhon_phu_yen': 'RW_TOUR_QUYNHON_PHUYEN_4N3D',
  'kham_pha_dat_viet_van_hoa_ky_quan_thien_nhien_khe_sanh_tam_dao_moc_chau': 'RW_TOUR_TAMDAO_MOCCHAU_4N3D',
  'mien_bac_di_san_tam_linh_thien_nhien': 'RW_TOUR_HALONG_NINHBINH_TAMCHUC_3N2D',
  'trai_nghiem_tinh_hoa_bac_bo_ha_noi_sa_pa_phu_tho': 'RW_TOUR_HANOI_SAPA_PHUTHO_5N4D',
  'di_san_kham_pha_ninh_binh_tam_dao_ha_long': 'RW_TOUR_NINHBINH_TAMDAO_HALONG_6N5D',
  'kham_pha_da_nang_hoi_an': 'RW_TOUR_DANANG_HOIAN_2N1D',
  'gioi_thieu_tai_lieu_bat_mach_noi_dau': 'RW_BOOK_BAT_MACH_NOI_DAU',
  'cong_dong_ban_sac_trong_nuoc': 'CONG_DONG_BAN_SAC_TRONG_NUOC',
  'ket_noi_trong_nuoc': 'KET_NOI_TRONG_NUOC',
  'lan_toa_trong_nuoc': 'LAN_TOA_TRONG_NUOC',
  'giao_duc_ky_nang_trong_nuoc': 'GIAO_DUC_KY_NANG_TRONG_NUOC',
  'trai-nghiem-linh-hoat-phu-nu': 'RW_TOUR_DONGCHAYYEUTHUONG_2N1D',
  'mua_do_va_tay_truong_son': 'RW_TOUR_MUADO_TSON_2N1D',
  'dai_ngan_truong_son_sac_xuan_mien_bien_vien': 'RW_TOUR_TRUONGSON_BIENVIEN_2N1D',
  'non-nuoc-bach-ma': 'RW_TOUR_BACHMA_1DAY',
  'sac_xuan_mien_bien_vien': 'RW_TOUR_SACXUAN_BIENVIEN_2N1D'
};

/* =========================================================
   LEAD KEYWORDS
========================================================= */
const LEAD_KEYWORDS = [
  'đăng ký',
  'đăng ký thông tin tư vấn',
  'gọi để chúng tôi tư vấn',
  'liên hệ đặt hành trình',
  'nơi nhận tư vấn',
  'nơi nhận tư vấn →',
  'liên hệ',
  'tư vấn',
  '033.251.0486'
];

/* =========================================================
   PATH KEY – FIX CHUẨN HTML TĨNH
========================================================= */
let pathKey = location.pathname
  .replace(/^\/|\/$/g,'')
  .replace('index.html','')
  .replace('.html','');

if(pathKey === '') pathKey = '';

const CONTENT_ID = CONTENT_ID_MAP[pathKey] || null;
const PAGE_TYPE = pathKey === '' ? 'home' : (CONTENT_ID ? 'page' : 'unmapped');

/* =========================================================
   VIEW CONTENT
========================================================= */
setTimeout(function(){
  if(!window.fbq || !CONTENT_ID) return;
  fbq('track','ViewContent',{
    content_name: document.title,
    content_category: PAGE_TYPE,
    content_ids: [CONTENT_ID],
    content_type: 'website',
    currency: 'VND',
    value: PAGE_TYPE==='home'?0:10000,
    predicted_ltv: PAGE_TYPE==='home'?0:1000000
  });
},1000);

/* =========================================================
   DEEP SCROLL (KHÔNG LỖI CHUỖI)
========================================================= */
let deepScrollSent=false;
window.addEventListener('scroll',function(){
  if(deepScrollSent || !window.fbq || !CONTENT_ID) return;
  const percent=(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100;
  if(percent>=SCROLL_DEPTH){
    deepScrollSent=true;
    fbq('trackCustom','DeepScroll',{
      content_id: CONTENT_ID,
      page_type: PAGE_TYPE,
      scroll_depth: SCROLL_DEPTH
    });
  }
},{passive:true});

/* =========================================================
   ENGAGED VIEW
========================================================= */
setTimeout(function(){
  if(!window.fbq || !CONTENT_ID) return;
  fbq('trackCustom','EngagedView',{
    content_id: CONTENT_ID,
    page_type: PAGE_TYPE,
    time_on_page: ENGAGED_TIME/1000
  });
},ENGAGED_TIME);

/* =========================================================
   LEAD CLICK (CHẶN AUTO-DETECT)
========================================================= */
document.addEventListener('click',function(e){
  if(!window.fbq || !CONTENT_ID) return;
  const el=e.target.closest('a,button');
  if(!el) return;
  const text=(el.innerText||'').toLowerCase();
  const isLead=LEAD_KEYWORDS.some(k=>text.includes(k.toLowerCase()));
  if(!isLead) return;
  fbq('track','Lead',{
    _disable_auto_detect:true,
    content_name:text.substring(0,80),
    content_category:'consultation',
    content_ids:[CONTENT_ID],
    page_type:PAGE_TYPE,
    intent_level:'medium',
    value:180000,
    currency:'VND'
  });
});



/* =========================================================
   ZALO BUTTON (GÓC PHẢI, TRÊN NÚT FORM TƯ VẤN) - NÚT TRÒN
========================================================= */
const zaloRoundBtn = document.createElement('div');
zaloRoundBtn.innerHTML = `
 <a href="https://zalo.me/84332510486"
   target="_blank"
   rel="noopener noreferrer"
   id="rw-zalo-round-btn"
   style="
     position:fixed;
     right:20px;
     bottom:80px;
     z-index:9999;
     width:60px;
     height:60px;
     border-radius:50%;
     background:linear-gradient(135deg,#0068FF,#0052CC);
     color:#ffffff;
     display:flex;
     align-items:center;
     justify-content:center;
     text-decoration:none;
     box-shadow:0 6px 16px rgba(0,0,0,.25);
     border:2px solid white;
   ">
   <img src="images/zalo.jpg" 
        style="width:30px;height:30px;border-radius:50%;object-fit:cover;">
</a>
`;
document.body.appendChild(zaloRoundBtn);

/* =========================================================
   CONSULT BUTTON (GÓC PHẢI)
========================================================= */
const btn = document.createElement('div');
btn.innerHTML = `
 <a href="https://forms.gle/XCWf6zgFRp4Vhbw39"
   target="_blank"
   id="rw-consult-btn"
   style="
     position:fixed;
     right:20px;
     bottom:20px;
     z-index:9999;
     padding:12px 18px;
     background:linear-gradient(135deg,#16a34a,#22c55e);
     color:#ffffff;
     font-weight:700;
     font-size:14px;
     border-radius:30px;
     text-decoration:none;
     box-shadow:0 6px 16px rgba(0,0,0,.25);
   ">
   Form tư vấn
</a>
`;
document.body.appendChild(btn);

/* ===== META PIXEL: CONTACT (TRÌNH DUYỆT) ===== */
const contactBtn = document.getElementById('rw-consult-btn');
if (contactBtn && typeof fbq === 'function') {
  contactBtn.addEventListener('click', function () {
    fbq('track', 'Contact');
  });
}

})();
</script>
<script>
// Ruby Wings Chat Widget - Complete Isolation
const BACKEND_URL = "https://ruby-wings-chatbot.onrender.com";

(function() {
    'use strict';
    
    // Kiểm tra trùng lặp
    if (window.RW_CHAT_LOADED) return;
    window.RW_CHAT_LOADED = true;
    
    // Tạo container tách biệt hoàn toàn
    const createIsolatedWidget = function() {
        // Xóa widget cũ nếu có
        const oldWidgets = document.querySelectorAll('#rw-chat-isolated, .rw-chat-isolated');
        oldWidgets.forEach(w => w.remove());
        
        // Tạo container mới
        const container = document.createElement('div');
        container.id = 'rw-chat-isolated';
        container.className = 'rw-chat-isolated';
        
        // CSS hoàn toàn tách biệt
        const styles = `
            .rw-chat-isolated {
                position: fixed !important;
                left: 0 !important;
                bottom: 0 !important;
                width: auto !important;
                height: auto !important;
                z-index: 10000 !important;
                pointer-events: none !important;
                isolation: isolate !important;
                all: initial !important;
                font-family: Arial, sans-serif !important;
            }
            
            .rw-chat-isolated * {
                pointer-events: auto !important;
                box-sizing: border-box !important;
            }
            
            .rw-chat-btn-isolated {
    position: fixed !important;
    left: 15px !important;
    bottom: 15px !important;
    width: 60px !important;
    height: 60px !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, #00d97e, #00b368) !important;
    border: 2px solid white !important; /* <--- đã thêm viền trắng */
    color: white !important;
    font-size: 24px !important;
    cursor: pointer !important;
    z-index: 10001 !important;
    box-shadow: 0 4px 20px rgba(0,217,126,0.4) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    margin: 0 !important;
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
    overflow: hidden !important;
}
            
            .rw-chat-btn-isolated::after {
                content: "AI" !important;
                position: absolute !important;
                bottom: 5px !important;
                font-size: 11px !important;
                font-weight: bold !important;
                color: white !important;
                left: 0 !important;
                right: 0 !important;
                text-align: center !important;
            }
            
            .rw-chat-widget-isolated {
                position: fixed !important;
                left: 15px !important;
                bottom: 85px !important;
                width: calc(100vw - 30px) !important;
                max-width: 400px !important;
                height: 500px !important;
                background: white !important;
                border-radius: 12px !important;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important;
                z-index: 10002 !important;
                display: none !important;
                flex-direction: column !important;
                overflow: hidden !important;
                border: 1px solid #e2e8f0 !important;
                pointer-events: auto !important;
            }
            
            .rw-chat-widget-isolated.open {
                display: flex !important;
            }
            
            .rw-chat-header-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                padding: 15px !important;
                display: flex !important;
                align-items: center !important;
                gap: 10px !important;
            }
            
            .rw-chat-avatar-isolated {
                width: 32px !important;
                height: 32px !important;
                border-radius: 8px !important;
                background: rgba(255,255,255,0.2) !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-weight: bold !important;
                font-size: 14px !important;
            }
            
            .rw-chat-title-isolated {
                font-weight: bold !important;
                font-size: 16px !important;
                flex: 1 !important;
            }
            
            .rw-chat-close-isolated {
                background: none !important;
                border: none !important;
                color: white !important;
                font-size: 18px !important;
                cursor: pointer !important;
                width: 30px !important;
                height: 30px !important;
                border-radius: 50% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .rw-chat-body-isolated {
                flex: 1 !important;
                padding: 15px !important;
                overflow-y: auto !important;
                background: #f8fafc !important;
                display: flex !important;
                flex-direction: column !important;
                gap: 12px !important;
            }
            
            .rw-chat-message-isolated {
                max-width: 85% !important;
                padding: 12px 16px !important;
                border-radius: 12px !important;
                font-size: 14px !important;
                line-height: 1.4 !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
            }
            
            .rw-chat-message-bot-isolated {
                background: white !important;
                color: #1e293b !important;
                border-bottom-left-radius: 4px !important;
                align-self: flex-start !important;
            }
            
            .rw-chat-message-user-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                border-bottom-right-radius: 4px !important;
                align-self: flex-end !important;
            }
            
            .rw-chat-input-container-isolated {
                padding: 15px !important;
                background: white !important;
                border-top: 1px solid #e2e8f0 !important;
                display: flex !important;
                gap: 8px !important;
            }
            
            .rw-chat-input-isolated {
                flex: 1 !important;
                padding: 12px !important;
                border: 2px solid #00b368 !important;
                border-radius: 8px !important;
                font-size: 14px !important;
                outline: none !important;
                background: white !important;
                color: #1e293b !important;
            }
            
            .rw-chat-input-isolated:focus {
                border-color: #00d97e !important;
                box-shadow: 0 0 0 3px rgba(0, 217, 126, 0.2) !important;
            }
            
            .rw-chat-send-isolated {
                background: linear-gradient(90deg, #00d97e, #00b368) !important;
                color: white !important;
                border: none !important;
                padding: 12px 16px !important;
                border-radius: 8px !important;
                cursor: pointer !important;
                font-weight: bold !important;
                font-size: 14px !important;
            }
            
            @media (min-width: 769px) {
                .rw-chat-btn-isolated {
                    left: 20px !important;
                    bottom: 20px !important;
                    width: 70px !important;
                    height: 70px !important;
                }
                .rw-chat-btn-isolated::after {
                    font-size: 12px !important;
                    bottom: 8px !important;
                }
                .rw-chat-widget-isolated {
                    left: 20px !important;
                    bottom: 100px !important;
                    width: 400px !important;
                }
            }
        `;
        
        // Thêm styles
        const styleEl = document.createElement('style');
        styleEl.textContent = styles;
        document.head.appendChild(styleEl);
        
        // Tạo HTML
        container.innerHTML = `
            <button class="rw-chat-btn-isolated" aria-label="Mở chat trợ lý Ruby Wings AI">🤖</button>
            <div class="rw-chat-widget-isolated">
                <div class="rw-chat-header-isolated">
                    <div class="rw-chat-avatar-isolated">AI</div>
                    <div class="rw-chat-title-isolated">Trợ lý Ruby Wings AI</div>
                    <button class="rw-chat-close-isolated" aria-label="Đóng chat">✕</button>
                </div>
                <div class="rw-chat-body-isolated">
                    <div class="rw-chat-message-isolated rw-chat-message-bot-isolated">
                        Chào bạn! Tôi là trợ lý Ruby Wings AI chuyên tư vấn về du lịch ... Tôi có thể giúp gì cho bạn?
                        <div style="font-size:11px; color:#94a3b8; margin-top:4px; text-align:right;">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                    </div>
                </div>
                <div class="rw-chat-input-container-isolated">
                    <input type="text" class="rw-chat-input-isolated" placeholder="Chatbot vẫn đang nâng cấp...">
                    <button class="rw-chat-send-isolated">Gửi</button>
                </div>
            </div>
        `;
        
        document.body.appendChild(container);
        
        // Lấy elements
        const chatBtn = container.querySelector('.rw-chat-btn-isolated');
        const chatWidget = container.querySelector('.rw-chat-widget-isolated');
        const closeBtn = container.querySelector('.rw-chat-close-isolated');
        const sendBtn = container.querySelector('.rw-chat-send-isolated');
        const chatInput = container.querySelector('.rw-chat-input-isolated');
        const chatBody = container.querySelector('.rw-chat-body-isolated');
        
        let isOpen = false;
        
        // Event handlers đơn giản
        function toggleChat() {
            isOpen = !isOpen;
            chatWidget.classList.toggle('open', isOpen);
            if (isOpen) {
                setTimeout(() => chatInput.focus(), 100);
            }
        }
        
        function closeChat() {
            isOpen = false;
            chatWidget.classList.remove('open');
        }
        
        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;
            
            // Thêm tin nhắn user
            addMessage(message, 'user');
            chatInput.value = '';
            
            // Hiển thị typing
            const typingMsg = addMessage('...', 'bot', true);
            
            // Gửi đến backend (FIX: Endpoint đúng /chat không có /api)
            fetch(BACKEND_URL + '/chat', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ message: message })
            })
            .then(response => response.json())
            .then(data => {
                typingMsg.remove();
                const reply = data.reply || data.message || 'Không có phản hồi từ server.';
                addMessage(reply, 'bot');
            })
            .catch(error => {
                typingMsg.remove();
                addMessage('Xin lỗi, dịch vụ tạm thời gián đoạn. Vui lòng thử lại.', 'bot');
                console.error('Chat error:', error);
            });
        }
        
        function addMessage(text, sender, isTyping = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `rw-chat-message-isolated rw-chat-message-${sender}-isolated`;
            
            if (isTyping) {
                messageDiv.innerHTML = `
                    <div style="display:flex; gap:4px; align-items:center;">
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite"></div>
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite 0.1s"></div>
                        <div style="width:6px; height:6px; border-radius:50%; background:#00d97e; animation: bounce 1s infinite 0.2s"></div>
                    </div>
                    <style>
                        @keyframes bounce {
                            0%, 100% { transform: translateY(0); }
                            50% { transform: translateY(-5px); }
                        }
                    </style>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div>${text}</div>
                    <div style="font-size:11px; opacity:0.7; margin-top:4px; text-align:${sender === 'user' ? 'left' : 'right'};">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                `;
            }
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
            return messageDiv;
        }
        
        // Gắn event listeners
        chatBtn.addEventListener('click', toggleChat);
        closeBtn.addEventListener('click', closeChat);
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        // Đóng khi click bên ngoài
        document.addEventListener('click', (e) => {
            if (isOpen && !chatWidget.contains(e.target) && !chatBtn.contains(e.target)) {
                closeChat();
            }
        });
    };
    
    // Khởi tạo khi trang load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', createIsolatedWidget);
    } else {
        createIsolatedWidget();
    }
})();

</script>
<!-- NÚT GỌI ĐIỆN RUBY WINGS - Đặt trước thẻ đóng </body> -->
<div id="ruby-call-widget" style="position: fixed; z-index: 10001;">
   <button id="ruby-call-button" style="background: linear-gradient(135deg, #00d97e, #00b368) !important; color: white; border: 2px solid white; border-radius: 50%; cursor: pointer; box-shadow: 0 6px 25px rgba(0, 217, 126, 0.4); display: flex; align-items: center; justify-content: center; transition: all 0.3s; outline: none;">
        📞
    </button>
</div>

<!-- MODAL NHẬP SỐ ĐIỆN THOẠI -->
<div id="ruby-call-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10002; align-items: center; justify-content: center;">
    <div style="background: linear-gradient(135deg, #1a5f23 0%, #0d3b1a 100%); border-radius: 16px; padding: 30px; width: 90%; max-width: 420px; box-shadow: 0 15px 40px rgba(0,0,0,0.5); border: 2px solid #27ae60;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
            <h3 style="color: white; margin: 0; font-size: 22px; font-weight: 600; text-shadow: 1px 1px 3px rgba(0,0,0,0.3);">📞 GỌI CHO CHÚNG TÔI</h3>
            <button id="ruby-close-modal" style="background: none; border: none; font-size: 28px; cursor: pointer; color: white; padding: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s;">×</button>
        </div>
        
        <div style="margin-bottom: 25px;">
            <p style="color: white; margin-bottom: 10px; font-size: 16px; font-weight: 500;">Nhập số của Bạn để gọi chúng tôi:</p>
            <input type="tel" id="ruby-phone-input" 
                   style="width: 100%; padding: 15px; background: white; color: black; border: 3px solid #27ae60; border-radius: 10px; font-size: 18px; font-weight: 500; box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);"
                   placeholder="Ví dụ: 0332 510 486" 
                   pattern="[0-9]{10,11}">
            <p style="color: #d1e7dd; font-size: 13px; margin-top: 8px; font-weight: 400;">Chúng tôi sẽ gọi lại cho bạn trong sớm nhất có thể</p>
        </div>
        
        <div style="display: flex; gap: 12px;">
            <button id="ruby-call-regular" 
                    style="flex: 1; background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%); color: white; border: none; padding: 16px; border-radius: 10px; cursor: pointer; font-size: 17px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); transition: all 0.3s; min-height: 55px;">
                <span style="font-size: 20px;">📞</span>
                <span>GỌI SỐ</span>
            </button>
            <button id="ruby-call-zalo" 
                    style="flex: 1; background: linear-gradient(135deg, #0068ff 0%, #0052cc 100%); color: white; border: none; padding: 16px; border-radius: 10px; cursor: pointer; font-size: 17px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(0, 104, 255, 0.4); transition: all 0.3s; min-height: 55px;">
                <span><img src="https://img.icons8.com/color/20/000000/zalo.png" style="width: 20px; height: 20px; filter: brightness(0) invert(1);"></span>
                <span>GỌI ZALO</span>
            </button>
        </div>
        
        <p id="ruby-call-message" style="margin-top: 20px; text-align: center; font-size: 14px; min-height: 22px; color: white; font-weight: 500;"></p>
    </div>
</div>

<style>
/* ===== STYLES FOR ALL DEVICES ===== */
#ruby-call-widget {
    position: fixed !important;
    z-index: 10001 !important;
}

#ruby-call-button {
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

#ruby-call-button::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s;
    z-index: -1;
}

#ruby-call-button:hover::after {
    opacity: 1;
}

#ruby-close-modal:hover {
    background: rgba(255, 255, 255, 0.2) !important;
    transform: rotate(90deg);
}

/* DÒNG CODE THAY THẾ */
#ruby-call-regular:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0, 217, 126, 0.6) !important;
    background: linear-gradient(135deg, #00d97e, #00b368) !important;
    filter: brightness(1.1);
}

#ruby-call-zalo:hover {
    transform: translateY(-3px) !important;
    box-shadow: 0 8px 20px rgba(0, 104, 255, 0.6) !important;
    background: linear-gradient(135deg, #0057d9 0%, #0047b3 100%) !important;
}

/* Input focus effects */
#ruby-phone-input:focus {
    outline: none;
    border-color: #2ecc71 !important;
    box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.3) !important;
}

/* Animation cho modal */
@keyframes rubyModalFadeIn {
    from { 
        opacity: 0; 
        transform: translateY(-30px) scale(0.95); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    }
}

@keyframes rubyButtonPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

#ruby-call-modal > div {
    animation: rubyModalFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Pulsing effect for call button */
.ruby-pulse {
    animation: rubyButtonPulse 2s infinite;
}

/* ===== DESKTOP STYLES (default) ===== */
@media (min-width: 769px) {
    #ruby-call-widget {
        bottom: 105px;
        left: 24px;
    }
    
    #ruby-call-button {
        width: 70px;
        height: 70px;
        font-size: 30px;
    }
}

/* ===== MOBILE STYLES ===== */
@media (max-width: 768px) {
    #ruby-call-widget {
        bottom: 85px;
        left: 15px;
    }
    
    #ruby-call-button {
        width: 60px;
        height: 60px;
        font-size: 26px;
    }
    
    #ruby-call-modal > div {
        padding: 25px !important;
        margin: 15px;
    }
    
    #ruby-phone-input {
        padding: 14px !important;
        font-size: 16px !important;
    }
    
    #ruby-call-regular,
    #ruby-call-zalo {
        padding: 14px !important;
        font-size: 16px !important;
        min-height: 50px !important;
    }
}

/* ===== EXTRA SMALL DEVICES ===== */
@media (max-width: 480px) {
    #ruby-call-widget {
        bottom: 85px;
        left: 15px;
    }
    
    #ruby-call-button {
        width: 60px;
        height: 60px;
        font-size: 24px;
    }
    
    #ruby-call-modal > div {
        padding: 20px !important;
    }
    
    h3 {
        font-size: 20px !important;
    }
}

/* ===== PRINT STYLES (hide on print) ===== */
@media print {
    #ruby-call-widget,
    #ruby-call-modal {
        display: none !important;
    }
}

/* ===== DARK MODE SUPPORT ===== */
@media (prefers-color-scheme: dark) {
    #ruby-phone-input {
        background: white !important;
        color: black !important;
    }
}
</style>

<script>
// Biến toàn cục để track trạng thái
let rubyCallWidgetInitialized = false;
let rubyCallWidgetVisible = true;

// Số điện thoại cố định của công ty
const RUBY_WINGS_PHONE = "0332510486";

// Hàm khởi tạo widget gọi điện
function initRubyCallWidget() {
    if (rubyCallWidgetInitialized) return;
    rubyCallWidgetInitialized = true;
    
    // DOM Elements
    const callButton = document.getElementById('ruby-call-button');
    const callModal = document.getElementById('ruby-call-modal');
    const closeButton = document.getElementById('ruby-close-modal');
    const phoneInput = document.getElementById('ruby-phone-input');
    const callRegularButton = document.getElementById('ruby-call-regular');
    const callZaloButton = document.getElementById('ruby-call-zalo');
    const messageElement = document.getElementById('ruby-call-message');
    
    // Áp dụng positioning cho widget
    function applyWidgetPosition() {
        const widget = document.getElementById('ruby-call-widget');
        if (window.innerWidth >= 769) {
            // Desktop positioning
            widget.style.bottom = '105px';
            widget.style.left = '24px';
        } else {
            // Mobile positioning
            widget.style.bottom = '85px';
            widget.style.left = '15px';
        }
    }
    
    // Apply initial position
    applyWidgetPosition();
    
    // Thêm hiệu ứng pulse cho nút
    callButton.classList.add('ruby-pulse');
    
    // Mở modal khi click nút gọi điện
    callButton.addEventListener('click', () => {
        callModal.style.display = 'flex';
        phoneInput.focus();
        phoneInput.select();
        
        // Tạm dừng hiệu ứng pulse khi mở modal
        callButton.classList.remove('ruby-pulse');
    });
    
    // Đóng modal
    closeButton.addEventListener('click', () => {
        callModal.style.display = 'none';
        messageElement.textContent = '';
        phoneInput.value = '';
        
        // Khôi phục hiệu ứng pulse
        setTimeout(() => {
            callButton.classList.add('ruby-pulse');
        }, 500);
    });
    
    // Click bên ngoài để đóng modal
    callModal.addEventListener('click', (e) => {
        if (e.target === callModal) {
            callModal.style.display = 'none';
            messageElement.textContent = '';
            phoneInput.value = '';
            
            // Khôi phục hiệu ứng pulse
            setTimeout(() => {
                callButton.classList.add('ruby-pulse');
            }, 500);
        }
    });
    
    // ESC key để đóng modal
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && callModal.style.display === 'flex') {
            callModal.style.display = 'none';
            messageElement.textContent = '';
            phoneInput.value = '';
            
            setTimeout(() => {
                callButton.classList.add('ruby-pulse');
            }, 500);
        }
    });
    
    // Hàm lưu lead vào hệ thống
    async function saveRubyLead(phoneNumber, callType) {
        // Validate số điện thoại
        const cleanPhone = phoneNumber.replace(/\D/g, '');
        if (cleanPhone.length < 10 || cleanPhone.length > 11) {
            throw new Error('Số điện thoại không hợp lệ. Vui lòng nhập 10-11 chữ số');
        }
        
        // Chuẩn bị dữ liệu lead
        const leadData = {
            phone: cleanPhone,
            source_channel: "Website",
            action_type: "Click Call Button",
            page_url: window.location.href,
            contact_name: "Khách yêu cầu gọi lại",
            service_interest: "",
            note: callType === 'zalo' ? 
                  "Khách yêu cầu gọi lại qua Zalo" : 
                  "Khách yêu cầu gọi lại trực tiếp"
        };
        
        // Gửi đến backend API
        const response = await fetch('https://ruby-wings-chatbot.onrender.com/api/save-lead', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(leadData)
        });
        
        if (!response.ok) {
            throw new Error('Lỗi kết nối server. Vui lòng thử lại');
        }
        
        return await response.json();
    }
    
    // Hàm xử lý gọi điện
    async function handleCall(callType = 'regular') {
        const eventId = crypto.randomUUID();
        const phoneNumber = phoneInput.value.trim();
        
        if (!phoneNumber) {
            messageElement.textContent = '⚠️ Vui lòng nhập số điện thoại';
            messageElement.style.color = '#ffcc00';
            phoneInput.focus();
            return;
        }
        
        // Hiển thị trạng thái đang xử lý
        const originalRegularText = callRegularButton.innerHTML;
        const originalZaloText = callZaloButton.innerHTML;
        
        if (callType === 'regular') {
            callRegularButton.innerHTML = '<span style="font-size: 20px;">⏳</span><span>ĐANG XỬ LÝ...</span>';
            callRegularButton.disabled = true;
            callRegularButton.style.opacity = '0.8';
        } else {
            callZaloButton.innerHTML = '<span style="font-size: 20px;">⏳</span><span>ĐANG XỬ LÝ...</span>';
            callZaloButton.disabled = true;
            callZaloButton.style.opacity = '0.8';
        }
        
        messageElement.textContent = '⏳ Đang lưu thông tin và kết nối...';
        messageElement.style.color = '#ffcc00';
        
        try {
            // 1. Lưu lead vào hệ thống
            const result = await saveRubyLead(phoneNumber, callType);
            // Track Call / Zalo conversion (Meta CAPI)
            fetch('https://ruby-wings-chatbot.onrender.com/api/track-call', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    event_id: window.RW_EVENT_ID, // ✅ dùng event_id chung toàn site
                    phone: phoneNumber.replace(/\D/g, ''),
                    action: callType === 'zalo' ? 'Zalo Click' : 'Phone Call'
                })
            });


            // 2. Hiển thị thông báo thành công
            messageElement.innerHTML = '✅ <strong>THÀNH CÔNG!</strong> Đã gửi thông tin';
            messageElement.style.color = '#2ecc71';
            
            // 3. Chuyển hướng đến cuộc gọi/Zalo CÔNG TY (FIX: Gọi đến số công ty thay vì số khách hàng)
            setTimeout(() => {
                if (callType === 'zalo') {
                    // Mở Zalo CÔNG TY trong tab mới
                    window.open(`https://zalo.me/${RUBY_WINGS_PHONE}`, '_blank', 'noopener,noreferrer');
                } else {
                    // Gọi điện đến SỐ CÔNG TY
                    window.location.href = `tel:${RUBY_WINGS_PHONE}`;
                }
                
                // Đóng modal sau 1.5 giây
                setTimeout(() => {
                    callModal.style.display = 'none';
                    phoneInput.value = '';
                    messageElement.textContent = '';
                    
                    // Khôi phục hiệu ứng pulse
                    setTimeout(() => {
                        callButton.classList.add('ruby-pulse');
                    }, 500);
                }, 1500);
            }, 1000);
            
        } catch (error) {
            // Xử lý lỗi
            console.error('Ruby Call Widget Error:', error);
            messageElement.innerHTML = `❌ <strong>${error.message}</strong>`;
            messageElement.style.color = '#ff6b6b';
            
            // Vẫn cho phép gọi nếu API fail (fallback - GỌI ĐẾN CÔNG TY)
            setTimeout(() => {
                const userConfirmed = confirm('Hệ thống đang bận. Bạn vẫn muốn tiếp tục gọi không?');
                
                if (userConfirmed) {
                    if (callType === 'zalo') {
                        window.open(`https://zalo.me/${RUBY_WINGS_PHONE}`, '_blank', 'noopener,noreferrer');
                    } else {
                        window.location.href = `tel:${RUBY_WINGS_PHONE}`;
                    }
                    callModal.style.display = 'none';
                    phoneInput.value = '';
                    messageElement.textContent = '';
                }
            }, 2000);
        } finally {
            // Khôi phục trạng thái nút
            if (callType === 'regular') {
                setTimeout(() => {
                    callRegularButton.innerHTML = originalRegularText;
                    callRegularButton.disabled = false;
                    callRegularButton.style.opacity = '1';
                }, 1000);
            } else {
                setTimeout(() => {
                    callZaloButton.innerHTML = originalZaloText;
                    callZaloButton.disabled = false;
                    callZaloButton.style.opacity = '1';
                }, 1000);
            }
        }
    }
    
    // Gắn sự kiện cho nút gọi thường
    callRegularButton.addEventListener('click', () => handleCall('regular'));
    
    // Gắn sự kiện cho nút gọi Zalo
    callZaloButton.addEventListener('click', () => handleCall('zalo'));
    
    // Cho phép nhấn Enter để gọi thường
    phoneInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            handleCall('regular');
        }
    });
    
    // Auto-format số điện thoại
    phoneInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length > 0) {
            if (value.length <= 4) {
                value = value;
            } else if (value.length <= 7) {
                value = `${value.slice(0, 4)} ${value.slice(4)}`;
            } else {
                value = `${value.slice(0, 4)} ${value.slice(4, 7)} ${value.slice(7, 11)}`;
            }
        }
        
        e.target.value = value;
    });
    
    // Điều chỉnh vị trí nếu có chatbot
    function adjustPositionForChatbot() {
        const chatWidget = document.querySelector('#chatWidget, .chat-widget, [id*="chat"], [class*="chat"], .tawk-button, .zalo-chat-widget');
        if (chatWidget) {
            const chatRect = chatWidget.getBoundingClientRect();
            const callWidget = document.getElementById('ruby-call-widget');
            
            // Đặt nút gọi điện cao hơn nút chatbot 80px
            callWidget.style.bottom = `${chatRect.height + 80}px`;
        }
    }
    
    // Re-apply position on resize
    window.addEventListener('resize', () => {
        applyWidgetPosition();
        adjustPositionForChatbot();
    });
    
    // Kiểm tra và điều chỉnh mỗi 1 giây (phòng trường hợp chatbot load sau)
    const positionCheckInterval = setInterval(() => {
        adjustPositionForChatbot();
    }, 1000);
    
    // Initial adjustments
    setTimeout(() => {
        adjustPositionForChatbot();
    }, 1000);
    
    console.log('✅ Ruby Call Widget đã sẵn sàng - Phiên bản hoàn thiện');
}

// Khởi tạo khi DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initRubyCallWidget);
} else {
    initRubyCallWidget();
}

// Đảm bảo widget vẫn hoạt động khi chuyển trang trong SPA
document.addEventListener('click', (e) => {
    if (e.target.matches('a[href*="#"]') || e.target.closest('a[href*="#"]')) {
        // Giữ widget hiển thị khi chuyển anchor link
        setTimeout(() => {
            if (window.rubyCallWidgetInitialized) {
                const widget = document.getElementById('ruby-call-widget');
                widget.style.display = 'block';
            }
        }, 100);
    }
});

// Chống ẩn widget khi scroll
let lastScrollTop = 0;
window.addEventListener('scroll', () => {
    const st = window.pageYOffset || document.documentElement.scrollTop;
    
    // Luôn hiển thị widget, không ẩn khi scroll
    const widget = document.getElementById('ruby-call-widget');
    if (widget) {
        widget.style.display = 'block';
        widget.style.opacity = '1';
    }
    
    lastScrollTop = st <= 0 ? 0 : st;
}, false);
</script>
</body>
</html>